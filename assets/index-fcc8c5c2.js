var $d=Object.defineProperty;var Bd=(e,t,n)=>t in e?$d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var dl=(e,t,n)=>(Bd(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function uu(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let Bn=uu();function zd(e){Bn=e}const cu=/[&<>"']/,Ud=new RegExp(cu.source,"g"),du=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,jd=new RegExp(du.source,"g"),Gd={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},fl=e=>Gd[e];function Vt(e,t){if(t){if(cu.test(e))return e.replace(Ud,fl)}else if(du.test(e))return e.replace(jd,fl);return e}const Wd=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function fu(e){return e.replace(Wd,(t,n)=>(n=n.toLowerCase(),n==="colon"?":":n.charAt(0)==="#"?n.charAt(1)==="x"?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):""))}const qd=/(^|[^\[])\^/g;function mt(e,t){e=typeof e=="string"?e:e.source,t=t||"";const n={replace:(i,s)=>(s=s.source||s,s=s.replace(qd,"$1"),e=e.replace(i,s),n),getRegex:()=>new RegExp(e,t)};return n}const Xd=/[^\w:]/g,Kd=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function gl(e,t,n){if(e){let i;try{i=decodeURIComponent(fu(n)).replace(Xd,"").toLowerCase()}catch{return null}if(i.indexOf("javascript:")===0||i.indexOf("vbscript:")===0||i.indexOf("data:")===0)return null}t&&!Kd.test(n)&&(n=Yd(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}const ws={},Zd=/^[^:]+:\/*[^/]*$/,Vd=/^([^:]+:)[\s\S]*$/,Hd=/^([^:]+:\/*[^/]*)[\s\S]*$/;function Yd(e,t){ws[" "+e]||(Zd.test(e)?ws[" "+e]=e+"/":ws[" "+e]=qs(e,"/",!0)),e=ws[" "+e];const n=e.indexOf(":")===-1;return t.substring(0,2)==="//"?n?t:e.replace(Vd,"$1")+t:t.charAt(0)==="/"?n?t:e.replace(Hd,"$1")+t:e+t}const nr={exec:function(){}};function ml(e,t){const n=e.replace(/\|/g,(r,a,o)=>{let l=!1,h=a;for(;--h>=0&&o[h]==="\\";)l=!l;return l?"|":" |"}),i=n.split(/ \|/);let s=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;s<i.length;s++)i[s]=i[s].trim().replace(/\\\|/g,"|");return i}function qs(e,t,n){const i=e.length;if(i===0)return"";let s=0;for(;s<i;){const r=e.charAt(i-s-1);if(r===t&&!n)s++;else if(r!==t&&n)s++;else break}return e.slice(0,i-s)}function Qd(e,t){if(e.indexOf(t[1])===-1)return-1;const n=e.length;let i=0,s=0;for(;s<n;s++)if(e[s]==="\\")s++;else if(e[s]===t[0])i++;else if(e[s]===t[1]&&(i--,i<0))return s;return-1}function Jd(e,t){!e||e.silent||(t&&console.warn("marked(): callback is deprecated since version 5.0.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/using_pro#async"),(e.sanitize||e.sanitizer)&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options"),(e.highlight||e.langPrefix!=="language-")&&console.warn("marked(): highlight and langPrefix parameters are deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-highlight."),e.mangle&&console.warn("marked(): mangle parameter is enabled by default, but is deprecated since version 5.0.0, and will be removed in the future. To clear this warning, install https://www.npmjs.com/package/marked-mangle, or disable by setting `{mangle: false}`."),e.baseUrl&&console.warn("marked(): baseUrl parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-base-url."),e.smartypants&&console.warn("marked(): smartypants parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-smartypants."),e.xhtml&&console.warn("marked(): xhtml parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-xhtml."),(e.headerIds||e.headerPrefix)&&console.warn("marked(): headerIds and headerPrefix parameters enabled by default, but are deprecated since version 5.0.0, and will be removed in the future. To clear this warning, install  https://www.npmjs.com/package/marked-gfm-heading-id, or disable by setting `{headerIds: false}`."))}function pl(e,t,n,i){const s=t.href,r=t.title?Vt(t.title):null,a=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){i.state.inLink=!0;const o={type:"link",raw:n,href:s,title:r,text:a,tokens:i.inlineTokens(a)};return i.state.inLink=!1,o}return{type:"image",raw:n,href:s,title:r,text:Vt(a)}}function tf(e,t){const n=e.match(/^(\s+)(?:```)/);if(n===null)return t;const i=n[1];return t.split(`
`).map(s=>{const r=s.match(/^\s+/);if(r===null)return s;const[a]=r;return a.length>=i.length?s.slice(i.length):s}).join(`
`)}class ao{constructor(t){this.options=t||Bn}space(t){const n=this.rules.block.newline.exec(t);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(t){const n=this.rules.block.code.exec(t);if(n){const i=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?i:qs(i,`
`)}}}fences(t){const n=this.rules.block.fences.exec(t);if(n){const i=n[0],s=tf(i,n[3]||"");return{type:"code",raw:i,lang:n[2]?n[2].trim().replace(this.rules.inline._escapes,"$1"):n[2],text:s}}}heading(t){const n=this.rules.block.heading.exec(t);if(n){let i=n[2].trim();if(/#$/.test(i)){const s=qs(i,"#");(this.options.pedantic||!s||/ $/.test(s))&&(i=s.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(t){const n=this.rules.block.hr.exec(t);if(n)return{type:"hr",raw:n[0]}}blockquote(t){const n=this.rules.block.blockquote.exec(t);if(n){const i=n[0].replace(/^ *>[ \t]?/gm,""),s=this.lexer.state.top;this.lexer.state.top=!0;const r=this.lexer.blockTokens(i);return this.lexer.state.top=s,{type:"blockquote",raw:n[0],tokens:r,text:i}}}list(t){let n=this.rules.block.list.exec(t);if(n){let i,s,r,a,o,l,h,u,c,d,f,g,m=n[1].trim();const _=m.length>1,v={type:"list",raw:"",ordered:_,start:_?+m.slice(0,-1):"",loose:!1,items:[]};m=_?`\\d{1,9}\\${m.slice(-1)}`:`\\${m}`,this.options.pedantic&&(m=_?m:"[*+-]");const E=new RegExp(`^( {0,3}${m})((?:[	 ][^\\n]*)?(?:\\n|$))`);for(;t&&(g=!1,!(!(n=E.exec(t))||this.rules.block.hr.test(t)));){if(i=n[0],t=t.substring(i.length),u=n[2].split(`
`,1)[0].replace(/^\t+/,x=>" ".repeat(3*x.length)),c=t.split(`
`,1)[0],this.options.pedantic?(a=2,f=u.trimLeft()):(a=n[2].search(/[^ ]/),a=a>4?1:a,f=u.slice(a),a+=n[1].length),l=!1,!u&&/^ *$/.test(c)&&(i+=c+`
`,t=t.substring(c.length+1),g=!0),!g){const x=new RegExp(`^ {0,${Math.min(3,a-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),w=new RegExp(`^ {0,${Math.min(3,a-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),S=new RegExp(`^ {0,${Math.min(3,a-1)}}(?:\`\`\`|~~~)`),Y=new RegExp(`^ {0,${Math.min(3,a-1)}}#`);for(;t&&(d=t.split(`
`,1)[0],c=d,this.options.pedantic&&(c=c.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(S.test(c)||Y.test(c)||x.test(c)||w.test(t)));){if(c.search(/[^ ]/)>=a||!c.trim())f+=`
`+c.slice(a);else{if(l||u.search(/[^ ]/)>=4||S.test(u)||Y.test(u)||w.test(u))break;f+=`
`+c}!l&&!c.trim()&&(l=!0),i+=d+`
`,t=t.substring(d.length+1),u=c.slice(a)}}v.loose||(h?v.loose=!0:/\n *\n *$/.test(i)&&(h=!0)),this.options.gfm&&(s=/^\[[ xX]\] /.exec(f),s&&(r=s[0]!=="[ ] ",f=f.replace(/^\[[ xX]\] +/,""))),v.items.push({type:"list_item",raw:i,task:!!s,checked:r,loose:!1,text:f}),v.raw+=i}v.items[v.items.length-1].raw=i.trimRight(),v.items[v.items.length-1].text=f.trimRight(),v.raw=v.raw.trimRight();const M=v.items.length;for(o=0;o<M;o++)if(this.lexer.state.top=!1,v.items[o].tokens=this.lexer.blockTokens(v.items[o].text,[]),!v.loose){const x=v.items[o].tokens.filter(S=>S.type==="space"),w=x.length>0&&x.some(S=>/\n.*\n/.test(S.raw));v.loose=w}if(v.loose)for(o=0;o<M;o++)v.items[o].loose=!0;return v}}html(t){const n=this.rules.block.html.exec(t);if(n){const i={type:"html",block:!0,raw:n[0],pre:!this.options.sanitizer&&(n[1]==="pre"||n[1]==="script"||n[1]==="style"),text:n[0]};if(this.options.sanitize){const s=this.options.sanitizer?this.options.sanitizer(n[0]):Vt(n[0]);i.type="paragraph",i.text=s,i.tokens=this.lexer.inline(s)}return i}}def(t){const n=this.rules.block.def.exec(t);if(n){const i=n[1].toLowerCase().replace(/\s+/g," "),s=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",r=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline._escapes,"$1"):n[3];return{type:"def",tag:i,raw:n[0],href:s,title:r}}}table(t){const n=this.rules.block.table.exec(t);if(n){const i={type:"table",header:ml(n[1]).map(s=>({text:s})),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(i.header.length===i.align.length){i.raw=n[0];let s=i.align.length,r,a,o,l;for(r=0;r<s;r++)/^ *-+: *$/.test(i.align[r])?i.align[r]="right":/^ *:-+: *$/.test(i.align[r])?i.align[r]="center":/^ *:-+ *$/.test(i.align[r])?i.align[r]="left":i.align[r]=null;for(s=i.rows.length,r=0;r<s;r++)i.rows[r]=ml(i.rows[r],i.header.length).map(h=>({text:h}));for(s=i.header.length,a=0;a<s;a++)i.header[a].tokens=this.lexer.inline(i.header[a].text);for(s=i.rows.length,a=0;a<s;a++)for(l=i.rows[a],o=0;o<l.length;o++)l[o].tokens=this.lexer.inline(l[o].text);return i}}}lheading(t){const n=this.rules.block.lheading.exec(t);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(t){const n=this.rules.block.paragraph.exec(t);if(n){const i=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:i,tokens:this.lexer.inline(i)}}}text(t){const n=this.rules.block.text.exec(t);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(t){const n=this.rules.inline.escape.exec(t);if(n)return{type:"escape",raw:n[0],text:Vt(n[1])}}tag(t){const n=this.rules.inline.tag.exec(t);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):Vt(n[0]):n[0]}}link(t){const n=this.rules.inline.link.exec(t);if(n){const i=n[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const a=qs(i.slice(0,-1),"\\");if((i.length-a.length)%2===0)return}else{const a=Qd(n[2],"()");if(a>-1){const l=(n[0].indexOf("!")===0?5:4)+n[1].length+a;n[2]=n[2].substring(0,a),n[0]=n[0].substring(0,l).trim(),n[3]=""}}let s=n[2],r="";if(this.options.pedantic){const a=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s);a&&(s=a[1],r=a[3])}else r=n[3]?n[3].slice(1,-1):"";return s=s.trim(),/^</.test(s)&&(this.options.pedantic&&!/>$/.test(i)?s=s.slice(1):s=s.slice(1,-1)),pl(n,{href:s&&s.replace(this.rules.inline._escapes,"$1"),title:r&&r.replace(this.rules.inline._escapes,"$1")},n[0],this.lexer)}}reflink(t,n){let i;if((i=this.rules.inline.reflink.exec(t))||(i=this.rules.inline.nolink.exec(t))){let s=(i[2]||i[1]).replace(/\s+/g," ");if(s=n[s.toLowerCase()],!s){const r=i[0].charAt(0);return{type:"text",raw:r,text:r}}return pl(i,s,i[0],this.lexer)}}emStrong(t,n,i=""){let s=this.rules.inline.emStrong.lDelim.exec(t);if(!s||s[3]&&i.match(/[\p{L}\p{N}]/u))return;const r=s[1]||s[2]||"";if(!r||r&&(i===""||this.rules.inline.punctuation.exec(i))){const a=s[0].length-1;let o,l,h=a,u=0;const c=s[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(c.lastIndex=0,n=n.slice(-1*t.length+a);(s=c.exec(n))!=null;){if(o=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!o)continue;if(l=o.length,s[3]||s[4]){h+=l;continue}else if((s[5]||s[6])&&a%3&&!((a+l)%3)){u+=l;continue}if(h-=l,h>0)continue;l=Math.min(l,l+h+u);const d=t.slice(0,a+s.index+l+1);if(Math.min(a,l)%2){const g=d.slice(1,-1);return{type:"em",raw:d,text:g,tokens:this.lexer.inlineTokens(g)}}const f=d.slice(2,-2);return{type:"strong",raw:d,text:f,tokens:this.lexer.inlineTokens(f)}}}}codespan(t){const n=this.rules.inline.code.exec(t);if(n){let i=n[2].replace(/\n/g," ");const s=/[^ ]/.test(i),r=/^ /.test(i)&&/ $/.test(i);return s&&r&&(i=i.substring(1,i.length-1)),i=Vt(i,!0),{type:"codespan",raw:n[0],text:i}}}br(t){const n=this.rules.inline.br.exec(t);if(n)return{type:"br",raw:n[0]}}del(t){const n=this.rules.inline.del.exec(t);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(t,n){const i=this.rules.inline.autolink.exec(t);if(i){let s,r;return i[2]==="@"?(s=Vt(this.options.mangle?n(i[1]):i[1]),r="mailto:"+s):(s=Vt(i[1]),r=s),{type:"link",raw:i[0],text:s,href:r,tokens:[{type:"text",raw:s,text:s}]}}}url(t,n){let i;if(i=this.rules.inline.url.exec(t)){let s,r;if(i[2]==="@")s=Vt(this.options.mangle?n(i[0]):i[0]),r="mailto:"+s;else{let a;do a=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])[0];while(a!==i[0]);s=Vt(i[0]),i[1]==="www."?r="http://"+i[0]:r=i[0]}return{type:"link",raw:i[0],text:s,href:r,tokens:[{type:"text",raw:s,text:s}]}}}inlineText(t,n){const i=this.rules.inline.text.exec(t);if(i){let s;return this.lexer.state.inRawBlock?s=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):Vt(i[0]):i[0]:s=Vt(this.options.smartypants?n(i[0]):i[0]),{type:"text",raw:i[0],text:s}}}}const G={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:nr,lheading:/^((?:(?!^bull ).|\n(?!\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};G._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;G._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;G.def=mt(G.def).replace("label",G._label).replace("title",G._title).getRegex();G.bullet=/(?:[*+-]|\d{1,9}[.)])/;G.listItemStart=mt(/^( *)(bull) */).replace("bull",G.bullet).getRegex();G.list=mt(G.list).replace(/bull/g,G.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+G.def.source+")").getRegex();G._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";G._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;G.html=mt(G.html,"i").replace("comment",G._comment).replace("tag",G._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();G.lheading=mt(G.lheading).replace(/bull/g,G.bullet).getRegex();G.paragraph=mt(G._paragraph).replace("hr",G.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",G._tag).getRegex();G.blockquote=mt(G.blockquote).replace("paragraph",G.paragraph).getRegex();G.normal={...G};G.gfm={...G.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"};G.gfm.table=mt(G.gfm.table).replace("hr",G.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",G._tag).getRegex();G.gfm.paragraph=mt(G._paragraph).replace("hr",G.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",G.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",G._tag).getRegex();G.pedantic={...G.normal,html:mt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",G._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:nr,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:mt(G.normal._paragraph).replace("hr",G.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",G.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const N={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:nr,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:nr,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};N._uc_punctuation="\\u00A1\\u00A7\\u00AB\\u00B6\\u00B7\\u00BB\\u00BF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u0AF0\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166D\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u2308-\\u230B\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E42\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA8FC\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65";N._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~\\\\"+N._uc_punctuation;N.punctuation=mt(N.punctuation).replace(/punctuation/g,N._punctuation).getRegex();N.blockSkip=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g;N.escapedPunct=/\\[punct_*]/g;N._comment=mt(G._comment).replace("(?:-->|$)","-->").getRegex();N.emStrong.lDelim=mt(N.emStrong.lDelim).replace(/punct/g,N._punctuation).getRegex();N.emStrong.rDelimAst=mt(N.emStrong.rDelimAst,"g").replace(/punct/g,N._punctuation).getRegex();N.emStrong.rDelimUnd=mt(N.emStrong.rDelimUnd,"g").replace(/punct/g,N._punctuation).getRegex();N.escapedPunct=mt(N.escapedPunct,"g").replace(/punct/g,N._punctuation).getRegex();N._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;N._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;N._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;N.autolink=mt(N.autolink).replace("scheme",N._scheme).replace("email",N._email).getRegex();N._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;N.tag=mt(N.tag).replace("comment",N._comment).replace("attribute",N._attribute).getRegex();N._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;N._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;N._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;N.link=mt(N.link).replace("label",N._label).replace("href",N._href).replace("title",N._title).getRegex();N.reflink=mt(N.reflink).replace("label",N._label).replace("ref",G._label).getRegex();N.nolink=mt(N.nolink).replace("ref",G._label).getRegex();N.reflinkSearch=mt(N.reflinkSearch,"g").replace("reflink",N.reflink).replace("nolink",N.nolink).getRegex();N.normal={...N};N.pedantic={...N.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:mt(/^!?\[(label)\]\((.*?)\)/).replace("label",N._label).getRegex(),reflink:mt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",N._label).getRegex()};N.gfm={...N.normal,escape:mt(N.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/};N.gfm.url=mt(N.gfm.url,"i").replace("email",N.gfm._extended_email).getRegex();N.breaks={...N.gfm,br:mt(N.br).replace("{2,}","*").getRegex(),text:mt(N.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};function ef(e){return e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function _l(e){let t="",n,i;const s=e.length;for(n=0;n<s;n++)i=e.charCodeAt(n),Math.random()>.5&&(i="x"+i.toString(16)),t+="&#"+i+";";return t}class dn{constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Bn,this.options.tokenizer=this.options.tokenizer||new ao,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:G.normal,inline:N.normal};this.options.pedantic?(n.block=G.pedantic,n.inline=N.pedantic):this.options.gfm&&(n.block=G.gfm,this.options.breaks?n.inline=N.breaks:n.inline=N.gfm),this.tokenizer.rules=n}static get rules(){return{block:G,inline:N}}static lex(t,n){return new dn(n).lex(t)}static lexInline(t,n){return new dn(n).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);let n;for(;n=this.inlineQueue.shift();)this.inlineTokens(n.src,n.tokens);return this.tokens}blockTokens(t,n=[]){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(o,l,h)=>l+"    ".repeat(h.length));let i,s,r,a;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(o=>(i=o.call({lexer:this},t,n))?(t=t.substring(i.raw.length),n.push(i),!0):!1))){if(i=this.tokenizer.space(t)){t=t.substring(i.raw.length),i.raw.length===1&&n.length>0?n[n.length-1].raw+=`
`:n.push(i);continue}if(i=this.tokenizer.code(t)){t=t.substring(i.raw.length),s=n[n.length-1],s&&(s.type==="paragraph"||s.type==="text")?(s.raw+=`
`+i.raw,s.text+=`
`+i.text,this.inlineQueue[this.inlineQueue.length-1].src=s.text):n.push(i);continue}if(i=this.tokenizer.fences(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.heading(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.hr(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.blockquote(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.list(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.html(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.def(t)){t=t.substring(i.raw.length),s=n[n.length-1],s&&(s.type==="paragraph"||s.type==="text")?(s.raw+=`
`+i.raw,s.text+=`
`+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=s.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});continue}if(i=this.tokenizer.table(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.lheading(t)){t=t.substring(i.raw.length),n.push(i);continue}if(r=t,this.options.extensions&&this.options.extensions.startBlock){let o=1/0;const l=t.slice(1);let h;this.options.extensions.startBlock.forEach(function(u){h=u.call({lexer:this},l),typeof h=="number"&&h>=0&&(o=Math.min(o,h))}),o<1/0&&o>=0&&(r=t.substring(0,o+1))}if(this.state.top&&(i=this.tokenizer.paragraph(r))){s=n[n.length-1],a&&s.type==="paragraph"?(s.raw+=`
`+i.raw,s.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):n.push(i),a=r.length!==t.length,t=t.substring(i.raw.length);continue}if(i=this.tokenizer.text(t)){t=t.substring(i.raw.length),s=n[n.length-1],s&&s.type==="text"?(s.raw+=`
`+i.raw,s.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):n.push(i);continue}if(t){const o="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){let i,s,r,a=t,o,l,h;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(o=this.tokenizer.rules.inline.reflinkSearch.exec(a))!=null;)u.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(a=a.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(o=this.tokenizer.rules.inline.blockSkip.exec(a))!=null;)a=a.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(o=this.tokenizer.rules.inline.escapedPunct.exec(a))!=null;)a=a.slice(0,o.index)+"++"+a.slice(this.tokenizer.rules.inline.escapedPunct.lastIndex);for(;t;)if(l||(h=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(i=u.call({lexer:this},t,n))?(t=t.substring(i.raw.length),n.push(i),!0):!1))){if(i=this.tokenizer.escape(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.tag(t)){t=t.substring(i.raw.length),s=n[n.length-1],s&&i.type==="text"&&s.type==="text"?(s.raw+=i.raw,s.text+=i.text):n.push(i);continue}if(i=this.tokenizer.link(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(i.raw.length),s=n[n.length-1],s&&i.type==="text"&&s.type==="text"?(s.raw+=i.raw,s.text+=i.text):n.push(i);continue}if(i=this.tokenizer.emStrong(t,a,h)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.codespan(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.br(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.del(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.autolink(t,_l)){t=t.substring(i.raw.length),n.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(t,_l))){t=t.substring(i.raw.length),n.push(i);continue}if(r=t,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const c=t.slice(1);let d;this.options.extensions.startInline.forEach(function(f){d=f.call({lexer:this},c),typeof d=="number"&&d>=0&&(u=Math.min(u,d))}),u<1/0&&u>=0&&(r=t.substring(0,u+1))}if(i=this.tokenizer.inlineText(r,ef)){t=t.substring(i.raw.length),i.raw.slice(-1)!=="_"&&(h=i.raw.slice(-1)),l=!0,s=n[n.length-1],s&&s.type==="text"?(s.raw+=i.raw,s.text+=i.text):n.push(i);continue}if(t){const u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return n}}class oo{constructor(t){this.options=t||Bn}code(t,n,i){const s=(n||"").match(/\S*/)[0];if(this.options.highlight){const r=this.options.highlight(t,s);r!=null&&r!==t&&(i=!0,t=r)}return t=t.replace(/\n$/,"")+`
`,s?'<pre><code class="'+this.options.langPrefix+Vt(s)+'">'+(i?t:Vt(t,!0))+`</code></pre>
`:"<pre><code>"+(i?t:Vt(t,!0))+`</code></pre>
`}blockquote(t){return`<blockquote>
${t}</blockquote>
`}html(t,n){return t}heading(t,n,i,s){if(this.options.headerIds){const r=this.options.headerPrefix+s.slug(i);return`<h${n} id="${r}">${t}</h${n}>
`}return`<h${n}>${t}</h${n}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(t,n,i){const s=n?"ol":"ul",r=n&&i!==1?' start="'+i+'"':"";return"<"+s+r+`>
`+t+"</"+s+`>
`}listitem(t){return`<li>${t}</li>
`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(t){return`<p>${t}</p>
`}table(t,n){return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+n+`</table>
`}tablerow(t){return`<tr>
${t}</tr>
`}tablecell(t,n){const i=n.header?"th":"td";return(n.align?`<${i} align="${n.align}">`:`<${i}>`)+t+`</${i}>
`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(t){return`<del>${t}</del>`}link(t,n,i){if(t=gl(this.options.sanitize,this.options.baseUrl,t),t===null)return i;let s='<a href="'+t+'"';return n&&(s+=' title="'+n+'"'),s+=">"+i+"</a>",s}image(t,n,i){if(t=gl(this.options.sanitize,this.options.baseUrl,t),t===null)return i;let s=`<img src="${t}" alt="${i}"`;return n&&(s+=` title="${n}"`),s+=this.options.xhtml?"/>":">",s}text(t){return t}}class gu{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,n,i){return""+i}image(t,n,i){return""+i}br(){return""}}class mu{constructor(){this.seen={}}serialize(t){return t.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(t,n){let i=t,s=0;if(this.seen.hasOwnProperty(i)){s=this.seen[t];do s++,i=t+"-"+s;while(this.seen.hasOwnProperty(i))}return n||(this.seen[t]=s,this.seen[i]=0),i}slug(t,n={}){const i=this.serialize(t);return this.getNextSafeSlug(i,n.dryrun)}}let ds=class Fa{constructor(t){this.options=t||Bn,this.options.renderer=this.options.renderer||new oo,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new gu,this.slugger=new mu}static parse(t,n){return new Fa(n).parse(t)}static parseInline(t,n){return new Fa(n).parseInline(t)}parse(t,n=!0){let i="",s,r,a,o,l,h,u,c,d,f,g,m,_,v,E,M,x,w,S;const Y=t.length;for(s=0;s<Y;s++){if(f=t[s],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[f.type]&&(S=this.options.extensions.renderers[f.type].call({parser:this},f),S!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(f.type))){i+=S||"";continue}switch(f.type){case"space":continue;case"hr":{i+=this.renderer.hr();continue}case"heading":{i+=this.renderer.heading(this.parseInline(f.tokens),f.depth,fu(this.parseInline(f.tokens,this.textRenderer)),this.slugger);continue}case"code":{i+=this.renderer.code(f.text,f.lang,f.escaped);continue}case"table":{for(c="",u="",o=f.header.length,r=0;r<o;r++)u+=this.renderer.tablecell(this.parseInline(f.header[r].tokens),{header:!0,align:f.align[r]});for(c+=this.renderer.tablerow(u),d="",o=f.rows.length,r=0;r<o;r++){for(h=f.rows[r],u="",l=h.length,a=0;a<l;a++)u+=this.renderer.tablecell(this.parseInline(h[a].tokens),{header:!1,align:f.align[a]});d+=this.renderer.tablerow(u)}i+=this.renderer.table(c,d);continue}case"blockquote":{d=this.parse(f.tokens),i+=this.renderer.blockquote(d);continue}case"list":{for(g=f.ordered,m=f.start,_=f.loose,o=f.items.length,d="",r=0;r<o;r++)E=f.items[r],M=E.checked,x=E.task,v="",E.task&&(w=this.renderer.checkbox(M),_?E.tokens.length>0&&E.tokens[0].type==="paragraph"?(E.tokens[0].text=w+" "+E.tokens[0].text,E.tokens[0].tokens&&E.tokens[0].tokens.length>0&&E.tokens[0].tokens[0].type==="text"&&(E.tokens[0].tokens[0].text=w+" "+E.tokens[0].tokens[0].text)):E.tokens.unshift({type:"text",text:w}):v+=w),v+=this.parse(E.tokens,_),d+=this.renderer.listitem(v,x,M);i+=this.renderer.list(d,g,m);continue}case"html":{i+=this.renderer.html(f.text,f.block);continue}case"paragraph":{i+=this.renderer.paragraph(this.parseInline(f.tokens));continue}case"text":{for(d=f.tokens?this.parseInline(f.tokens):f.text;s+1<Y&&t[s+1].type==="text";)f=t[++s],d+=`
`+(f.tokens?this.parseInline(f.tokens):f.text);i+=n?this.renderer.paragraph(d):d;continue}default:{const W='Token with "'+f.type+'" type was not found.';if(this.options.silent){console.error(W);return}else throw new Error(W)}}}return i}parseInline(t,n){n=n||this.renderer;let i="",s,r,a;const o=t.length;for(s=0;s<o;s++){if(r=t[s],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]&&(a=this.options.extensions.renderers[r.type].call({parser:this},r),a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type))){i+=a||"";continue}switch(r.type){case"escape":{i+=n.text(r.text);break}case"html":{i+=n.html(r.text);break}case"link":{i+=n.link(r.href,r.title,this.parseInline(r.tokens,n));break}case"image":{i+=n.image(r.href,r.title,r.text);break}case"strong":{i+=n.strong(this.parseInline(r.tokens,n));break}case"em":{i+=n.em(this.parseInline(r.tokens,n));break}case"codespan":{i+=n.codespan(r.text);break}case"br":{i+=n.br();break}case"del":{i+=n.del(this.parseInline(r.tokens,n));break}case"text":{i+=n.text(r.text);break}default:{const l='Token with "'+r.type+'" type was not found.';if(this.options.silent){console.error(l);return}else throw new Error(l)}}}return i}};class ir{constructor(t){this.options=t||Bn}preprocess(t){return t}postprocess(t){return t}}dl(ir,"passThroughHooks",new Set(["preprocess","postprocess"]));function nf(e,t,n){return i=>{if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const s="<p>An error occurred:</p><pre>"+Vt(i.message+"",!0)+"</pre>";if(t)return Promise.resolve(s);if(n){n(null,s);return}return s}if(t)return Promise.reject(i);if(n){n(i);return}throw i}}function pu(e,t){return(n,i,s)=>{typeof i=="function"&&(s=i,i=null);const r={...i};i={...q.defaults,...r};const a=nf(i.silent,i.async,s);if(typeof n>"u"||n===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(Jd(i,s),i.hooks&&(i.hooks.options=i),s){const o=i.highlight;let l;try{i.hooks&&(n=i.hooks.preprocess(n)),l=e(n,i)}catch(c){return a(c)}const h=function(c){let d;if(!c)try{i.walkTokens&&q.walkTokens(l,i.walkTokens),d=t(l,i),i.hooks&&(d=i.hooks.postprocess(d))}catch(f){c=f}return i.highlight=o,c?a(c):s(null,d)};if(!o||o.length<3||(delete i.highlight,!l.length))return h();let u=0;q.walkTokens(l,function(c){c.type==="code"&&(u++,setTimeout(()=>{o(c.text,c.lang,function(d,f){if(d)return h(d);f!=null&&f!==c.text&&(c.text=f,c.escaped=!0),u--,u===0&&h()})},0))}),u===0&&h();return}if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(n):n).then(o=>e(o,i)).then(o=>i.walkTokens?Promise.all(q.walkTokens(o,i.walkTokens)).then(()=>o):o).then(o=>t(o,i)).then(o=>i.hooks?i.hooks.postprocess(o):o).catch(a);try{i.hooks&&(n=i.hooks.preprocess(n));const o=e(n,i);i.walkTokens&&q.walkTokens(o,i.walkTokens);let l=t(o,i);return i.hooks&&(l=i.hooks.postprocess(l)),l}catch(o){return a(o)}}}function q(e,t,n){return pu(dn.lex,ds.parse)(e,t,n)}q.options=q.setOptions=function(e){return q.defaults={...q.defaults,...e},zd(q.defaults),q};q.getDefaults=uu;q.defaults=Bn;q.use=function(...e){const t=q.defaults.extensions||{renderers:{},childTokens:{}};e.forEach(n=>{const i={...n};if(i.async=q.defaults.async||i.async||!1,n.extensions&&(n.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if(s.renderer){const r=t.renderers[s.name];r?t.renderers[s.name]=function(...a){let o=s.renderer.apply(this,a);return o===!1&&(o=r.apply(this,a)),o}:t.renderers[s.name]=s.renderer}if(s.tokenizer){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");t[s.level]?t[s.level].unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&(s.level==="block"?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:s.level==="inline"&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}s.childTokens&&(t.childTokens[s.name]=s.childTokens)}),i.extensions=t),n.renderer){const s=q.defaults.renderer||new oo;for(const r in n.renderer){const a=s[r];s[r]=(...o)=>{let l=n.renderer[r].apply(s,o);return l===!1&&(l=a.apply(s,o)),l}}i.renderer=s}if(n.tokenizer){const s=q.defaults.tokenizer||new ao;for(const r in n.tokenizer){const a=s[r];s[r]=(...o)=>{let l=n.tokenizer[r].apply(s,o);return l===!1&&(l=a.apply(s,o)),l}}i.tokenizer=s}if(n.hooks){const s=q.defaults.hooks||new ir;for(const r in n.hooks){const a=s[r];ir.passThroughHooks.has(r)?s[r]=o=>{if(q.defaults.async)return Promise.resolve(n.hooks[r].call(s,o)).then(h=>a.call(s,h));const l=n.hooks[r].call(s,o);return a.call(s,l)}:s[r]=(...o)=>{let l=n.hooks[r].apply(s,o);return l===!1&&(l=a.apply(s,o)),l}}i.hooks=s}if(n.walkTokens){const s=q.defaults.walkTokens;i.walkTokens=function(r){let a=[];return a.push(n.walkTokens.call(this,r)),s&&(a=a.concat(s.call(this,r))),a}}q.setOptions(i)})};q.walkTokens=function(e,t){let n=[];for(const i of e)switch(n=n.concat(t.call(q,i)),i.type){case"table":{for(const s of i.header)n=n.concat(q.walkTokens(s.tokens,t));for(const s of i.rows)for(const r of s)n=n.concat(q.walkTokens(r.tokens,t));break}case"list":{n=n.concat(q.walkTokens(i.items,t));break}default:q.defaults.extensions&&q.defaults.extensions.childTokens&&q.defaults.extensions.childTokens[i.type]?q.defaults.extensions.childTokens[i.type].forEach(function(s){n=n.concat(q.walkTokens(i[s],t))}):i.tokens&&(n=n.concat(q.walkTokens(i.tokens,t)))}return n};q.parseInline=pu(dn.lexInline,ds.parseInline);q.Parser=ds;q.parser=ds.parse;q.Renderer=oo;q.TextRenderer=gu;q.Lexer=dn;q.lexer=dn.lex;q.Tokenizer=ao;q.Slugger=mu;q.Hooks=ir;q.parse=q;q.options;q.setOptions;q.use;q.walkTokens;const Tn=q.parseInline,sf=q;ds.parse;dn.lex;function rf(){return{mangle:!1,walkTokens(e){if(e.type!=="link"||!e.href.startsWith("mailto:"))return;const t=e.href.substring(7),n=af(t);e.href=`mailto:${n}`,!(e.tokens.length!==1||e.tokens[0].type!=="text"||e.tokens[0].text!==t)&&(e.text=n,e.tokens[0].text=n)}}}function af(e){let t="",n,i;const s=e.length;for(n=0;n<s;n++)i=e.charCodeAt(n),Math.random()>.5&&(i="x"+i.toString(16)),t+="&#"+i+";";return t}function lo(e,t){const n=Object.create(null),i=e.split(",");for(let s=0;s<i.length;s++)n[i[s]]=!0;return t?s=>!!n[s.toLowerCase()]:s=>!!n[s]}const bt={},li=[],Ie=()=>{},of=()=>!1,lf=/^on[^a-z]/,Fr=e=>lf.test(e),ho=e=>e.startsWith("onUpdate:"),ee=Object.assign,uo=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},hf=Object.prototype.hasOwnProperty,rt=(e,t)=>hf.call(e,t),V=Array.isArray,hi=e=>fs(e)==="[object Map]",Ar=e=>fs(e)==="[object Set]",yl=e=>fs(e)==="[object Date]",J=e=>typeof e=="function",$t=e=>typeof e=="string",Ei=e=>typeof e=="symbol",Ct=e=>e!==null&&typeof e=="object",_u=e=>(Ct(e)||J(e))&&J(e.then)&&J(e.catch),yu=Object.prototype.toString,fs=e=>yu.call(e),uf=e=>fs(e).slice(8,-1),vu=e=>fs(e)==="[object Object]",co=e=>$t(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Xs=lo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Rr=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},cf=/-(\w)/g,Ge=Rr(e=>e.replace(cf,(t,n)=>n?n.toUpperCase():"")),df=/\B([A-Z])/g,Ri=Rr(e=>e.replace(df,"-$1").toLowerCase()),Ir=Rr(e=>e.charAt(0).toUpperCase()+e.slice(1)),oa=Rr(e=>e?`on${Ir(e)}`:""),xi=(e,t)=>!Object.is(e,t),Ks=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},sr=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},rr=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let vl;const Aa=()=>vl||(vl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function fo(e){if(V(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],s=$t(i)?pf(i):fo(i);if(s)for(const r in s)t[r]=s[r]}return t}else if($t(e)||Ct(e))return e}const ff=/;(?![^(]*\))/g,gf=/:([^]+)/,mf=/\/\*[^]*?\*\//g;function pf(e){const t={};return e.replace(mf,"").split(ff).forEach(n=>{if(n){const i=n.split(gf);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function bi(e){let t="";if($t(e))t=e;else if(V(e))for(let n=0;n<e.length;n++){const i=bi(e[n]);i&&(t+=i+" ")}else if(Ct(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const _f="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",yf=lo(_f);function Eu(e){return!!e||e===""}function vf(e,t){if(e.length!==t.length)return!1;let n=!0;for(let i=0;n&&i<e.length;i++)n=Sr(e[i],t[i]);return n}function Sr(e,t){if(e===t)return!0;let n=yl(e),i=yl(t);if(n||i)return n&&i?e.getTime()===t.getTime():!1;if(n=Ei(e),i=Ei(t),n||i)return e===t;if(n=V(e),i=V(t),n||i)return n&&i?vf(e,t):!1;if(n=Ct(e),i=Ct(t),n||i){if(!n||!i)return!1;const s=Object.keys(e).length,r=Object.keys(t).length;if(s!==r)return!1;for(const a in e){const o=e.hasOwnProperty(a),l=t.hasOwnProperty(a);if(o&&!l||!o&&l||!Sr(e[a],t[a]))return!1}}return String(e)===String(t)}function Ef(e,t){return e.findIndex(n=>Sr(n,t))}const Ft=e=>$t(e)?e:e==null?"":V(e)||Ct(e)&&(e.toString===yu||!J(e.toString))?JSON.stringify(e,xu,2):String(e),xu=(e,t)=>t&&t.__v_isRef?xu(e,t.value):hi(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[i,s])=>(n[`${i} =>`]=s,n),{})}:Ar(t)?{[`Set(${t.size})`]:[...t.values()]}:Ct(t)&&!V(t)&&!vu(t)?String(t):t;let Fe;class xf{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Fe,!t&&Fe&&(this.index=(Fe.scopes||(Fe.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=Fe;try{return Fe=this,t()}finally{Fe=n}}}on(){Fe=this}off(){Fe=this.parent}stop(t){if(this._active){let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function bf(e,t=Fe){t&&t.active&&t.effects.push(e)}function Mf(){return Fe}const go=e=>{const t=new Set(e);return t.w=0,t.n=0,t},bu=e=>(e.w&fn)>0,Mu=e=>(e.n&fn)>0,Cf=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=fn},wf=e=>{const{deps:t}=e;if(t.length){let n=0;for(let i=0;i<t.length;i++){const s=t[i];bu(s)&&!Mu(s)?s.delete(e):t[n++]=s,s.w&=~fn,s.n&=~fn}t.length=n}},Ra=new WeakMap;let ji=0,fn=1;const Ia=30;let Ae;const Pn=Symbol(""),Sa=Symbol("");class mo{constructor(t,n=null,i){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,bf(this,i)}run(){if(!this.active)return this.fn();let t=Ae,n=ln;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Ae,Ae=this,ln=!0,fn=1<<++ji,ji<=Ia?Cf(this):El(this),this.fn()}finally{ji<=Ia&&wf(this),fn=1<<--ji,Ae=this.parent,ln=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Ae===this?this.deferStop=!0:this.active&&(El(this),this.onStop&&this.onStop(),this.active=!1)}}function El(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let ln=!0;const Cu=[];function Ii(){Cu.push(ln),ln=!1}function Si(){const e=Cu.pop();ln=e===void 0?!0:e}function ge(e,t,n){if(ln&&Ae){let i=Ra.get(e);i||Ra.set(e,i=new Map);let s=i.get(n);s||i.set(n,s=go()),wu(s)}}function wu(e,t){let n=!1;ji<=Ia?Mu(e)||(e.n|=fn,n=!bu(e)):n=!e.has(Ae),n&&(e.add(Ae),Ae.deps.push(e))}function He(e,t,n,i,s,r){const a=Ra.get(e);if(!a)return;let o=[];if(t==="clear")o=[...a.values()];else if(n==="length"&&V(e)){const l=Number(i);a.forEach((h,u)=>{(u==="length"||!Ei(u)&&u>=l)&&o.push(h)})}else switch(n!==void 0&&o.push(a.get(n)),t){case"add":V(e)?co(n)&&o.push(a.get("length")):(o.push(a.get(Pn)),hi(e)&&o.push(a.get(Sa)));break;case"delete":V(e)||(o.push(a.get(Pn)),hi(e)&&o.push(a.get(Sa)));break;case"set":hi(e)&&o.push(a.get(Pn));break}if(o.length===1)o[0]&&Pa(o[0]);else{const l=[];for(const h of o)h&&l.push(...h);Pa(go(l))}}function Pa(e,t){const n=V(e)?e:[...e];for(const i of n)i.computed&&xl(i);for(const i of n)i.computed||xl(i)}function xl(e,t){(e!==Ae||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const Df=lo("__proto__,__v_isRef,__isVue"),Du=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ei)),bl=Tf();function Tf(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const i=gt(this);for(let r=0,a=this.length;r<a;r++)ge(i,"get",r+"");const s=i[t](...n);return s===-1||s===!1?i[t](...n.map(gt)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Ii();const i=gt(this)[t].apply(this,n);return Si(),i}}),e}function Ff(e){const t=gt(this);return ge(t,"has",e),t.hasOwnProperty(e)}class Tu{constructor(t=!1,n=!1){this._isReadonly=t,this._shallow=n}get(t,n,i){const s=this._isReadonly,r=this._shallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return r;if(n==="__v_raw"&&i===(s?r?Uf:Iu:r?Ru:Au).get(t))return t;const a=V(t);if(!s){if(a&&rt(bl,n))return Reflect.get(bl,n,i);if(n==="hasOwnProperty")return Ff}const o=Reflect.get(t,n,i);return(Ei(n)?Du.has(n):Df(n))||(s||ge(t,"get",n),r)?o:ae(o)?a&&co(n)?o:o.value:Ct(o)?s?Su(o):yo(o):o}}class Fu extends Tu{constructor(t=!1){super(!1,t)}set(t,n,i,s){let r=t[n];if(Ji(r)&&ae(r)&&!ae(i))return!1;if(!this._shallow&&(!La(i)&&!Ji(i)&&(r=gt(r),i=gt(i)),!V(t)&&ae(r)&&!ae(i)))return r.value=i,!0;const a=V(t)&&co(n)?Number(n)<t.length:rt(t,n),o=Reflect.set(t,n,i,s);return t===gt(s)&&(a?xi(i,r)&&He(t,"set",n,i):He(t,"add",n,i)),o}deleteProperty(t,n){const i=rt(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&i&&He(t,"delete",n,void 0),s}has(t,n){const i=Reflect.has(t,n);return(!Ei(n)||!Du.has(n))&&ge(t,"has",n),i}ownKeys(t){return ge(t,"iterate",V(t)?"length":Pn),Reflect.ownKeys(t)}}class Af extends Tu{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Rf=new Fu,If=new Af,Sf=new Fu(!0),po=e=>e,Pr=e=>Reflect.getPrototypeOf(e);function Ds(e,t,n=!1,i=!1){e=e.__v_raw;const s=gt(e),r=gt(t);n||(xi(t,r)&&ge(s,"get",t),ge(s,"get",r));const{has:a}=Pr(s),o=i?po:n?xo:Eo;if(a.call(s,t))return o(e.get(t));if(a.call(s,r))return o(e.get(r));e!==s&&e.get(t)}function Ts(e,t=!1){const n=this.__v_raw,i=gt(n),s=gt(e);return t||(xi(e,s)&&ge(i,"has",e),ge(i,"has",s)),e===s?n.has(e):n.has(e)||n.has(s)}function Fs(e,t=!1){return e=e.__v_raw,!t&&ge(gt(e),"iterate",Pn),Reflect.get(e,"size",e)}function Ml(e){e=gt(e);const t=gt(this);return Pr(t).has.call(t,e)||(t.add(e),He(t,"add",e,e)),this}function Cl(e,t){t=gt(t);const n=gt(this),{has:i,get:s}=Pr(n);let r=i.call(n,e);r||(e=gt(e),r=i.call(n,e));const a=s.call(n,e);return n.set(e,t),r?xi(t,a)&&He(n,"set",e,t):He(n,"add",e,t),this}function wl(e){const t=gt(this),{has:n,get:i}=Pr(t);let s=n.call(t,e);s||(e=gt(e),s=n.call(t,e)),i&&i.call(t,e);const r=t.delete(e);return s&&He(t,"delete",e,void 0),r}function Dl(){const e=gt(this),t=e.size!==0,n=e.clear();return t&&He(e,"clear",void 0,void 0),n}function As(e,t){return function(i,s){const r=this,a=r.__v_raw,o=gt(a),l=t?po:e?xo:Eo;return!e&&ge(o,"iterate",Pn),a.forEach((h,u)=>i.call(s,l(h),l(u),r))}}function Rs(e,t,n){return function(...i){const s=this.__v_raw,r=gt(s),a=hi(r),o=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,h=s[e](...i),u=n?po:t?xo:Eo;return!t&&ge(r,"iterate",l?Sa:Pn),{next(){const{value:c,done:d}=h.next();return d?{value:c,done:d}:{value:o?[u(c[0]),u(c[1])]:u(c),done:d}},[Symbol.iterator](){return this}}}}function tn(e){return function(...t){return e==="delete"?!1:this}}function Pf(){const e={get(r){return Ds(this,r)},get size(){return Fs(this)},has:Ts,add:Ml,set:Cl,delete:wl,clear:Dl,forEach:As(!1,!1)},t={get(r){return Ds(this,r,!1,!0)},get size(){return Fs(this)},has:Ts,add:Ml,set:Cl,delete:wl,clear:Dl,forEach:As(!1,!0)},n={get(r){return Ds(this,r,!0)},get size(){return Fs(this,!0)},has(r){return Ts.call(this,r,!0)},add:tn("add"),set:tn("set"),delete:tn("delete"),clear:tn("clear"),forEach:As(!0,!1)},i={get(r){return Ds(this,r,!0,!0)},get size(){return Fs(this,!0)},has(r){return Ts.call(this,r,!0)},add:tn("add"),set:tn("set"),delete:tn("delete"),clear:tn("clear"),forEach:As(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{e[r]=Rs(r,!1,!1),n[r]=Rs(r,!0,!1),t[r]=Rs(r,!1,!0),i[r]=Rs(r,!0,!0)}),[e,n,t,i]}const[Lf,Of,kf,Nf]=Pf();function _o(e,t){const n=t?e?Nf:kf:e?Of:Lf;return(i,s,r)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?i:Reflect.get(rt(n,s)&&s in i?n:i,s,r)}const $f={get:_o(!1,!1)},Bf={get:_o(!1,!0)},zf={get:_o(!0,!1)},Au=new WeakMap,Ru=new WeakMap,Iu=new WeakMap,Uf=new WeakMap;function jf(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Gf(e){return e.__v_skip||!Object.isExtensible(e)?0:jf(uf(e))}function yo(e){return Ji(e)?e:vo(e,!1,Rf,$f,Au)}function Wf(e){return vo(e,!1,Sf,Bf,Ru)}function Su(e){return vo(e,!0,If,zf,Iu)}function vo(e,t,n,i,s){if(!Ct(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=s.get(e);if(r)return r;const a=Gf(e);if(a===0)return e;const o=new Proxy(e,a===2?i:n);return s.set(e,o),o}function ui(e){return Ji(e)?ui(e.__v_raw):!!(e&&e.__v_isReactive)}function Ji(e){return!!(e&&e.__v_isReadonly)}function La(e){return!!(e&&e.__v_isShallow)}function Pu(e){return ui(e)||Ji(e)}function gt(e){const t=e&&e.__v_raw;return t?gt(t):e}function Lu(e){return sr(e,"__v_skip",!0),e}const Eo=e=>Ct(e)?yo(e):e,xo=e=>Ct(e)?Su(e):e;function qf(e){ln&&Ae&&(e=gt(e),wu(e.dep||(e.dep=go())))}function Xf(e,t){e=gt(e);const n=e.dep;n&&Pa(n)}function ae(e){return!!(e&&e.__v_isRef===!0)}function Kf(e){return ae(e)?e.value:e}const Zf={get:(e,t,n)=>Kf(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const s=e[t];return ae(s)&&!ae(n)?(s.value=n,!0):Reflect.set(e,t,n,i)}};function Ou(e){return ui(e)?e:new Proxy(e,Zf)}class Vf{constructor(t,n,i,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new mo(t,()=>{this._dirty||(this._dirty=!0,Xf(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=i}get value(){const t=gt(this);return qf(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function Hf(e,t,n=!1){let i,s;const r=J(e);return r?(i=e,s=Ie):(i=e.get,s=e.set),new Vf(i,s,r||!s,n)}function hn(e,t,n,i){let s;try{s=i?e(...i):e()}catch(r){Lr(r,t,n)}return s}function Se(e,t,n,i){if(J(e)){const r=hn(e,t,n,i);return r&&_u(r)&&r.catch(a=>{Lr(a,t,n)}),r}const s=[];for(let r=0;r<e.length;r++)s.push(Se(e[r],t,n,i));return s}function Lr(e,t,n,i=!0){const s=t?t.vnode:null;if(t){let r=t.parent;const a=t.proxy,o=n;for(;r;){const h=r.ec;if(h){for(let u=0;u<h.length;u++)if(h[u](e,a,o)===!1)return}r=r.parent}const l=t.appContext.config.errorHandler;if(l){hn(l,null,10,[e,a,o]);return}}Yf(e,n,s,i)}function Yf(e,t,n,i=!0){console.error(e)}let ts=!1,Oa=!1;const Qt=[];let Be=0;const ci=[];let Ze=null,Fn=0;const ku=Promise.resolve();let bo=null;function Qf(e){const t=bo||ku;return e?t.then(this?e.bind(this):e):t}function Jf(e){let t=Be+1,n=Qt.length;for(;t<n;){const i=t+n>>>1,s=Qt[i],r=es(s);r<e||r===e&&s.pre?t=i+1:n=i}return t}function Mo(e){(!Qt.length||!Qt.includes(e,ts&&e.allowRecurse?Be+1:Be))&&(e.id==null?Qt.push(e):Qt.splice(Jf(e.id),0,e),Nu())}function Nu(){!ts&&!Oa&&(Oa=!0,bo=ku.then(Bu))}function t0(e){const t=Qt.indexOf(e);t>Be&&Qt.splice(t,1)}function e0(e){V(e)?ci.push(...e):(!Ze||!Ze.includes(e,e.allowRecurse?Fn+1:Fn))&&ci.push(e),Nu()}function Tl(e,t=ts?Be+1:0){for(;t<Qt.length;t++){const n=Qt[t];n&&n.pre&&(Qt.splice(t,1),t--,n())}}function $u(e){if(ci.length){const t=[...new Set(ci)];if(ci.length=0,Ze){Ze.push(...t);return}for(Ze=t,Ze.sort((n,i)=>es(n)-es(i)),Fn=0;Fn<Ze.length;Fn++)Ze[Fn]();Ze=null,Fn=0}}const es=e=>e.id==null?1/0:e.id,n0=(e,t)=>{const n=es(e)-es(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function Bu(e){Oa=!1,ts=!0,Qt.sort(n0);const t=Ie;try{for(Be=0;Be<Qt.length;Be++){const n=Qt[Be];n&&n.active!==!1&&hn(n,null,14)}}finally{Be=0,Qt.length=0,$u(),ts=!1,bo=null,(Qt.length||ci.length)&&Bu()}}function i0(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||bt;let s=n;const r=t.startsWith("update:"),a=r&&t.slice(7);if(a&&a in i){const u=`${a==="modelValue"?"model":a}Modifiers`,{number:c,trim:d}=i[u]||bt;d&&(s=n.map(f=>$t(f)?f.trim():f)),c&&(s=n.map(rr))}let o,l=i[o=oa(t)]||i[o=oa(Ge(t))];!l&&r&&(l=i[o=oa(Ri(t))]),l&&Se(l,e,6,s);const h=i[o+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[o])return;e.emitted[o]=!0,Se(h,e,6,s)}}function zu(e,t,n=!1){const i=t.emitsCache,s=i.get(e);if(s!==void 0)return s;const r=e.emits;let a={},o=!1;if(!J(e)){const l=h=>{const u=zu(h,t,!0);u&&(o=!0,ee(a,u))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!r&&!o?(Ct(e)&&i.set(e,null),null):(V(r)?r.forEach(l=>a[l]=null):ee(a,r),Ct(e)&&i.set(e,a),a)}function Or(e,t){return!e||!Fr(t)?!1:(t=t.slice(2).replace(/Once$/,""),rt(e,t[0].toLowerCase()+t.slice(1))||rt(e,Ri(t))||rt(e,t))}let Jt=null,kr=null;function ar(e){const t=Jt;return Jt=e,kr=e&&e.type.__scopeId||null,t}function Pi(e){kr=e}function Li(){kr=null}function Yt(e,t=Jt,n){if(!t||e._n)return e;const i=(...s)=>{i._d&&$l(-1);const r=ar(t);let a;try{a=e(...s)}finally{ar(r),i._d&&$l(1)}return a};return i._n=!0,i._c=!0,i._d=!0,i}function la(e){const{type:t,vnode:n,proxy:i,withProxy:s,props:r,propsOptions:[a],slots:o,attrs:l,emit:h,render:u,renderCache:c,data:d,setupState:f,ctx:g,inheritAttrs:m}=e;let _,v;const E=ar(e);try{if(n.shapeFlag&4){const x=s||i;_=$e(u.call(x,x,c,r,f,d,g)),v=l}else{const x=t;_=$e(x.length>1?x(r,{attrs:l,slots:o,emit:h}):x(r,null)),v=t.props?l:s0(l)}}catch(x){Vi.length=0,Lr(x,e,1),_=Z(mn)}let M=_;if(v&&m!==!1){const x=Object.keys(v),{shapeFlag:w}=M;x.length&&w&7&&(a&&x.some(ho)&&(v=r0(v,a)),M=Mi(M,v))}return n.dirs&&(M=Mi(M),M.dirs=M.dirs?M.dirs.concat(n.dirs):n.dirs),n.transition&&(M.transition=n.transition),_=M,ar(E),_}const s0=e=>{let t;for(const n in e)(n==="class"||n==="style"||Fr(n))&&((t||(t={}))[n]=e[n]);return t},r0=(e,t)=>{const n={};for(const i in e)(!ho(i)||!(i.slice(9)in t))&&(n[i]=e[i]);return n};function a0(e,t,n){const{props:i,children:s,component:r}=e,{props:a,children:o,patchFlag:l}=t,h=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return i?Fl(i,a,h):!!a;if(l&8){const u=t.dynamicProps;for(let c=0;c<u.length;c++){const d=u[c];if(a[d]!==i[d]&&!Or(h,d))return!0}}}else return(s||o)&&(!o||!o.$stable)?!0:i===a?!1:i?a?Fl(i,a,h):!0:!!a;return!1}function Fl(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let s=0;s<i.length;s++){const r=i[s];if(t[r]!==e[r]&&!Or(n,r))return!0}return!1}function o0({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const Uu="components";function it(e,t){return h0(Uu,e,!0,t)||e}const l0=Symbol.for("v-ndc");function h0(e,t,n=!0,i=!1){const s=Jt||qt;if(s){const r=s.type;if(e===Uu){const o=ng(r,!1);if(o&&(o===t||o===Ge(t)||o===Ir(Ge(t))))return r}const a=Al(s[e]||r[e],t)||Al(s.appContext[e],t);return!a&&i?r:a}}function Al(e,t){return e&&(e[t]||e[Ge(t)]||e[Ir(Ge(t))])}const u0=e=>e.__isSuspense;function c0(e,t){t&&t.pendingBranch?V(e)?t.effects.push(...e):t.effects.push(e):e0(e)}const Is={};function ha(e,t,n){return ju(e,t,n)}function ju(e,t,{immediate:n,deep:i,flush:s,onTrack:r,onTrigger:a}=bt){var o;const l=Mf()===((o=qt)==null?void 0:o.scope)?qt:null;let h,u=!1,c=!1;if(ae(e)?(h=()=>e.value,u=La(e)):ui(e)?(h=()=>e,i=!0):V(e)?(c=!0,u=e.some(x=>ui(x)||La(x)),h=()=>e.map(x=>{if(ae(x))return x.value;if(ui(x))return In(x);if(J(x))return hn(x,l,2)})):J(e)?t?h=()=>hn(e,l,2):h=()=>{if(!(l&&l.isUnmounted))return d&&d(),Se(e,l,3,[f])}:h=Ie,t&&i){const x=h;h=()=>In(x())}let d,f=x=>{d=E.onStop=()=>{hn(x,l,4)}},g;if(is)if(f=Ie,t?n&&Se(t,l,3,[h(),c?[]:void 0,f]):h(),s==="sync"){const x=ag();g=x.__watcherHandles||(x.__watcherHandles=[])}else return Ie;let m=c?new Array(e.length).fill(Is):Is;const _=()=>{if(E.active)if(t){const x=E.run();(i||u||(c?x.some((w,S)=>xi(w,m[S])):xi(x,m)))&&(d&&d(),Se(t,l,3,[x,m===Is?void 0:c&&m[0]===Is?[]:m,f]),m=x)}else E.run()};_.allowRecurse=!!t;let v;s==="sync"?v=_:s==="post"?v=()=>ce(_,l&&l.suspense):(_.pre=!0,l&&(_.id=l.uid),v=()=>Mo(_));const E=new mo(h,v);t?n?_():m=E.run():s==="post"?ce(E.run.bind(E),l&&l.suspense):E.run();const M=()=>{E.stop(),l&&l.scope&&uo(l.scope.effects,E)};return g&&g.push(M),M}function d0(e,t,n){const i=this.proxy,s=$t(e)?e.includes(".")?Gu(i,e):()=>i[e]:e.bind(i,i);let r;J(t)?r=t:(r=t.handler,n=t);const a=qt;Ci(this);const o=ju(s,r.bind(i),n);return a?Ci(a):On(),o}function Gu(e,t){const n=t.split(".");return()=>{let i=e;for(let s=0;s<n.length&&i;s++)i=i[n[s]];return i}}function In(e,t){if(!Ct(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),ae(e))In(e.value,t);else if(V(e))for(let n=0;n<e.length;n++)In(e[n],t);else if(Ar(e)||hi(e))e.forEach(n=>{In(n,t)});else if(vu(e))for(const n in e)In(e[n],t);return e}function gn(e,t){const n=Jt;if(n===null)return e;const i=zr(n)||n.proxy,s=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[a,o,l,h=bt]=t[r];a&&(J(a)&&(a={mounted:a,updated:a}),a.deep&&In(o),s.push({dir:a,instance:i,value:o,oldValue:void 0,arg:l,modifiers:h}))}return e}function xn(e,t,n,i){const s=e.dirs,r=t&&t.dirs;for(let a=0;a<s.length;a++){const o=s[a];r&&(o.oldValue=r[a].value);let l=o.dir[i];l&&(Ii(),Se(l,n,8,[e.el,o,e,t]),Si())}}const Ki=e=>!!e.type.__asyncLoader,Wu=e=>e.type.__isKeepAlive;function f0(e,t){qu(e,"a",t)}function g0(e,t){qu(e,"da",t)}function qu(e,t,n=qt){const i=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(Nr(t,i,n),n){let s=n.parent;for(;s&&s.parent;)Wu(s.parent.vnode)&&m0(i,t,n,s),s=s.parent}}function m0(e,t,n,i){const s=Nr(t,e,i,!0);Xu(()=>{uo(i[t],s)},n)}function Nr(e,t,n=qt,i=!1){if(n){const s=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...a)=>{if(n.isUnmounted)return;Ii(),Ci(n);const o=Se(t,n,e,a);return On(),Si(),o});return i?s.unshift(r):s.push(r),r}}const Ye=e=>(t,n=qt)=>(!is||e==="sp")&&Nr(e,(...i)=>t(...i),n),p0=Ye("bm"),_0=Ye("m"),y0=Ye("bu"),v0=Ye("u"),E0=Ye("bum"),Xu=Ye("um"),x0=Ye("sp"),b0=Ye("rtg"),M0=Ye("rtc");function C0(e,t=qt){Nr("ec",e,t)}function We(e,t,n,i){let s;const r=n&&n[i];if(V(e)||$t(e)){s=new Array(e.length);for(let a=0,o=e.length;a<o;a++)s[a]=t(e[a],a,void 0,r&&r[a])}else if(typeof e=="number"){s=new Array(e);for(let a=0;a<e;a++)s[a]=t(a+1,a,void 0,r&&r[a])}else if(Ct(e))if(e[Symbol.iterator])s=Array.from(e,(a,o)=>t(a,o,void 0,r&&r[o]));else{const a=Object.keys(e);s=new Array(a.length);for(let o=0,l=a.length;o<l;o++){const h=a[o];s[o]=t(e[h],h,o,r&&r[o])}}else s=[];return n&&(n[i]=s),s}function Ln(e,t,n={},i,s){if(Jt.isCE||Jt.parent&&Ki(Jt.parent)&&Jt.parent.isCE)return t!=="default"&&(n.name=t),Z("slot",n,i&&i());let r=e[t];r&&r._c&&(r._d=!1),L();const a=r&&Ku(r(n)),o=fe(Tt,{key:n.key||a&&a.key||`_${t}`},a||(i?i():[]),a&&e._===1?64:-2);return!s&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),r&&r._c&&(r._d=!0),o}function Ku(e){return e.some(t=>ic(t)?!(t.type===mn||t.type===Tt&&!Ku(t.children)):!0)?e:null}const ka=e=>e?rc(e)?zr(e)||e.proxy:ka(e.parent):null,Zi=ee(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ka(e.parent),$root:e=>ka(e.root),$emit:e=>e.emit,$options:e=>Co(e),$forceUpdate:e=>e.f||(e.f=()=>Mo(e.update)),$nextTick:e=>e.n||(e.n=Qf.bind(e.proxy)),$watch:e=>d0.bind(e)}),ua=(e,t)=>e!==bt&&!e.__isScriptSetup&&rt(e,t),w0={get({_:e},t){const{ctx:n,setupState:i,data:s,props:r,accessCache:a,type:o,appContext:l}=e;let h;if(t[0]!=="$"){const f=a[t];if(f!==void 0)switch(f){case 1:return i[t];case 2:return s[t];case 4:return n[t];case 3:return r[t]}else{if(ua(i,t))return a[t]=1,i[t];if(s!==bt&&rt(s,t))return a[t]=2,s[t];if((h=e.propsOptions[0])&&rt(h,t))return a[t]=3,r[t];if(n!==bt&&rt(n,t))return a[t]=4,n[t];Na&&(a[t]=0)}}const u=Zi[t];let c,d;if(u)return t==="$attrs"&&ge(e,"get",t),u(e);if((c=o.__cssModules)&&(c=c[t]))return c;if(n!==bt&&rt(n,t))return a[t]=4,n[t];if(d=l.config.globalProperties,rt(d,t))return d[t]},set({_:e},t,n){const{data:i,setupState:s,ctx:r}=e;return ua(s,t)?(s[t]=n,!0):i!==bt&&rt(i,t)?(i[t]=n,!0):rt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:s,propsOptions:r}},a){let o;return!!n[a]||e!==bt&&rt(e,a)||ua(t,a)||(o=r[0])&&rt(o,a)||rt(i,a)||rt(Zi,a)||rt(s.config.globalProperties,a)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:rt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Rl(e){return V(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Na=!0;function D0(e){const t=Co(e),n=e.proxy,i=e.ctx;Na=!1,t.beforeCreate&&Il(t.beforeCreate,e,"bc");const{data:s,computed:r,methods:a,watch:o,provide:l,inject:h,created:u,beforeMount:c,mounted:d,beforeUpdate:f,updated:g,activated:m,deactivated:_,beforeDestroy:v,beforeUnmount:E,destroyed:M,unmounted:x,render:w,renderTracked:S,renderTriggered:Y,errorCaptured:W,serverPrefetch:st,expose:at,inheritAttrs:yt,components:Xt,directives:ne,filters:De}=t;if(h&&T0(h,i,null),a)for(const H in a){const et=a[H];J(et)&&(i[H]=et.bind(n))}if(s){const H=s.call(n,n);Ct(H)&&(e.data=yo(H))}if(Na=!0,r)for(const H in r){const et=r[H],Ut=J(et)?et.bind(n,n):J(et.get)?et.get.bind(n,n):Ie,ie=!J(et)&&J(et.set)?et.set.bind(n):Ie,pe=sg({get:Ut,set:ie});Object.defineProperty(i,H,{enumerable:!0,configurable:!0,get:()=>pe.value,set:_t=>pe.value=_t})}if(o)for(const H in o)Zu(o[H],i,n,H);if(l){const H=J(l)?l.call(n):l;Reflect.ownKeys(H).forEach(et=>{P0(et,H[et])})}u&&Il(u,e,"c");function vt(H,et){V(et)?et.forEach(Ut=>H(Ut.bind(n))):et&&H(et.bind(n))}if(vt(p0,c),vt(_0,d),vt(y0,f),vt(v0,g),vt(f0,m),vt(g0,_),vt(C0,W),vt(M0,S),vt(b0,Y),vt(E0,E),vt(Xu,x),vt(x0,st),V(at))if(at.length){const H=e.exposed||(e.exposed={});at.forEach(et=>{Object.defineProperty(H,et,{get:()=>n[et],set:Ut=>n[et]=Ut})})}else e.exposed||(e.exposed={});w&&e.render===Ie&&(e.render=w),yt!=null&&(e.inheritAttrs=yt),Xt&&(e.components=Xt),ne&&(e.directives=ne)}function T0(e,t,n=Ie){V(e)&&(e=$a(e));for(const i in e){const s=e[i];let r;Ct(s)?"default"in s?r=Zs(s.from||i,s.default,!0):r=Zs(s.from||i):r=Zs(s),ae(r)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:a=>r.value=a}):t[i]=r}}function Il(e,t,n){Se(V(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,n)}function Zu(e,t,n,i){const s=i.includes(".")?Gu(n,i):()=>n[i];if($t(e)){const r=t[e];J(r)&&ha(s,r)}else if(J(e))ha(s,e.bind(n));else if(Ct(e))if(V(e))e.forEach(r=>Zu(r,t,n,i));else{const r=J(e.handler)?e.handler.bind(n):t[e.handler];J(r)&&ha(s,r,e)}}function Co(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:s,optionsCache:r,config:{optionMergeStrategies:a}}=e.appContext,o=r.get(t);let l;return o?l=o:!s.length&&!n&&!i?l=t:(l={},s.length&&s.forEach(h=>or(l,h,a,!0)),or(l,t,a)),Ct(t)&&r.set(t,l),l}function or(e,t,n,i=!1){const{mixins:s,extends:r}=t;r&&or(e,r,n,!0),s&&s.forEach(a=>or(e,a,n,!0));for(const a in t)if(!(i&&a==="expose")){const o=F0[a]||n&&n[a];e[a]=o?o(e[a],t[a]):t[a]}return e}const F0={data:Sl,props:Pl,emits:Pl,methods:Gi,computed:Gi,beforeCreate:se,created:se,beforeMount:se,mounted:se,beforeUpdate:se,updated:se,beforeDestroy:se,beforeUnmount:se,destroyed:se,unmounted:se,activated:se,deactivated:se,errorCaptured:se,serverPrefetch:se,components:Gi,directives:Gi,watch:R0,provide:Sl,inject:A0};function Sl(e,t){return t?e?function(){return ee(J(e)?e.call(this,this):e,J(t)?t.call(this,this):t)}:t:e}function A0(e,t){return Gi($a(e),$a(t))}function $a(e){if(V(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function se(e,t){return e?[...new Set([].concat(e,t))]:t}function Gi(e,t){return e?ee(Object.create(null),e,t):t}function Pl(e,t){return e?V(e)&&V(t)?[...new Set([...e,...t])]:ee(Object.create(null),Rl(e),Rl(t??{})):t}function R0(e,t){if(!e)return t;if(!t)return e;const n=ee(Object.create(null),e);for(const i in t)n[i]=se(e[i],t[i]);return n}function Vu(){return{app:null,config:{isNativeTag:of,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let I0=0;function S0(e,t){return function(i,s=null){J(i)||(i=ee({},i)),s!=null&&!Ct(s)&&(s=null);const r=Vu(),a=new WeakSet;let o=!1;const l=r.app={_uid:I0++,_component:i,_props:s,_container:null,_context:r,_instance:null,version:og,get config(){return r.config},set config(h){},use(h,...u){return a.has(h)||(h&&J(h.install)?(a.add(h),h.install(l,...u)):J(h)&&(a.add(h),h(l,...u))),l},mixin(h){return r.mixins.includes(h)||r.mixins.push(h),l},component(h,u){return u?(r.components[h]=u,l):r.components[h]},directive(h,u){return u?(r.directives[h]=u,l):r.directives[h]},mount(h,u,c){if(!o){const d=Z(i,s);return d.appContext=r,u&&t?t(d,h):e(d,h,c),o=!0,l._container=h,h.__vue_app__=l,zr(d.component)||d.component.proxy}},unmount(){o&&(e(null,l._container),delete l._container.__vue_app__)},provide(h,u){return r.provides[h]=u,l},runWithContext(h){lr=l;try{return h()}finally{lr=null}}};return l}}let lr=null;function P0(e,t){if(qt){let n=qt.provides;const i=qt.parent&&qt.parent.provides;i===n&&(n=qt.provides=Object.create(i)),n[e]=t}}function Zs(e,t,n=!1){const i=qt||Jt;if(i||lr){const s=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:lr._context.provides;if(s&&e in s)return s[e];if(arguments.length>1)return n&&J(t)?t.call(i&&i.proxy):t}}function L0(e,t,n,i=!1){const s={},r={};sr(r,Br,1),e.propsDefaults=Object.create(null),Hu(e,t,s,r);for(const a in e.propsOptions[0])a in s||(s[a]=void 0);n?e.props=i?s:Wf(s):e.type.props?e.props=s:e.props=r,e.attrs=r}function O0(e,t,n,i){const{props:s,attrs:r,vnode:{patchFlag:a}}=e,o=gt(s),[l]=e.propsOptions;let h=!1;if((i||a>0)&&!(a&16)){if(a&8){const u=e.vnode.dynamicProps;for(let c=0;c<u.length;c++){let d=u[c];if(Or(e.emitsOptions,d))continue;const f=t[d];if(l)if(rt(r,d))f!==r[d]&&(r[d]=f,h=!0);else{const g=Ge(d);s[g]=Ba(l,o,g,f,e,!1)}else f!==r[d]&&(r[d]=f,h=!0)}}}else{Hu(e,t,s,r)&&(h=!0);let u;for(const c in o)(!t||!rt(t,c)&&((u=Ri(c))===c||!rt(t,u)))&&(l?n&&(n[c]!==void 0||n[u]!==void 0)&&(s[c]=Ba(l,o,c,void 0,e,!0)):delete s[c]);if(r!==o)for(const c in r)(!t||!rt(t,c))&&(delete r[c],h=!0)}h&&He(e,"set","$attrs")}function Hu(e,t,n,i){const[s,r]=e.propsOptions;let a=!1,o;if(t)for(let l in t){if(Xs(l))continue;const h=t[l];let u;s&&rt(s,u=Ge(l))?!r||!r.includes(u)?n[u]=h:(o||(o={}))[u]=h:Or(e.emitsOptions,l)||(!(l in i)||h!==i[l])&&(i[l]=h,a=!0)}if(r){const l=gt(n),h=o||bt;for(let u=0;u<r.length;u++){const c=r[u];n[c]=Ba(s,l,c,h[c],e,!rt(h,c))}}return a}function Ba(e,t,n,i,s,r){const a=e[n];if(a!=null){const o=rt(a,"default");if(o&&i===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&J(l)){const{propsDefaults:h}=s;n in h?i=h[n]:(Ci(s),i=h[n]=l.call(null,t),On())}else i=l}a[0]&&(r&&!o?i=!1:a[1]&&(i===""||i===Ri(n))&&(i=!0))}return i}function Yu(e,t,n=!1){const i=t.propsCache,s=i.get(e);if(s)return s;const r=e.props,a={},o=[];let l=!1;if(!J(e)){const u=c=>{l=!0;const[d,f]=Yu(c,t,!0);ee(a,d),f&&o.push(...f)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!r&&!l)return Ct(e)&&i.set(e,li),li;if(V(r))for(let u=0;u<r.length;u++){const c=Ge(r[u]);Ll(c)&&(a[c]=bt)}else if(r)for(const u in r){const c=Ge(u);if(Ll(c)){const d=r[u],f=a[c]=V(d)||J(d)?{type:d}:ee({},d);if(f){const g=Nl(Boolean,f.type),m=Nl(String,f.type);f[0]=g>-1,f[1]=m<0||g<m,(g>-1||rt(f,"default"))&&o.push(c)}}}const h=[a,o];return Ct(e)&&i.set(e,h),h}function Ll(e){return e[0]!=="$"}function Ol(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function kl(e,t){return Ol(e)===Ol(t)}function Nl(e,t){return V(t)?t.findIndex(n=>kl(n,e)):J(t)&&kl(t,e)?0:-1}const Qu=e=>e[0]==="_"||e==="$stable",wo=e=>V(e)?e.map($e):[$e(e)],k0=(e,t,n)=>{if(t._n)return t;const i=Yt((...s)=>wo(t(...s)),n);return i._c=!1,i},Ju=(e,t,n)=>{const i=e._ctx;for(const s in e){if(Qu(s))continue;const r=e[s];if(J(r))t[s]=k0(s,r,i);else if(r!=null){const a=wo(r);t[s]=()=>a}}},tc=(e,t)=>{const n=wo(t);e.slots.default=()=>n},N0=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=gt(t),sr(t,"_",n)):Ju(t,e.slots={})}else e.slots={},t&&tc(e,t);sr(e.slots,Br,1)},$0=(e,t,n)=>{const{vnode:i,slots:s}=e;let r=!0,a=bt;if(i.shapeFlag&32){const o=t._;o?n&&o===1?r=!1:(ee(s,t),!n&&o===1&&delete s._):(r=!t.$stable,Ju(t,s)),a=t}else t&&(tc(e,t),a={default:1});if(r)for(const o in s)!Qu(o)&&a[o]==null&&delete s[o]};function za(e,t,n,i,s=!1){if(V(e)){e.forEach((d,f)=>za(d,t&&(V(t)?t[f]:t),n,i,s));return}if(Ki(i)&&!s)return;const r=i.shapeFlag&4?zr(i.component)||i.component.proxy:i.el,a=s?null:r,{i:o,r:l}=e,h=t&&t.r,u=o.refs===bt?o.refs={}:o.refs,c=o.setupState;if(h!=null&&h!==l&&($t(h)?(u[h]=null,rt(c,h)&&(c[h]=null)):ae(h)&&(h.value=null)),J(l))hn(l,o,12,[a,u]);else{const d=$t(l),f=ae(l);if(d||f){const g=()=>{if(e.f){const m=d?rt(c,l)?c[l]:u[l]:l.value;s?V(m)&&uo(m,r):V(m)?m.includes(r)||m.push(r):d?(u[l]=[r],rt(c,l)&&(c[l]=u[l])):(l.value=[r],e.k&&(u[e.k]=l.value))}else d?(u[l]=a,rt(c,l)&&(c[l]=a)):f&&(l.value=a,e.k&&(u[e.k]=a))};a?(g.id=-1,ce(g,n)):g()}}}const ce=c0;function B0(e){return z0(e)}function z0(e,t){const n=Aa();n.__VUE__=!0;const{insert:i,remove:s,patchProp:r,createElement:a,createText:o,createComment:l,setText:h,setElementText:u,parentNode:c,nextSibling:d,setScopeId:f=Ie,insertStaticContent:g}=e,m=(p,y,C,T=null,D=null,I=null,k=!1,R=null,P=!!y.dynamicChildren)=>{if(p===y)return;p&&!$i(p,y)&&(T=zt(p),_t(p,D,I,!0),p=null),y.patchFlag===-2&&(P=!1,y.dynamicChildren=null);const{type:F,ref:z,shapeFlag:$}=y;switch(F){case $r:_(p,y,C,T);break;case mn:v(p,y,C,T);break;case Vs:p==null&&E(y,C,T,k);break;case Tt:Xt(p,y,C,T,D,I,k,R,P);break;default:$&1?w(p,y,C,T,D,I,k,R,P):$&6?ne(p,y,C,T,D,I,k,R,P):($&64||$&128)&&F.process(p,y,C,T,D,I,k,R,P,_e)}z!=null&&D&&za(z,p&&p.ref,I,y||p,!y)},_=(p,y,C,T)=>{if(p==null)i(y.el=o(y.children),C,T);else{const D=y.el=p.el;y.children!==p.children&&h(D,y.children)}},v=(p,y,C,T)=>{p==null?i(y.el=l(y.children||""),C,T):y.el=p.el},E=(p,y,C,T)=>{[p.el,p.anchor]=g(p.children,y,C,T,p.el,p.anchor)},M=({el:p,anchor:y},C,T)=>{let D;for(;p&&p!==y;)D=d(p),i(p,C,T),p=D;i(y,C,T)},x=({el:p,anchor:y})=>{let C;for(;p&&p!==y;)C=d(p),s(p),p=C;s(y)},w=(p,y,C,T,D,I,k,R,P)=>{k=k||y.type==="svg",p==null?S(y,C,T,D,I,k,R,P):st(p,y,D,I,k,R,P)},S=(p,y,C,T,D,I,k,R)=>{let P,F;const{type:z,props:$,shapeFlag:j,transition:K,dirs:tt}=p;if(P=p.el=a(p.type,I,$&&$.is,$),j&8?u(P,p.children):j&16&&W(p.children,P,null,T,D,I&&z!=="foreignObject",k,R),tt&&xn(p,null,T,"created"),Y(P,p,p.scopeId,k,T),$){for(const ot in $)ot!=="value"&&!Xs(ot)&&r(P,ot,null,$[ot],I,p.children,T,D,Kt);"value"in $&&r(P,"value",null,$.value),(F=$.onVnodeBeforeMount)&&ke(F,T,p)}tt&&xn(p,null,T,"beforeMount");const ct=U0(D,K);ct&&K.beforeEnter(P),i(P,y,C),((F=$&&$.onVnodeMounted)||ct||tt)&&ce(()=>{F&&ke(F,T,p),ct&&K.enter(P),tt&&xn(p,null,T,"mounted")},D)},Y=(p,y,C,T,D)=>{if(C&&f(p,C),T)for(let I=0;I<T.length;I++)f(p,T[I]);if(D){let I=D.subTree;if(y===I){const k=D.vnode;Y(p,k,k.scopeId,k.slotScopeIds,D.parent)}}},W=(p,y,C,T,D,I,k,R,P=0)=>{for(let F=P;F<p.length;F++){const z=p[F]=R?rn(p[F]):$e(p[F]);m(null,z,y,C,T,D,I,k,R)}},st=(p,y,C,T,D,I,k)=>{const R=y.el=p.el;let{patchFlag:P,dynamicChildren:F,dirs:z}=y;P|=p.patchFlag&16;const $=p.props||bt,j=y.props||bt;let K;C&&bn(C,!1),(K=j.onVnodeBeforeUpdate)&&ke(K,C,y,p),z&&xn(y,p,C,"beforeUpdate"),C&&bn(C,!0);const tt=D&&y.type!=="foreignObject";if(F?at(p.dynamicChildren,F,R,C,T,tt,I):k||et(p,y,R,null,C,T,tt,I,!1),P>0){if(P&16)yt(R,y,$,j,C,T,D);else if(P&2&&$.class!==j.class&&r(R,"class",null,j.class,D),P&4&&r(R,"style",$.style,j.style,D),P&8){const ct=y.dynamicProps;for(let ot=0;ot<ct.length;ot++){const xt=ct[ot],ye=$[xt],Nt=j[xt];(Nt!==ye||xt==="value")&&r(R,xt,ye,Nt,D,p.children,C,T,Kt)}}P&1&&p.children!==y.children&&u(R,y.children)}else!k&&F==null&&yt(R,y,$,j,C,T,D);((K=j.onVnodeUpdated)||z)&&ce(()=>{K&&ke(K,C,y,p),z&&xn(y,p,C,"updated")},T)},at=(p,y,C,T,D,I,k)=>{for(let R=0;R<y.length;R++){const P=p[R],F=y[R],z=P.el&&(P.type===Tt||!$i(P,F)||P.shapeFlag&70)?c(P.el):C;m(P,F,z,null,T,D,I,k,!0)}},yt=(p,y,C,T,D,I,k)=>{if(C!==T){if(C!==bt)for(const R in C)!Xs(R)&&!(R in T)&&r(p,R,C[R],null,k,y.children,D,I,Kt);for(const R in T){if(Xs(R))continue;const P=T[R],F=C[R];P!==F&&R!=="value"&&r(p,R,F,P,k,y.children,D,I,Kt)}"value"in T&&r(p,"value",C.value,T.value)}},Xt=(p,y,C,T,D,I,k,R,P)=>{const F=y.el=p?p.el:o(""),z=y.anchor=p?p.anchor:o("");let{patchFlag:$,dynamicChildren:j,slotScopeIds:K}=y;K&&(R=R?R.concat(K):K),p==null?(i(F,C,T),i(z,C,T),W(y.children,C,z,D,I,k,R,P)):$>0&&$&64&&j&&p.dynamicChildren?(at(p.dynamicChildren,j,C,D,I,k,R),(y.key!=null||D&&y===D.subTree)&&ec(p,y,!0)):et(p,y,C,z,D,I,k,R,P)},ne=(p,y,C,T,D,I,k,R,P)=>{y.slotScopeIds=R,p==null?y.shapeFlag&512?D.ctx.activate(y,C,T,k,P):De(y,C,T,D,I,k,P):he(p,y,P)},De=(p,y,C,T,D,I,k)=>{const R=p.component=Y0(p,T,D);if(Wu(p)&&(R.ctx.renderer=_e),Q0(R),R.asyncDep){if(D&&D.registerDep(R,vt),!p.el){const P=R.subTree=Z(mn);v(null,P,y,C)}return}vt(R,p,y,C,D,I,k)},he=(p,y,C)=>{const T=y.component=p.component;if(a0(p,y,C))if(T.asyncDep&&!T.asyncResolved){H(T,y,C);return}else T.next=y,t0(T.update),T.update();else y.el=p.el,T.vnode=y},vt=(p,y,C,T,D,I,k)=>{const R=()=>{if(p.isMounted){let{next:z,bu:$,u:j,parent:K,vnode:tt}=p,ct=z,ot;bn(p,!1),z?(z.el=tt.el,H(p,z,k)):z=tt,$&&Ks($),(ot=z.props&&z.props.onVnodeBeforeUpdate)&&ke(ot,K,z,tt),bn(p,!0);const xt=la(p),ye=p.subTree;p.subTree=xt,m(ye,xt,c(ye.el),zt(ye),p,D,I),z.el=xt.el,ct===null&&o0(p,xt.el),j&&ce(j,D),(ot=z.props&&z.props.onVnodeUpdated)&&ce(()=>ke(ot,K,z,tt),D)}else{let z;const{el:$,props:j}=y,{bm:K,m:tt,parent:ct}=p,ot=Ki(y);if(bn(p,!1),K&&Ks(K),!ot&&(z=j&&j.onVnodeBeforeMount)&&ke(z,ct,y),bn(p,!0),$&&Wn){const xt=()=>{p.subTree=la(p),Wn($,p.subTree,p,D,null)};ot?y.type.__asyncLoader().then(()=>!p.isUnmounted&&xt()):xt()}else{const xt=p.subTree=la(p);m(null,xt,C,T,p,D,I),y.el=xt.el}if(tt&&ce(tt,D),!ot&&(z=j&&j.onVnodeMounted)){const xt=y;ce(()=>ke(z,ct,xt),D)}(y.shapeFlag&256||ct&&Ki(ct.vnode)&&ct.vnode.shapeFlag&256)&&p.a&&ce(p.a,D),p.isMounted=!0,y=C=T=null}},P=p.effect=new mo(R,()=>Mo(F),p.scope),F=p.update=()=>P.run();F.id=p.uid,bn(p,!0),F()},H=(p,y,C)=>{y.component=p;const T=p.vnode.props;p.vnode=y,p.next=null,O0(p,y.props,T,C),$0(p,y.children,C),Ii(),Tl(),Si()},et=(p,y,C,T,D,I,k,R,P=!1)=>{const F=p&&p.children,z=p?p.shapeFlag:0,$=y.children,{patchFlag:j,shapeFlag:K}=y;if(j>0){if(j&128){ie(F,$,C,T,D,I,k,R,P);return}else if(j&256){Ut(F,$,C,T,D,I,k,R,P);return}}K&8?(z&16&&Kt(F,D,I),$!==F&&u(C,$)):z&16?K&16?ie(F,$,C,T,D,I,k,R,P):Kt(F,D,I,!0):(z&8&&u(C,""),K&16&&W($,C,T,D,I,k,R,P))},Ut=(p,y,C,T,D,I,k,R,P)=>{p=p||li,y=y||li;const F=p.length,z=y.length,$=Math.min(F,z);let j;for(j=0;j<$;j++){const K=y[j]=P?rn(y[j]):$e(y[j]);m(p[j],K,C,null,D,I,k,R,P)}F>z?Kt(p,D,I,!0,!1,$):W(y,C,T,D,I,k,R,P,$)},ie=(p,y,C,T,D,I,k,R,P)=>{let F=0;const z=y.length;let $=p.length-1,j=z-1;for(;F<=$&&F<=j;){const K=p[F],tt=y[F]=P?rn(y[F]):$e(y[F]);if($i(K,tt))m(K,tt,C,null,D,I,k,R,P);else break;F++}for(;F<=$&&F<=j;){const K=p[$],tt=y[j]=P?rn(y[j]):$e(y[j]);if($i(K,tt))m(K,tt,C,null,D,I,k,R,P);else break;$--,j--}if(F>$){if(F<=j){const K=j+1,tt=K<z?y[K].el:T;for(;F<=j;)m(null,y[F]=P?rn(y[F]):$e(y[F]),C,tt,D,I,k,R,P),F++}}else if(F>j)for(;F<=$;)_t(p[F],D,I,!0),F++;else{const K=F,tt=F,ct=new Map;for(F=tt;F<=j;F++){const ve=y[F]=P?rn(y[F]):$e(y[F]);ve.key!=null&&ct.set(ve.key,F)}let ot,xt=0;const ye=j-tt+1;let Nt=!1,hl=0;const Ni=new Array(ye);for(F=0;F<ye;F++)Ni[F]=0;for(F=K;F<=$;F++){const ve=p[F];if(xt>=ye){_t(ve,D,I,!0);continue}let Oe;if(ve.key!=null)Oe=ct.get(ve.key);else for(ot=tt;ot<=j;ot++)if(Ni[ot-tt]===0&&$i(ve,y[ot])){Oe=ot;break}Oe===void 0?_t(ve,D,I,!0):(Ni[Oe-tt]=F+1,Oe>=hl?hl=Oe:Nt=!0,m(ve,y[Oe],C,null,D,I,k,R,P),xt++)}const ul=Nt?j0(Ni):li;for(ot=ul.length-1,F=ye-1;F>=0;F--){const ve=tt+F,Oe=y[ve],cl=ve+1<z?y[ve+1].el:T;Ni[F]===0?m(null,Oe,C,cl,D,I,k,R,P):Nt&&(ot<0||F!==ul[ot]?pe(Oe,C,cl,2):ot--)}}},pe=(p,y,C,T,D=null)=>{const{el:I,type:k,transition:R,children:P,shapeFlag:F}=p;if(F&6){pe(p.component.subTree,y,C,T);return}if(F&128){p.suspense.move(y,C,T);return}if(F&64){k.move(p,y,C,_e);return}if(k===Tt){i(I,y,C);for(let $=0;$<P.length;$++)pe(P[$],y,C,T);i(p.anchor,y,C);return}if(k===Vs){M(p,y,C);return}if(T!==2&&F&1&&R)if(T===0)R.beforeEnter(I),i(I,y,C),ce(()=>R.enter(I),D);else{const{leave:$,delayLeave:j,afterLeave:K}=R,tt=()=>i(I,y,C),ct=()=>{$(I,()=>{tt(),K&&K()})};j?j(I,tt,ct):ct()}else i(I,y,C)},_t=(p,y,C,T=!1,D=!1)=>{const{type:I,props:k,ref:R,children:P,dynamicChildren:F,shapeFlag:z,patchFlag:$,dirs:j}=p;if(R!=null&&za(R,null,C,p,!0),z&256){y.ctx.deactivate(p);return}const K=z&1&&j,tt=!Ki(p);let ct;if(tt&&(ct=k&&k.onVnodeBeforeUnmount)&&ke(ct,y,p),z&6)It(p.component,C,T);else{if(z&128){p.suspense.unmount(C,T);return}K&&xn(p,null,y,"beforeUnmount"),z&64?p.type.remove(p,y,C,D,_e,T):F&&(I!==Tt||$>0&&$&64)?Kt(F,y,C,!1,!0):(I===Tt&&$&384||!D&&z&16)&&Kt(P,y,C),T&&jt(p)}(tt&&(ct=k&&k.onVnodeUnmounted)||K)&&ce(()=>{ct&&ke(ct,y,p),K&&xn(p,null,y,"unmounted")},C)},jt=p=>{const{type:y,el:C,anchor:T,transition:D}=p;if(y===Tt){Et(C,T);return}if(y===Vs){x(p);return}const I=()=>{s(C),D&&!D.persisted&&D.afterLeave&&D.afterLeave()};if(p.shapeFlag&1&&D&&!D.persisted){const{leave:k,delayLeave:R}=D,P=()=>k(C,I);R?R(p.el,I,P):P()}else I()},Et=(p,y)=>{let C;for(;p!==y;)C=d(p),s(p),p=C;s(y)},It=(p,y,C)=>{const{bum:T,scope:D,update:I,subTree:k,um:R}=p;T&&Ks(T),D.stop(),I&&(I.active=!1,_t(k,p,y,C)),R&&ce(R,y),ce(()=>{p.isUnmounted=!0},y),y&&y.pendingBranch&&!y.isUnmounted&&p.asyncDep&&!p.asyncResolved&&p.suspenseId===y.pendingId&&(y.deps--,y.deps===0&&y.resolve())},Kt=(p,y,C,T=!1,D=!1,I=0)=>{for(let k=I;k<p.length;k++)_t(p[k],y,C,T,D)},zt=p=>p.shapeFlag&6?zt(p.component.subTree):p.shapeFlag&128?p.suspense.next():d(p.anchor||p.el),Xe=(p,y,C)=>{p==null?y._vnode&&_t(y._vnode,null,null,!0):m(y._vnode||null,p,y,null,null,null,C),Tl(),$u(),y._vnode=p},_e={p:m,um:_t,m:pe,r:jt,mt:De,mc:W,pc:et,pbc:at,n:zt,o:e};let En,Wn;return t&&([En,Wn]=t(_e)),{render:Xe,hydrate:En,createApp:S0(Xe,En)}}function bn({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function U0(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function ec(e,t,n=!1){const i=e.children,s=t.children;if(V(i)&&V(s))for(let r=0;r<i.length;r++){const a=i[r];let o=s[r];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=s[r]=rn(s[r]),o.el=a.el),n||ec(a,o)),o.type===$r&&(o.el=a.el)}}function j0(e){const t=e.slice(),n=[0];let i,s,r,a,o;const l=e.length;for(i=0;i<l;i++){const h=e[i];if(h!==0){if(s=n[n.length-1],e[s]<h){t[i]=s,n.push(i);continue}for(r=0,a=n.length-1;r<a;)o=r+a>>1,e[n[o]]<h?r=o+1:a=o;h<e[n[r]]&&(r>0&&(t[i]=n[r-1]),n[r]=i)}}for(r=n.length,a=n[r-1];r-- >0;)n[r]=a,a=t[a];return n}const G0=e=>e.__isTeleport,Tt=Symbol.for("v-fgt"),$r=Symbol.for("v-txt"),mn=Symbol.for("v-cmt"),Vs=Symbol.for("v-stc"),Vi=[];let Re=null;function L(e=!1){Vi.push(Re=e?null:[])}function W0(){Vi.pop(),Re=Vi[Vi.length-1]||null}let ns=1;function $l(e){ns+=e}function nc(e){return e.dynamicChildren=ns>0?Re||li:null,W0(),ns>0&&Re&&Re.push(e),e}function U(e,t,n,i,s,r){return nc(b(e,t,n,i,s,r,!0))}function fe(e,t,n,i,s){return nc(Z(e,t,n,i,s,!0))}function ic(e){return e?e.__v_isVNode===!0:!1}function $i(e,t){return e.type===t.type&&e.key===t.key}const Br="__vInternal",sc=({key:e})=>e??null,Hs=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?$t(e)||ae(e)||J(e)?{i:Jt,r:e,k:t,f:!!n}:e:null);function b(e,t=null,n=null,i=0,s=null,r=e===Tt?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&sc(t),ref:t&&Hs(t),scopeId:kr,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Jt};return o?(Do(l,n),r&128&&e.normalize(l)):n&&(l.shapeFlag|=$t(n)?8:16),ns>0&&!a&&Re&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&Re.push(l),l}const Z=q0;function q0(e,t=null,n=null,i=0,s=null,r=!1){if((!e||e===l0)&&(e=mn),ic(e)){const o=Mi(e,t,!0);return n&&Do(o,n),ns>0&&!r&&Re&&(o.shapeFlag&6?Re[Re.indexOf(e)]=o:Re.push(o)),o.patchFlag|=-2,o}if(ig(e)&&(e=e.__vccOpts),t){t=X0(t);let{class:o,style:l}=t;o&&!$t(o)&&(t.class=bi(o)),Ct(l)&&(Pu(l)&&!V(l)&&(l=ee({},l)),t.style=fo(l))}const a=$t(e)?1:u0(e)?128:G0(e)?64:Ct(e)?4:J(e)?2:0;return b(e,t,n,i,s,a,r,!0)}function X0(e){return e?Pu(e)||Br in e?ee({},e):e:null}function Mi(e,t,n=!1){const{props:i,ref:s,patchFlag:r,children:a}=e,o=t?Z0(i||{},t):i;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:o,key:o&&sc(o),ref:t&&t.ref?n&&s?V(s)?s.concat(Hs(t)):[s,Hs(t)]:Hs(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Tt?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Mi(e.ssContent),ssFallback:e.ssFallback&&Mi(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function pt(e=" ",t=0){return Z($r,null,e,t)}function K0(e,t){const n=Z(Vs,null,e);return n.staticCount=t,n}function wt(e="",t=!1){return t?(L(),fe(mn,null,e)):Z(mn,null,e)}function $e(e){return e==null||typeof e=="boolean"?Z(mn):V(e)?Z(Tt,null,e.slice()):typeof e=="object"?rn(e):Z($r,null,String(e))}function rn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Mi(e)}function Do(e,t){let n=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(V(t))n=16;else if(typeof t=="object")if(i&65){const s=t.default;s&&(s._c&&(s._d=!1),Do(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!(Br in t)?t._ctx=Jt:s===3&&Jt&&(Jt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else J(t)?(t={default:t,_ctx:Jt},n=32):(t=String(t),i&64?(n=16,t=[pt(t)]):n=8);e.children=t,e.shapeFlag|=n}function Z0(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const s in i)if(s==="class")t.class!==i.class&&(t.class=bi([t.class,i.class]));else if(s==="style")t.style=fo([t.style,i.style]);else if(Fr(s)){const r=t[s],a=i[s];a&&r!==a&&!(V(r)&&r.includes(a))&&(t[s]=r?[].concat(r,a):a)}else s!==""&&(t[s]=i[s])}return t}function ke(e,t,n,i=null){Se(e,t,7,[n,i])}const V0=Vu();let H0=0;function Y0(e,t,n){const i=e.type,s=(t?t.appContext:e.appContext)||V0,r={uid:H0++,vnode:e,type:i,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new xf(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Yu(i,s),emitsOptions:zu(i,s),emit:null,emitted:null,propsDefaults:bt,inheritAttrs:i.inheritAttrs,ctx:bt,data:bt,props:bt,attrs:bt,slots:bt,refs:bt,setupState:bt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=i0.bind(null,r),e.ce&&e.ce(r),r}let qt=null,To,qn,Bl="__VUE_INSTANCE_SETTERS__";(qn=Aa()[Bl])||(qn=Aa()[Bl]=[]),qn.push(e=>qt=e),To=e=>{qn.length>1?qn.forEach(t=>t(e)):qn[0](e)};const Ci=e=>{To(e),e.scope.on()},On=()=>{qt&&qt.scope.off(),To(null)};function rc(e){return e.vnode.shapeFlag&4}let is=!1;function Q0(e,t=!1){is=t;const{props:n,children:i}=e.vnode,s=rc(e);L0(e,n,s,t),N0(e,i);const r=s?J0(e,t):void 0;return is=!1,r}function J0(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=Lu(new Proxy(e.ctx,w0));const{setup:i}=n;if(i){const s=e.setupContext=i.length>1?eg(e):null;Ci(e),Ii();const r=hn(i,e,0,[e.props,s]);if(Si(),On(),_u(r)){if(r.then(On,On),t)return r.then(a=>{zl(e,a,t)}).catch(a=>{Lr(a,e,0)});e.asyncDep=r}else zl(e,r,t)}else ac(e,t)}function zl(e,t,n){J(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ct(t)&&(e.setupState=Ou(t)),ac(e,n)}let Ul;function ac(e,t,n){const i=e.type;if(!e.render){if(!t&&Ul&&!i.render){const s=i.template||Co(e).template;if(s){const{isCustomElement:r,compilerOptions:a}=e.appContext.config,{delimiters:o,compilerOptions:l}=i,h=ee(ee({isCustomElement:r,delimiters:o},a),l);i.render=Ul(s,h)}}e.render=i.render||Ie}{Ci(e),Ii();try{D0(e)}finally{Si(),On()}}}function tg(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return ge(e,"get","$attrs"),t[n]}}))}function eg(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return tg(e)},slots:e.slots,emit:e.emit,expose:t}}function zr(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Ou(Lu(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Zi)return Zi[n](e)},has(t,n){return n in t||n in Zi}}))}function ng(e,t=!0){return J(e)?e.displayName||e.name:e.name||t&&e.__name}function ig(e){return J(e)&&"__vccOpts"in e}const sg=(e,t)=>Hf(e,t,is),rg=Symbol.for("v-scx"),ag=()=>Zs(rg),og="3.3.8",lg="http://www.w3.org/2000/svg",An=typeof document<"u"?document:null,jl=An&&An.createElement("template"),hg={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const s=t?An.createElementNS(lg,e):An.createElement(e,n?{is:n}:void 0);return e==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:e=>An.createTextNode(e),createComment:e=>An.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>An.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,s,r){const a=n?n.previousSibling:t.lastChild;if(s&&(s===r||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===r||!(s=s.nextSibling)););else{jl.innerHTML=i?`<svg>${e}</svg>`:e;const o=jl.content;if(i){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}t.insertBefore(o,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},ug=Symbol("_vtc");function cg(e,t,n){const i=e[ug];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const dg=Symbol("_vod");function fg(e,t,n){const i=e.style,s=$t(n);if(n&&!s){if(t&&!$t(t))for(const r in t)n[r]==null&&Ua(i,r,"");for(const r in n)Ua(i,r,n[r])}else{const r=i.display;s?t!==n&&(i.cssText=n):t&&e.removeAttribute("style"),dg in e&&(i.display=r)}}const Gl=/\s*!important$/;function Ua(e,t,n){if(V(n))n.forEach(i=>Ua(e,t,i));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=gg(e,t);Gl.test(n)?e.setProperty(Ri(i),n.replace(Gl,""),"important"):e[i]=n}}const Wl=["Webkit","Moz","ms"],ca={};function gg(e,t){const n=ca[t];if(n)return n;let i=Ge(t);if(i!=="filter"&&i in e)return ca[t]=i;i=Ir(i);for(let s=0;s<Wl.length;s++){const r=Wl[s]+i;if(r in e)return ca[t]=r}return t}const ql="http://www.w3.org/1999/xlink";function mg(e,t,n,i,s){if(i&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(ql,t.slice(6,t.length)):e.setAttributeNS(ql,t,n);else{const r=yf(t);n==null||r&&!Eu(n)?e.removeAttribute(t):e.setAttribute(t,r?"":n)}}function pg(e,t,n,i,s,r,a){if(t==="innerHTML"||t==="textContent"){i&&a(i,s,r),e[t]=n??"";return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){e._value=n;const h=o==="OPTION"?e.getAttribute("value"):e.value,u=n??"";h!==u&&(e.value=u),n==null&&e.removeAttribute(t);return}let l=!1;if(n===""||n==null){const h=typeof e[t];h==="boolean"?n=Eu(n):n==null&&h==="string"?(n="",l=!0):h==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(t)}function Rn(e,t,n,i){e.addEventListener(t,n,i)}function _g(e,t,n,i){e.removeEventListener(t,n,i)}const Xl=Symbol("_vei");function yg(e,t,n,i,s=null){const r=e[Xl]||(e[Xl]={}),a=r[t];if(i&&a)a.value=i;else{const[o,l]=vg(t);if(i){const h=r[t]=bg(i,s);Rn(e,o,h,l)}else a&&(_g(e,o,a,l),r[t]=void 0)}}const Kl=/(?:Once|Passive|Capture)$/;function vg(e){let t;if(Kl.test(e)){t={};let i;for(;i=e.match(Kl);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Ri(e.slice(2)),t]}let da=0;const Eg=Promise.resolve(),xg=()=>da||(Eg.then(()=>da=0),da=Date.now());function bg(e,t){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;Se(Mg(i,n.value),t,5,[i])};return n.value=e,n.attached=xg(),n}function Mg(e,t){if(V(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(i=>s=>!s._stopped&&i&&i(s))}else return t}const Zl=/^on[a-z]/,Cg=(e,t,n,i,s=!1,r,a,o,l)=>{t==="class"?cg(e,i,s):t==="style"?fg(e,n,i):Fr(t)?ho(t)||yg(e,t,n,i,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):wg(e,t,i,s))?pg(e,t,i,r,a,o,l):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),mg(e,t,i,s))};function wg(e,t,n,i){return i?!!(t==="innerHTML"||t==="textContent"||t in e&&Zl.test(t)&&J(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||Zl.test(t)&&$t(n)?!1:t in e}const hr=e=>{const t=e.props["onUpdate:modelValue"]||!1;return V(t)?n=>Ks(t,n):t};function Dg(e){e.target.composing=!0}function Vl(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const di=Symbol("_assign"),Ur={created(e,{modifiers:{lazy:t,trim:n,number:i}},s){e[di]=hr(s);const r=i||s.props&&s.props.type==="number";Rn(e,t?"change":"input",a=>{if(a.target.composing)return;let o=e.value;n&&(o=o.trim()),r&&(o=rr(o)),e[di](o)}),n&&Rn(e,"change",()=>{e.value=e.value.trim()}),t||(Rn(e,"compositionstart",Dg),Rn(e,"compositionend",Vl),Rn(e,"change",Vl))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:i,number:s}},r){if(e[di]=hr(r),e.composing||document.activeElement===e&&e.type!=="range"&&(n||i&&e.value.trim()===t||(s||e.type==="number")&&rr(e.value)===t))return;const a=t??"";e.value!==a&&(e.value=a)}},ur={deep:!0,created(e,{value:t,modifiers:{number:n}},i){const s=Ar(t);Rn(e,"change",()=>{const r=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>n?rr(cr(a)):cr(a));e[di](e.multiple?s?new Set(r):r:r[0])}),e[di]=hr(i)},mounted(e,{value:t}){Hl(e,t)},beforeUpdate(e,t,n){e[di]=hr(n)},updated(e,{value:t}){Hl(e,t)}};function Hl(e,t){const n=e.multiple;if(!(n&&!V(t)&&!Ar(t))){for(let i=0,s=e.options.length;i<s;i++){const r=e.options[i],a=cr(r);if(n)V(t)?r.selected=Ef(t,a)>-1:r.selected=t.has(a);else if(Sr(cr(r),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function cr(e){return"_value"in e?e._value:e.value}const Tg=ee({patchProp:Cg},hg);let Yl;function Fg(){return Yl||(Yl=B0(Tg))}const Ag=(...e)=>{const t=Fg().createApp(...e),{mount:n}=t;return t.mount=i=>{const s=Rg(i);if(!s)return;const r=t._component;!J(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.innerHTML="";const a=n(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},t};function Rg(e){return $t(e)?document.querySelector(e):e}const Ot=(e,t)=>{const n=e.__vccOpts||e;for(const[i,s]of t)n[i]=s;return n},Ig={name:"CodeBlock",props:["lang"]};function Sg(e,t,n,i,s,r){return L(),U("pre",null,[b("code",{class:bi(n.lang+" border-0 rounded-2 p-3")},[Ln(e.$slots,"default")],2)])}const Fo=Ot(Ig,[["render",Sg]]),Pg={exports:[{name:"WfsEndpoint",type:"Class",constructor:{params:[{name:"url",type:"string"}],description:"Creates a new WFS endpoint; wait for the `isReady()` promise before using the endpoint methods."},methods:[{name:"isReady",description:"Resolves when the endpoint is ready to use. Returns the same endpoint object for convenience.",params:[],return:{type:"Promise",subType:"WfsEndpoint"}},{name:"getServiceInfo",description:"Returns the service info.",params:[],return:{type:"GenericEndpointInfo"}},{name:"getVersion",description:"Returns the highest protocol version that this WFS endpoint supports.\nNote that if the url used for initialization does specify a version (e.g. `1.0.0`,\nthis version will most likely be used instead of the highest supported one.",params:[],return:{type:"string",values:["1.0.0","1.1.0","2.0.0"]}},{name:"getFeatureTypes",description:"Returns the available feature types.",params:[],return:{type:"Array",subType:"WfsFeatureTypeBrief"}},{name:"getFeatureTypeSummary",description:`Returns the feature type in summary format. If a namespace is specified in the name,
this will be used for matching; otherwise, matching will be done without taking namespaces into account.`,params:[{name:"featureType",type:"string"}],return:{type:"WfsFeatureTypeSummary"}},{name:"getFeatureTypeFull",description:`Returns a promise that will resolve with the full feature type description,
including properties with their types, geometry field and total object count.`,params:[{name:"featureType",type:"string"}],return:{type:"Promise",subType:"WfsFeatureTypeFull"}},{name:"getFeatureTypePropDetails",description:`Returns a promise that will resolve with details on each of the feature type properties;
for now, this consists of a list of unique values in the whole dataset.`,params:[{name:"featureType",type:"string"}],return:{type:"Promise",subType:"WfsFeatureTypePropDetails"}},{name:"supportsJson",description:"Returns true if the endpoint is able to output the specified feature type as GeoJSON.",params:[{name:"featureType",type:"string"}],return:{type:"boolean"}},{name:"getFeatureUrl",description:"Returns a URL that can be used to query features from this feature type.",params:[{name:"featureType",type:"string"},{name:"options",type:"GetFeatureUrlOptions"}],return:{type:"string"}}]},{name:"WmsEndpoint",type:"Class",constructor:{params:[{name:"url",type:"string"}],description:"Creates a new WMS endpoint; wait for the `isReady()` promise before using the endpoint methods."},methods:[{name:"isReady",description:"Resolves when the endpoint is ready to use. Returns the same endpoint object for convenience.",params:[],return:{type:"Promise",subType:"WmsEndpoint"}},{name:"getServiceInfo",description:"Returns the service info.",params:[],return:{type:"GenericEndpointInfo"}},{name:"getVersion",description:"Returns the highest protocol version that this WMS endpoint supports.\nNote that if the url used for initialization does specify a version (e.g. `1.1.0`,\nthis version will most likely be used instead of the highest supported one.",params:[],return:{type:"string",values:["1.1.0","1.1.1","1.3.0"]}},{name:"getLayers",description:`Returns the layers advertised in the endpoint. Note that WMS layers are organized
in a tree structure, so some layers may have children layers as well`,params:[],return:{type:"Array",subType:"WmsLayerSummary"}},{name:"getLayerByName",description:`Returns the full layer information, including supported coordinate systems,
available layers, bounding boxes etc. Layer name is case sensitive.`,params:[{name:"layerName",type:"string"}],return:{type:"WmsLayerFull"}}]},{name:"OgcApiEndpoint",type:"Class",constructor:{params:[{name:"url",type:"string"}],description:"Creates a new OGC API endpoint."},properties:[{name:"info",description:"A Promise which resolves to the endpoint info.",type:"Promise",subType:"OgcApiEndpointInfo"},{name:"conformanceClasses",description:"A Promise which resolves to an array of conformance classes.",type:"Promise",subType:{type:"Array",subType:"string"}},{name:"allCollections",description:"A Promise which resolves to an array of all collection identifiers as strings.",type:"Promise",subType:{type:"Array",subType:"string"}},{name:"recordCollections",description:"A Promise which resolves to an array of records collection identifiers as strings.",type:"Promise",subType:{type:"Array",subType:"string"}},{name:"featureCollections",description:"A Promise which resolves to an array of feature collection identifiers as strings.",type:"Promise",subType:{type:"Array",subType:"string"}},{name:"hasTiles",description:"A Promise which resolves to a boolean indicating whether the endpoint offer tiles.",type:"Promise",subType:"boolean"},{name:"hasStyles",description:"A Promise which resolves to a boolean indicating whether the endpoint offer styles.",type:"Promise",subType:"boolean"},{name:"hasFeatures",description:"A Promise which resolves to a boolean indicating whether the endpoint offer feature collections.",type:"Promise",subType:"boolean"},{name:"hasRecords",description:"A Promise which resolves to a boolean indicating whether the endpoint offer record collections.",type:"Promise",subType:"boolean"}],methods:[{name:"getCollectionInfo",description:"Returns a promise resolving to a document describing the specified collection.",params:[{name:"collectionId",type:"string"}],return:{type:"Promise",subType:"OgcApiCollectionInfo"}},{name:"getCollectionItems",description:"Returns a promise resolving to an array of items from a collection with the given query parameters.",params:[{name:"collectionId",type:"string"},{name:"limit",type:"number",default:10},{name:"offset",type:"number",default:0},{name:"skipGeometry",type:"boolean",optional:!0},{name:"sortby",type:"Array",subType:"string",optional:!0},{name:"bbox",type:"[number, number, number, number]",optional:!0},{name:"properties",type:"Array",subType:"string",optional:!0}],return:{type:"Promise",subType:{type:"Array",subType:"OgcApiCollectionItem"}}},{name:"getCollectionItem",description:"Returns a promise resolving to a specific item from a collection.",params:[{name:"collectionId",type:"string"},{name:"itemId",type:"string"}],return:{type:"Promise",subType:"OgcApiCollectionItem"}}]},{name:"WmtsEndpoint",type:"Class",constructor:{params:[{name:"url",type:"string"}],description:"Creates a new WMTS endpoint; wait for the `isReady()` promise before using the endpoint methods."},methods:[{name:"isReady",description:"Resolves when the endpoint is ready to use. Returns the same endpoint object for convenience.",params:[],return:{type:"Promise",subType:"WmtsEndpoint"}},{name:"getServiceInfo",description:"Returns the service info.",params:[],return:{type:"WmtsEndpointInfo"}},{name:"getLayers",description:"Returns the layers advertised in the endpoint.",params:[],return:{type:"Array",subType:"WmtsLayer"}},{name:"getMatrixSets",description:`Returns the matrix sets available for that endpoint. Each matrix set contains a list of tile matrices
as well as a supported CRS.`,params:[],return:{type:"Array",subType:"WmtsMatrixSet"}},{name:"getLayerByName",description:"Returns a layer object based on its name.",params:[{name:"name",type:"string"}],return:{type:"WmtsLayer"}},{name:"getMatrixSetByIdentifier",description:"Returns a matrix set object based on its identifier.",params:[{name:"identifier",type:"string"}],return:{type:"WmtsMatrixSet"}},{name:"getLayerResourceUrl",description:`Returns a layer resource info. If no type hint is specified, the first resource will be returned. A resource
info contains a URL as well as an image format and a request encoding (KVP or REST).`,params:[{name:"layerName",type:"string"},{name:"formatHint",type:"MimeType",optional:!0}],return:{type:"LayerResourceUrl"}},{name:"getTileUrl",description:"Generates a tile URL for a layer and a set of parameters.",params:[{name:"layerName",type:"string"},{name:"styleName",type:"string"},{name:"matrixSetName",type:"string"},{name:"tileMatrix",type:"string"},{name:"tileRow",type:"number"},{name:"tileCol",type:"number"},{name:"outputFormat",type:"MimeType"}],return:{type:"string"}},{name:"getDefaultDimensions",description:"Return an object with all defined dimensions for the layer, as well as their default values.",params:[{name:"layerName",type:"string"}],return:{type:"Record",subType:"LayerDimensionValue"}},{name:"getOpenLayersTileGrid",description:"Creates a `WMTSTileGrid` instance from the [`ol` package](https://www.npmjs.com/package/ol), for a given layer. Optionally, a matrix set\n   can be provided. Will return `null` if the `ol` package is not present (as it is considered an optional peer dependency).",params:[{name:"layerName",type:"string"},{name:"matrixSetIdentifier",type:"string",optional:!0}],return:{type:"WMTSTileGrid"}}]},{name:"useCache",type:"Function",description:`Will run the provided function and resolve to its return value.
The function return value will also be stored in cache, meaning that subsequent runs will **not** execute the function but
simply return the cached value. \`keys\` are an indeterminate amount of string tokens that are used to uniquely identify the operation.

Cached values are kept for one hour. Each call to \`useCache\` will first loop on the currently cached values and
clear the ones that have expired to make sure that the cache storage does not grow indefinitely.

Also note that if \`useCache\` is called several times with the same key without the first one having returned yet, all subsequent calls
will **not** trigger additional operations but simply resolve at the same time as the first one.

Cache is kept using the [Cache API](https://developer.mozilla.org/en-US/docs/Web/API/Cache), which has virtually no size limit.
Cache entries might be removed by the browser without notice. The identifying key for the cache entries is \`ogc-client\`.`,params:[{name:"process",type:"AsyncFunction",params:[],subType:"any"},{name:"...keys",type:"Array",subType:"string"}],return:{type:"Promise",subType:"any"}},{name:"sharedFetch",type:"Function",description:"Returns a promise equivalent to `fetch(url)` but guarded against identical concurrent requests.\nRequests are considered identical if they share the _exact_ same url and method.",params:[{name:"url",type:"string"},{name:"method",type:"'GET' | 'HEAD'"}],return:{type:"Promise",subType:"Response"}},{name:"setFetchOptions",type:"Function",description:"Allows setting custom options that will be used for every subsequent `fetch()` call; see https://developer.mozilla.org/en-US/docs/Web/API/fetch#options for more information.",params:[{name:"options",type:"FetchOptions"}]},{name:"enableFallbackWithoutWorker",type:"Function",description:"If called, the use of a web worker for carious operations will be prevented; everything will be run on the main thread (this can have performance implications).",params:[]}],types:[{name:"GenericEndpointInfo",type:"Object",properties:[{type:"string",name:"name"},{type:"string",name:"title"},{type:"string",name:"abstract"},{type:"string",name:"fees"},{type:"string",name:"constraints"},{type:"Array",subType:"string",name:"keywords"},{type:"Array",subType:"string",name:"outputFormats",optional:!0}]},{name:"WfsFeatureTypeBrief",type:"Object",properties:[{type:"string",name:"name"},{type:"string",name:"title",optional:!0},{type:"string",name:"abstract",optional:!0},{type:"BoundingBox",name:"boundingBox",optional:!0}]},{name:"WfsFeatureTypeSummary",type:"Object",properties:[{type:"string",name:"name"},{type:"string",name:"title",optional:!0},{type:"string",name:"abstract",optional:!0},{type:"BoundingBox",name:"boundingBox",optional:!0},{type:"CrsCode",name:"defaultCrs"},{type:"Array",subtype:"CrsCode",name:"otherCrs"},{type:"Array",subtype:"string",name:"outputFormats"}]},{name:"WfsFeatureTypeFull",type:"Object",properties:[{type:"string",name:"name"},{type:"string",name:"title",optional:!0},{type:"string",name:"abstract",optional:!0},{type:"BoundingBox",name:"boundingBox",optional:!0},{type:"CrsCode",name:"defaultCrs"},{type:"Array",subtype:"CrsCode",name:"otherCrs"},{type:"Array",subtype:"string",name:"outputFormats"},{type:"Map",subType:"FeaturePropertyType",name:"properties",description:"These properties will _not_ include the feature geometry"},{type:"string",name:"geometryName",description:"Not defined if no geometry present",optional:!0},{type:"FeatureGeometryType",name:"geometryType",description:"Not defined if no geometry present",optional:!0},{type:"number",name:"objectCount",description:"Not defined if object count could not be determined",optional:!0}]},{name:"WfsFeatureTypePropDetails",type:"Object",properties:[{name:"uniqueValues",type:"Array",subType:"WfsFeatureTypeUniqueValue"}]},{name:"WfsFeatureTypeUniqueValue",type:"Object",properties:[{type:"number",name:"count",description:"Number of occurrences of this value in the dataset"},{type:"Union",subTypes:["number","boolean","string"],name:"value"}]},{name:"GetFeatureUrlOptions",type:"Object",properties:[{type:"number",name:"maxFeatures",description:"All objects will be returned if undefined"},{type:"boolean",name:"asJson",description:"If `true`, will ask for GeoJSON; will throw if the service does not support it"},{type:"MimeType",name:"outputFormat",description:"A supported output format (overridden by `asJson`)"},{type:"CrsCode",name:"outputCrs",description:"If unspecified, this will be the data native projection"},{type:"BoundingBox",name:"extent",description:"An extent to restrict returned objects"},{type:"CrsCode",name:"extentCrs",description:"If unspecified, `extent` should be in the data native projection"}]},{name:"WmsLayerSummary",type:"Object",properties:[{type:"string",name:"name",description:"The layer is renderable if defined",optional:!0},{type:"string",name:"title"},{type:"string",name:"abstract"},{type:"Array",subType:"WmsLayerFull",name:"children",description:"Not defined if the layer is a leaf in the tree",optional:!0}]},{name:"WmsLayerFull",type:"Object",properties:[{type:"string",name:"name",description:"The layer is renderable if defined",optional:!0},{type:"string",name:"title"},{type:"string",name:"abstract",optional:!0},{type:"Array",subType:"CrsCode",name:"availableCrs"},{type:"Array",subType:"WmsLayerStyle",name:"styles"},{type:"Map",key:"string",subType:"BoundingBox",name:"boundingBoxes",description:"Dictionary of bounding boxes for each of the available CRS"},{type:"WmsLayerAttribution",name:"attribution",optional:!0},{type:"Array",subType:"WmsLayerFull",name:"children",description:"Not defined if the layer is a leaf in the tree",optional:!0}]},{name:"WmsLayerAttribution",type:"Object",properties:[{type:"string",name:"title",optional:!0},{type:"string",name:"url",optional:!0},{type:"string",name:"logoUrl",optional:!0}]},{name:"WmsLayerStyle",type:"Object",properties:[{type:"string",name:"name"},{type:"string",name:"title"},{type:"string",name:"legendUrl",description:"May not be defined; a GetLegendGraphic operation should work in any case",optional:!0}]},{name:"BoundingBox",type:"Array",subTypes:["number","number","number","number"],description:"Values are `minX`, `minY`, `maxX` and `maxY` expressed in latitudes and longitudes"},{name:"OgcApiEndpointInfo",type:"Object",description:"Information related to an OGC API endpoint."},{name:"OgcApiCollectionInfo",type:"Object",description:"Information on a specific collection of an OGC API endpoint."},{name:"OgcApiCollectionItem",type:"Object",description:"An item coming from an OGC API endpoint."},{name:"FetchOptions",type:"Object",properties:[{type:"Object",name:"headers"},{type:"string",name:"mode"},{type:"string",name:"credentials"},{type:"string",name:"redirect"},{type:"string",name:"referrer"},{type:"string",name:"integrity"}],description:"A set of options for `fetch()`."}]},Lg={name:"MarkdownBlock",props:{text:String},computed:{parsed(){return this.text?sf(this.text):""}}},Og=["innerHTML"];function kg(e,t,n,i,s,r){return L(),U("div",{innerHTML:r.parsed},null,8,Og)}const oc=Ot(Lg,[["render",kg]]);function Ng(e){return e.name}function lc(e){const t=e.params.map(n=>`${n.name}${n.optional?"?":""}: ${wi(n)}`).join(", ");return`${e.name}(${t})`}function $g(e){const t=e.constructor.params.map(n=>`${n.name}: ${wi(n)}`).join(", ");return`new ${e.name}(${t})`}function wi(e){if(!e)return"void";const t=e.subType?wi(e.subType):"";switch(e.type||e){case"Array":return`${t}[]`;case"Record":return`Record<string, ${t}>`;case"Response":return"[Response](https://developer.mozilla.org/en-US/docs/Web/API/Response)";case"Promise":return`[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;${t}&gt;`;case"AsyncFunction":return`async () => ${t}`;case"string":if(e.values)return e.values.map(n=>`'${n}`).join(" | ")}return e.type||e}const Bg={name:"ClassCard",components:{MarkdownBlock:oc,CodeBlock:Fo},props:{apiElement:Object},methods:{formatMethod(e){return Tn(lc(e))},formatMethodReturned(e){return Tn(wi(e.return))},formatProperty(e){return Tn(`${e.name}: ${wi(e)}`)}},computed:{className(){return Tn(Ng(this.apiElement))},constructorSignature(){return Tn($g(this.apiElement))}}},gs=e=>(Pi("data-v-be39622c"),e=e(),Li(),e),zg={class:"card mb-4"},Ug=gs(()=>b("div",{class:"card-header text-uppercase small border-bottom-0 py-1 px-3"}," class ",-1)),jg={class:"card-body pb-0"},Gg={class:"mb-3"},Wg=["innerHTML"],qg={class:"row"},Xg=gs(()=>b("div",{class:"col-3 text-uppercase text-secondary fw-bold pt-1",style:{"font-size":"0.8em"}}," 📦 constructor ",-1)),Kg={class:"col"},Zg=["innerHTML"],Vg={class:"row"},Hg=gs(()=>b("div",{class:"col-3 text-uppercase text-secondary fw-bold pt-1",style:{"font-size":"0.8em"}}," 💡 property ",-1)),Yg={class:"col"},Qg=["innerHTML"],Jg={class:"row"},tm=gs(()=>b("div",{class:"col-3 text-uppercase text-secondary fw-bold pt-1",style:{"font-size":"0.8em"}}," ⚡ method ",-1)),em={class:"col"},nm=["innerHTML"],im={class:"row pb-2"},sm=gs(()=>b("div",{class:"col-3 text-uppercase text-secondary fw-bold pt-1",style:{"font-size":"0.8em"}}," 🌱️ returns ",-1)),rm={class:"col"},am=["innerHTML"];function om(e,t,n,i,s,r){const a=it("CodeBlock"),o=it("MarkdownBlock");return L(),U("div",zg,[Ug,b("div",jg,[b("h5",Gg,[b("code",{innerHTML:r.className},null,8,Wg)]),Z(a,{lang:"js",class:"mb-3"},{default:Yt(()=>[b("pre",null,"import { "+Ft(n.apiElement.name)+" } from '@camptocamp/ogc-client';",1)]),_:1}),b("div",qg,[Xg,b("div",Kg,[b("code",{class:"mb-2",innerHTML:r.constructorSignature},null,8,Zg),n.apiElement.constructor.description?(L(),fe(o,{key:0,class:"mb-2 small",text:n.apiElement.constructor.description},null,8,["text"])):wt("",!0)])]),(L(!0),U(Tt,null,We(n.apiElement.properties,l=>(L(),U("div",Vg,[Hg,b("div",Yg,[b("code",{class:"mb-2",innerHTML:r.formatProperty(l)},null,8,Qg),l.description?(L(),fe(o,{key:0,class:"mb-2 small",text:l.description},null,8,["text"])):wt("",!0)])]))),256)),(L(!0),U(Tt,null,We(n.apiElement.methods,l=>(L(),U("div",Jg,[tm,b("div",em,[b("code",{class:"mb-2",innerHTML:r.formatMethod(l)},null,8,nm),b("div",im,[sm,b("div",rm,[b("code",{innerHTML:r.formatMethodReturned(l)},null,8,am)])]),l.description?(L(),fe(o,{key:0,class:"mb-2 small",text:l.description},null,8,["text"])):wt("",!0)])]))),256)),Z(o,{class:"mb-3 mt-2 small",text:n.apiElement.description},null,8,["text"])])])}const lm=Ot(Bg,[["render",om],["__scopeId","data-v-be39622c"]]);const hm={name:"FunctionCard",components:{MarkdownBlock:oc,CodeBlock:Fo},props:{apiElement:Object},computed:{signature(){return Tn(lc(this.apiElement))},returned(){return Tn(wi(this.apiElement.return))}}},hc=e=>(Pi("data-v-f85c256e"),e=e(),Li(),e),um={class:"card mb-4"},cm=hc(()=>b("div",{class:"card-header text-uppercase small border-bottom-0 py-1 px-3"}," function ",-1)),dm={class:"card-body pb-0"},fm={class:"mb-3"},gm=["innerHTML"],mm={class:"row pb-2"},pm=hc(()=>b("div",{class:"col-3 text-uppercase text-secondary fw-bold pt-1",style:{"font-size":"0.8em"}}," 🌱 returns ",-1)),_m={class:"col"},ym=["innerHTML"];function vm(e,t,n,i,s,r){const a=it("CodeBlock"),o=it("MarkdownBlock");return L(),U("div",um,[cm,b("div",dm,[b("h5",fm,[b("code",{innerHTML:r.signature},null,8,gm)]),Z(a,{lang:"js",class:"mb-3"},{default:Yt(()=>[b("pre",null,"import { "+Ft(n.apiElement.name)+" } from '@camptocamp/ogc-client';",1)]),_:1}),b("div",mm,[pm,b("div",_m,[b("code",{innerHTML:r.returned},null,8,ym)])]),Z(o,{class:"small mt-2",text:n.apiElement.description},null,8,["text"])])])}const Em=Ot(hm,[["render",vm],["__scopeId","data-v-f85c256e"]]),xm={name:"ApiDescription",components:{FunctionCard:Em,ClassCard:lm},data:()=>({API:Pg})};function bm(e,t,n,i,s,r){const a=it("ClassCard"),o=it("FunctionCard");return L(),U("div",null,[(L(!0),U(Tt,null,We(e.API.exports,l=>(L(),U(Tt,null,[l.type==="Class"?(L(),fe(a,{key:0,"api-element":l},null,8,["api-element"])):wt("",!0),l.type==="Function"?(L(),fe(o,{key:1,"api-element":l},null,8,["api-element"])):wt("",!0)],64))),256))])}const Mm=Ot(xm,[["render",bm]]);const Cm={name:"LibName"},wm=e=>(Pi("data-v-7ef10a1b"),e=e(),Li(),e),Dm=wm(()=>b("span",null,"ogc-client",-1)),Tm=[Dm];function Fm(e,t,n,i,s,r){return L(),U("div",null,Tm)}const Am=Ot(Cm,[["render",Fm],["__scopeId","data-v-7ef10a1b"]]),Rm={name:"Docs",components:{CodeBlock:Fo,ApiDescription:Mm,LibName:Am},async mounted(){hljs.highlightAll()}},Im=b("h2",{class:"mb-4"},"Presentation",-1),Sm=b("a",{href:"https://www.ogc.org/docs/is"},"OGC standards.",-1),Pm=K0('<p> Its purpose is to helps you interact with them in a user-friendly and consistent way. </p><p>Its main features include:</p><ul><li> Support for <a href="https://www.ogc.org/standards/wfs">WFS</a>, <a href="https://www.ogc.org/standards/wms">WMS</a>, <a href="https://www.ogc.org/standards/wmts">WMTS</a> and <a href="https://ogcapi.ogc.org/">OGC API</a> protocols </li><li>Elaborate cache system to minimize network requests</li><li> Fast parsing of XML documents using <a href="https://github.com/rgrove/parse-xml">@rgrove/parse-xml</a></li><li> Detection of <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS">CORS</a>-related issues </li></ul><h2 class="mt-5 mb-4">Usage</h2>',4),Lm=b("p",null,"Then, use it like so:",-1),Om=b("pre",null,`import { WfsEndpoint } from '@camptocamp/ogc-client';

new WfsEndpoint("https://my.server.org/ows")
  .isReady()
  .then(
    (endpoint) => console.log(endpoint.getFeatureTypes())
  )
    `,-1),km=b("p",null," Please refer to the API section for more details on how to use each functionality. ",-1),Nm={class:"card text-bg-light mb-3"},$m=b("div",{class:"card-header"},"A note on text encoding",-1),Bm={class:"card-body"},zm=b("p",{class:"card-text"},[pt(" Even though "),b("strong",null,"UTF-8"),pt(" is the most common text encoding in the web, some services might respond with other encodings such as "),b("strong",null,"UTF-16"),pt(", "),b("strong",null,[b("a",{href:"https://en.wikipedia.org/wiki/ISO/IEC_8859-1"},"ISO-8859-1")]),pt(", etc. ")],-1),Um={class:"card-text"},jm=b("a",{href:"https://github.com/camptocamp/ogc-client/issues/new"},"open an issue",-1),Gm=b("h2",{class:"mt-5 mb-4"},"Why use it?",-1),Wm=b("p",null," Many libraries are able to leverage OGC protocols for various specialized tasks, for instance downloading data or rendering maps. Often times though, the application code has the responsibility to specify the version to use, the coordinate system, the bounding box to query, etc. ",-1),qm=b("a",{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS"},"CORS",-1),Xm=b("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/Cache"},"Cache API",-1),Km=b("ul",null,[b("li",null,[pt(" No GML geometry parsing: the "),b("a",{href:"https://openlayers.org/en/latest/apidoc/module-ol_format_GML32-GML32.html"},"OpenLayers GML parser"),pt(" offers extensive support of the GML format ")])],-1),Zm=b("h2",{class:"mt-5 mb-4"},"Examples",-1),Vm=b("h5",null,"Read a WMS layer extent",-1),Hm=b("pre",null,`import { WmsEndpoint } from '@camptocamp/ogc-client';

async function readExtent() {
  const endpoint = await new WmsEndpoint('https://my.server.org/ows').isReady();
  const layer = endpoint.getLayerByName();
  const extent = layer.boundingBoxes['EPSG:4326'];
}`,-1),Ym=b("h5",null,"Compute a WFS GetFeature url",-1),Qm=b("pre",null,`import { WfsEndpoint } from '@camptocamp/ogc-client';

async function getFeatureUrl() {
  const endpoint = await new WfsEndpoint('https://my.server.org/ows').isReady();
  const url = endpoint.getFeatureUrl('my:featureType', {
    asJson: true,
    maxFeature: 1000
  });
}`,-1),Jm=b("h5",null,"Query the first 10 items of an OGC API Records collection",-1),tp=b("pre",null,`import { OgcApiEndpoint } from '@camptocamp/ogc-client';

async function getFirstTenRecords() {
  const endpoint = await new OgcApiEndpoint('https://my.server.org/main')
  const firstCollection = (await endpoint.recordCollections)[0];
  return endpoint.getCollectionItems(firstCollection, 10, 0);
}`,-1),ep=b("h5",null,[pt(" Add a WMTS layer to an "),b("a",{href:"https://openlayers.org/"},"OpenLayers"),pt(" map ")],-1),np=b("pre",null,`import TileLayer from 'ol/layer/Tile';
import WMTS from 'ol/source/WMTS';
import { WmtsEndpoint } from '@camptocamp/ogc-client';

// create the OpenLayers map
// ...

async function addWmtsLayer() {
  const endpoint = await new WmtsEndpoint('https://my.server.org/wmts').isReady();
  const layer = endpoint.getLayers()[0];
  const matrixSet = layer.matrixSets[0];
  const tileGrid = await endpoint.getOpenLayersTileGrid(
    layer.name,
    matrixSet.identifier
  );
  const resourceUrl = layer.resourceUrls[0];
  const dimensions = endpoint.getDefaultDimensions(layer.name);
  const layer = new TileLayer({
    source: new WMTS({
      layer: layer.name,
      style: layer.defaultStyle,
      matrixSet: matrixSet.identifier,
      format: resourceUrl.format,
      url: resourceUrl.url,
      requestEncoding: resourceUrl.encoding,
      tileGrid,
      projection: matrixSet.crs,
      dimensions,
    }),
  });
  openLayersMap.addLayer(layer);
}`,-1),ip=b("h2",{class:"mt-5 mb-4"},"API",-1);function sp(e,t,n,i,s,r){const a=it("LibName"),o=it("CodeBlock"),l=it("ApiDescription");return L(),U("div",null,[Im,b("p",null,[Z(a),pt(" is a pure Javascript library made for interacting with geospatial web services relying on standard protocols, namely "),Sm]),Pm,b("p",null,[pt("First, install "),Z(a),pt(" in your project:")]),b("p",null,[Z(o,{lang:"sh"},{default:Yt(()=>[pt("$ npm install --save @camptocamp/ogc-client")]),_:1})]),Lm,b("p",null,[Z(o,{lang:"js"},{default:Yt(()=>[Om]),_:1})]),km,b("div",Nm,[$m,b("div",Bm,[zm,b("p",Um,[Z(a),pt(" will attempt to decode the responses using the information at its disposal, and in most case decoding should succeed. It may happen though that some unrecognized characters will remain; please "),jm,pt(" if that is the case! ")])])]),Gm,Wm,b("p",null,[Z(a),pt(" intends to assist applications in discovering OGC services and what they offer, without having to manually write code for parsing GetCapabilities documents for example. ")]),b("p",null,[pt(" When an network error is encountered, "),Z(a),pt(" will do an additional check to determine whether this is due to "),qm,pt(" limitations. This will help the application code in giving an appropriate feedback to the user, i.e. that the targeted resource is indeed reachable but does not allow cross-origin usage. ")]),b("p",null,[Z(a),pt(" also keeps a cache of all operations using the "),Xm,pt(", thus offering almost limitless storage while also purging expired cache entries regularly. By default, all cache entries are kept for one hour. ")]),b("p",null,[pt("What "),Z(a),pt(" currently does not do:")]),Km,Zm,Vm,b("p",null,[Z(o,{lang:"js"},{default:Yt(()=>[Hm]),_:1})]),Ym,b("p",null,[Z(o,{lang:"js"},{default:Yt(()=>[Qm]),_:1})]),Jm,b("p",null,[Z(o,{lang:"js"},{default:Yt(()=>[tp]),_:1})]),ep,b("p",null,[Z(o,{lang:"js"},{default:Yt(()=>[np]),_:1})]),ip,Z(l)])}const rp=Ot(Rm,[["render",sp]]);const ap={name:"LibLogo"},op=e=>(Pi("data-v-1cf83fa1"),e=e(),Li(),e),lp=op(()=>b("span",null,"ogc-client",-1)),hp=[lp];function up(e,t,n,i,s,r){return L(),U("div",null,hp)}const cp=Ot(ap,[["render",up],["__scopeId","data-v-1cf83fa1"]]);const dp={name:"InfoList",props:{info:Object},computed:{propList(){return Object.keys(this.info).map(e=>({title:`${e.substring(0,1).toUpperCase()}${e.substring(1)}`,description:this.info[e]instanceof Object?this.info[e]:`${this.info[e]}`}))}}},fp=e=>(Pi("data-v-b2217494"),e=e(),Li(),e),gp={class:"small"},mp={class:"d-flex flex-row",style:{gap:"0.5rem"}},pp=fp(()=>b("div",{class:"flex-grow-1",style:{"border-top":"2px solid #e0e0e0","margin-top":"0.7em","min-width":"6px"}},null,-1)),_p={key:0};function yp(e,t,n,i,s,r){const a=it("InfoList",!0);return L(),U("dl",gp,[(L(!0),U(Tt,null,We(r.propList,o=>(L(),U(Tt,null,[b("dt",mp,[b("span",null,Ft(o.title),1),pp]),b("dd",null,[typeof o.description=="string"?(L(),U("span",_p,Ft(o.description),1)):(L(),fe(a,{key:1,info:o.description},null,8,["info"]))])],64))),256))])}const zn=Ot(dp,[["render",yp],["__scopeId","data-v-b2217494"]]),vp={name:"TreeItem",props:["item"],computed:{hasChildren(){return this.item instanceof Object&&"children"in this.item},children(){return this.item.children}}},Ep={key:0,style:{"margin-left":"1rem"}},xp=b("div",{class:"spacer-s"},null,-1);function bp(e,t,n,i,s,r){const a=it("TreeItem",!0);return L(),U("div",null,[Ln(e.$slots,"default",{item:n.item},()=>[pt(" tree item ")]),r.hasChildren?(L(),U("div",Ep,[(L(!0),U(Tt,null,We(r.children,o=>(L(),U("div",null,[xp,Z(a,{item:o},{default:Yt(({item:l})=>[Ln(e.$slots,"default",{item:l})]),_:2},1032,["item"])]))),256))])):wt("",!0)])}const Mp=Ot(vp,[["render",bp]]),Cp={name:"ItemsTree",components:{TreeItem:Mp},props:{items:Array},mounted(){}},wp={class:"bg-dark small text-white p-2 rounded-1"};function Dp(e,t,n,i,s,r){const a=it("TreeItem");return L(),U("div",wp,[(L(!0),U(Tt,null,We(n.items,o=>(L(),U("div",null,[Z(a,{item:o},{default:Yt(({item:l})=>[Ln(e.$slots,"default",{item:l})]),_:2},1032,["item"])]))),256))])}const jr=Ot(Cp,[["render",Dp]]),Tp={name:"WmsLayerInfo",components:{InfoList:zn},props:{layer:Object,endpointUrl:String},data:()=>({selectedStyle:"",selectedCrs:""}),watch:{layer:{immediate:!0,handler(e){this.selectedStyle=e.styles.length>0?e.styles[0].name:"",this.selectedCrs=e.availableCrs[0]}}},computed:{layerInfo(){return{name:this.layer.name,...this.layer.abstract&&{abstract:this.layer.abstract},...this.layer.attribution&&this.layer.attribution.title&&{attribution:this.layer.attribution.title}}},fullMapSrc(){if(!(this.selectedCrs in this.layer.boundingBoxes))return"";const e=this.layer.boundingBoxes[this.selectedCrs],t=(e[2]-e[0])/(e[3]-e[1]),n=500,i=Math.round(t>1?n:n*t),s=Math.round(i/t),r=new URL(this.endpointUrl);return r.searchParams.set("SERVICE","WMS"),r.searchParams.set("REQUEST","GetMap"),r.searchParams.set("LAYERS",this.layer.name),r.searchParams.set("STYLES",this.selectedStyle),r.searchParams.set("WIDTH",i.toString()),r.searchParams.set("HEIGHT",s.toString()),r.searchParams.set("FORMAT","image/png"),r.searchParams.set("CRS",this.selectedCrs),r.searchParams.set("BBOX",e.join(",")),r.toString()}}},Fp={class:"d-flex flex-row justify-content-between"},Ap=["value"],Rp=["src"];function Ip(e,t,n,i,s,r){const a=it("InfoList");return L(),U("div",null,[b("p",null,Ft(n.layer.title),1),Z(a,{info:r.layerInfo},null,8,["info"]),b("div",Fp,[b("label",null,[pt(" Selected style:  "),gn(b("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>e.selectedStyle=o),class:"form-select d-inline-block w-auto"},[(L(!0),U(Tt,null,We(n.layer.styles,o=>(L(),U("option",{value:o.name},Ft(o.title||o.name),9,Ap))),256))],512),[[ur,e.selectedStyle]])]),b("label",null,[pt(" Selected CRS:  "),gn(b("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>e.selectedCrs=o),class:"form-select d-inline-block w-auto"},[(L(!0),U(Tt,null,We(n.layer.availableCrs,o=>(L(),U("option",null,Ft(o),1))),256))],512),[[ur,e.selectedCrs]])])]),b("img",{src:r.fullMapSrc,alt:"layer preview"},null,8,Rp)])}const Sp=Ot(Tp,[["render",Ip]]);let Pp=0;function Lp(){return Pp++}function Gr(e,t,n){return new Promise((i,s)=>{const r=Lp(),a={requestId:r,taskName:e,params:n};t===null?globalThis.dispatchEvent(new CustomEvent("ogc-client.request",{detail:a})):t.postMessage(a);const o=u=>{u.requestId===r&&(t===null?globalThis.removeEventListener("message",l):t.removeEventListener("message",h),"error"in u?s(u.error):i(u.response))},l=u=>o(u.detail),h=u=>o(u.data);t===null?globalThis.addEventListener("ogc-client.response",l):t.addEventListener("message",h)})}function Op(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}/*! @rgrove/parse-xml v4.1.0 | ISC License | Copyright Ryan Grove */var Ao=Object.defineProperty,kp=Object.getOwnPropertyDescriptor,Np=Object.getOwnPropertyNames,$p=Object.prototype.hasOwnProperty,Bp=(e,t)=>{for(var n in t)Ao(e,n,{get:t[n],enumerable:!0})},zp=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Np(t))!$p.call(e,s)&&s!==n&&Ao(e,s,{get:()=>t[s],enumerable:!(i=kp(t,s))||i.enumerable});return e},Up=e=>zp(Ao({},"__esModule",{value:!0}),e),uc={};Bp(uc,{XmlCdata:()=>gc,XmlComment:()=>mc,XmlDeclaration:()=>pc,XmlDocument:()=>_c,XmlDocumentType:()=>yc,XmlElement:()=>Wr,XmlError:()=>vc,XmlNode:()=>lt,XmlProcessingInstruction:()=>ja,XmlText:()=>Io,parseXml:()=>Jp});var jp=Up(uc),Mn="",Gp=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Wp=class{constructor(e){if(this.k=this.q(e,!0),this.d=0,this.length=e.length,this.n=this.k!==this.length,this.m=e,this.n){let t=[];for(let n=0,i=0;i<this.k;++i)t[i]=n,n+=e.codePointAt(n)>65535?2:1;this.y=t}}get z(){return this.d>=this.k}q(e,t=this.n){return t?e.replace(Gp,"_").length:e.length}g(e=1){this.d=Math.min(this.k,this.d+e)}i(e=this.d){var t;return this.n?(t=this.y[e])!=null?t:1/0:e}F(e=1){let t=this.h(e);return this.g(e),t}G(e){if(!e.sticky)throw new Error('`regex` must have a sticky flag ("y")');e.lastIndex=this.i();let t=e.exec(this.m);if(t===null||t.length===0)return Mn;let n=t[0];return this.g(this.q(n)),n}v(e){let t,n=Mn;for(;(t=this.h())&&e(t);)n+=t,this.g();return n}Q(e){if(this.b(e))return e;if(this.n){let{length:t}=e,n=this.q(e);if(n!==t&&e===this.h(n))return this.g(n),e}return Mn}b(e){let{length:t}=e;return this.h(t)===e?(this.g(t),e):Mn}A(e){let t=this.m.slice(this.i()),n=t.search(e);if(n<=0)return Mn;let i=t.slice(0,n);return this.g(this.q(i)),i}t(e){let{m:t}=this,n=this.i(),i=t.indexOf(e,n);if(i<=0)return Mn;let s=t.slice(n,i);return this.g(this.q(s)),s}h(e=1){let{d:t,n,m:i}=this;return n?t>=this.k?Mn:i.slice(this.i(t),this.i(t+e)):i.slice(t,t+e)}o(e=0){this.d=e>=0?Math.min(this.k,e):Math.max(0,this.d+e)}},qp=/[^"&<]+/y,Xp=/[^'&<]+/y,Kp=/\r\n|[\n\r\t]/g,Zp=/<|&|]]>/,Vp=Object.freeze(Object.assign(Object.create(null),{amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}));function cc(e){let t=Ro(e);return t>=97&&t<=122||t>=65&&t<=90||t>=48&&t<=57||t===45||t===46||t===183||t>=768&&t<=879||t>=8255&&t<=8256||dc(e,t)}function dc(e,t=Ro(e)){return t>=97&&t<=122||t>=65&&t<=90||t===58||t===95||t>=192&&t<=214||t>=216&&t<=246||t>=248&&t<=767||t>=880&&t<=893||t>=895&&t<=8191||t>=8204&&t<=8205||t>=8304&&t<=8591||t>=11264&&t<=12271||t>=12289&&t<=55295||t>=63744&&t<=64975||t>=65008&&t<=65533||t>=65536&&t<=983039}function Hp(e){return e==="#"||cc(e)}function Yp(e){let t=Ro(e);return t===32||t===9||t===10||t===13}function Ql(e){return e===9||e===10||e===13||e>=32&&e<=55295||e>=57344&&e<=65533||e>=65536&&e<=1114111}function Ro(e){return e.codePointAt(0)||-1}var fc=class{constructor(){this.parent=null,this.start=-1,this.end=-1}get document(){var e,t;return(t=(e=this.parent)==null?void 0:e.document)!=null?t:null}get isRootNode(){return this.parent!==null&&this.parent===this.document&&this.type===fc.TYPE_ELEMENT}get preserveWhitespace(){var e;return!!((e=this.parent)!=null&&e.preserveWhitespace)}get type(){return""}toJSON(){let e={type:this.type};return this.isRootNode&&(e.isRootNode=!0),this.preserveWhitespace&&(e.preserveWhitespace=!0),this.start!==-1&&(e.start=this.start,e.end=this.end),e}},lt=fc;lt.TYPE_CDATA="cdata";lt.TYPE_COMMENT="comment";lt.TYPE_DOCUMENT="document";lt.TYPE_DOCUMENT_TYPE="doctype";lt.TYPE_ELEMENT="element";lt.TYPE_PROCESSING_INSTRUCTION="pi";lt.TYPE_TEXT="text";lt.TYPE_XML_DECLARATION="xmldecl";var Io=class extends lt{constructor(e=""){super(),this.text=e}get type(){return lt.TYPE_TEXT}toJSON(){return Object.assign(lt.prototype.toJSON.call(this),{text:this.text})}},gc=class extends Io{get type(){return lt.TYPE_CDATA}},mc=class extends lt{constructor(e=""){super(),this.content=e}get type(){return lt.TYPE_COMMENT}toJSON(){return Object.assign(lt.prototype.toJSON.call(this),{content:this.content})}},pc=class extends lt{constructor(e,t,n){super(),this.version=e,this.encoding=t??null,this.standalone=n??null}get type(){return lt.TYPE_XML_DECLARATION}toJSON(){let e=lt.prototype.toJSON.call(this);e.version=this.version;for(let t of["encoding","standalone"])this[t]!==null&&(e[t]=this[t]);return e}},Wr=class extends lt{constructor(e,t=Object.create(null),n=[]){super(),this.name=e,this.attributes=t,this.children=n}get isEmpty(){return this.children.length===0}get preserveWhitespace(){let e=this;for(;e instanceof Wr;){if("xml:space"in e.attributes)return e.attributes["xml:space"]==="preserve";e=e.parent}return!1}get text(){return this.children.map(e=>"text"in e?e.text:"").join("")}get type(){return lt.TYPE_ELEMENT}toJSON(){return Object.assign(lt.prototype.toJSON.call(this),{name:this.name,attributes:this.attributes,children:this.children.map(e=>e.toJSON())})}},_c=class extends lt{constructor(e=[]){super(),this.children=e}get document(){return this}get root(){for(let e of this.children)if(e instanceof Wr)return e;return null}get text(){return this.children.map(e=>"text"in e?e.text:"").join("")}get type(){return lt.TYPE_DOCUMENT}toJSON(){return Object.assign(lt.prototype.toJSON.call(this),{children:this.children.map(e=>e.toJSON())})}},yc=class extends lt{constructor(e,t,n,i){super(),this.name=e,this.publicId=t??null,this.systemId=n??null,this.internalSubset=i??null}get type(){return lt.TYPE_DOCUMENT_TYPE}toJSON(){let e=lt.prototype.toJSON.call(this);e.name=this.name;for(let t of["publicId","systemId","internalSubset"])this[t]!==null&&(e[t]=this[t]);return e}},vc=class extends Error{constructor(e,t,n){let i=1,s="",r=1;for(let l=0;l<t;++l){let h=n[l];h===`
`?(i=1,s="",r+=1):(i+=1,s+=h)}let a=n.indexOf(`
`,t);s+=a===-1?n.slice(t):n.slice(t,a);let o=0;s.length>50&&(i<40?s=s.slice(0,50):(o=i-20,s=s.slice(o,i+30))),super(`${e} (line ${r}, column ${i})
  ${s}
`+" ".repeat(i-o+1)+`^
`),this.column=i,this.excerpt=s,this.line=r,this.name="XmlError",this.pos=t}},ja=class extends lt{constructor(e,t=""){super(),this.name=e,this.content=t}get type(){return lt.TYPE_PROCESSING_INSTRUCTION}toJSON(){return Object.assign(lt.prototype.toJSON.call(this),{name:this.name,content:this.content})}},fa="",Qp=class{constructor(t,n={}){let i=this.document=new _c,s=this.c=new Wp(t);if(this.l=i,this.f=n,this.f.includeOffsets&&(i.start=0,i.end=t.length),s.b("\uFEFF"),this.H(),!this.B())throw this.a("Root element is missing or invalid");for(;this.w(););if(!s.z)throw this.a("Extra content at the end of the document")}j(t,n){return t.parent=this.l,this.f.includeOffsets&&(t.start=this.c.i(n),t.end=this.c.i()),this.l.children.push(t),!0}x(t,n){let{children:i}=this.l,{length:s}=i;if(t=Ss(t),s>0){let r=i[s-1];if((r==null?void 0:r.type)===lt.TYPE_TEXT){let a=r;return a.text+=t,this.f.includeOffsets&&(a.end=this.c.i()),!0}}return this.j(new Io(t),n)}I(){let t=Object.create(null);for(;this.e();){let n=this.r();if(!n)break;let i=this.u()&&this.J();if(i===!1)throw this.a("Attribute value expected");if(n in t)throw this.a(`Duplicate attribute: ${n}`);if(n==="xml:space"&&i!=="default"&&i!=="preserve")throw this.a('Value of the `xml:space` attribute must be "default" or "preserve"');t[n]=i}if(this.f.sortAttributes){let n=Object.keys(t).sort(),i=Object.create(null);for(let s=0;s<n.length;++s){let r=n[s];i[r]=t[r]}t=i}return t}J(){let{c:t}=this,n=t.h();if(n!=='"'&&n!=="'")return!1;t.g();let i,s=!1,r=fa,a=n==='"'?qp:Xp;t:for(;!t.z;)switch(i=t.G(a),i&&(this.p(i),r+=i.replace(Kp," ")),t.h()){case n:s=!0;break t;case"&":r+=this.C();continue;case"<":throw this.a("Unescaped `<` is not allowed in an attribute value");case fa:break t}if(!s)throw this.a("Unclosed attribute");return t.g(),r}K(){let{c:t}=this,n=t.d;if(!t.b("<![CDATA["))return!1;let i=t.t("]]>");if(this.p(i),!t.b("]]>"))throw this.a("Unclosed CDATA section");return this.f.preserveCdata?this.j(new gc(Ss(i)),n):this.x(i,n)}L(){let{c:t}=this,n=t.d,i=t.A(Zp);if(!i)return!1;if(this.p(i),t.h(3)==="]]>")throw this.a("Element content may not contain the CDATA section close delimiter `]]>`");return this.x(i,n)}D(){let{c:t}=this,n=t.d;if(!t.b("<!--"))return!1;let i=t.t("--");if(this.p(i),!t.b("-->"))throw t.h(2)==="--"?this.a("The string `--` isn't allowed inside a comment"):this.a("Unclosed comment");return this.f.preserveComments?this.j(new mc(Ss(i)),n):!0}M(){let t=this.c.d,n=this.C();return n?this.x(n,t):!1}N(){let{c:t}=this,n=t.d;if(!t.b("<!DOCTYPE"))return!1;let i=this.e()&&this.r();if(!i)throw this.a("Expected a name");let s,r;if(this.e()){if(t.b("PUBLIC")){if(s=this.e()&&this.O(),s===!1)throw this.a("Expected a public identifier");this.e()}if(s!==void 0||t.b("SYSTEM")){if(this.e(),r=this.s(),r===!1)throw this.a("Expected a system identifier");this.e()}}let a;if(t.b("[")){if(a=t.A(/\][\x20\t\r\n]*>/),!t.b("]"))throw this.a("Unclosed internal subset");this.e()}if(!t.b(">"))throw this.a("Unclosed doctype declaration");return this.f.preserveDocumentType?this.j(new yc(i,s,r,a),n):!0}B(){let{c:t}=this,n=t.d;if(!t.b("<"))return!1;let i=this.r();if(!i)return t.o(n),!1;let s=this.I(),r=!!t.b("/>"),a=new Wr(i,s);if(a.parent=this.l,!r){if(!t.b(">"))throw this.a(`Unclosed start tag for element \`${i}\``);this.l=a;do this.L();while(this.B()||this.M()||this.K()||this.E()||this.D());let o=t.d,l;if(!t.b("</")||!(l=this.r())||l!==i)throw t.o(o),this.a(`Missing end tag for element ${i}`);if(this.e(),!t.b(">"))throw this.a(`Unclosed end tag for element ${i}`);this.l=a.parent}return this.j(a,n)}u(){return this.e(),this.c.b("=")?(this.e(),!0):!1}w(){return this.D()||this.E()||this.e()}r(){return dc(this.c.h())?this.c.v(cc):fa}E(){let{c:t}=this,n=t.d;if(!t.b("<?"))return!1;let i=this.r();if(i){if(i.toLowerCase()==="xml")throw t.o(n),this.a("XML declaration isn't allowed here")}else throw this.a("Invalid processing instruction");if(!this.e()){if(t.b("?>"))return this.j(new ja(i),n);throw this.a("Whitespace is required after a processing instruction name")}let s=t.t("?>");if(this.p(s),!t.b("?>"))throw this.a("Unterminated processing instruction");return this.j(new ja(i,Ss(s)),n)}H(){let{c:t}=this,n=t.d;for(this.P();this.w(););if(this.N())for(;this.w(););return n<t.d}O(){let t=this.c.d,n=this.s();if(n!==!1&&!/^[-\x20\r\na-zA-Z0-9'()+,./:=?;!*#@$_%]*$/.test(n))throw this.c.o(t),this.a("Invalid character in public identifier");return n}C(){let{c:t}=this;if(!t.b("&"))return!1;let n=t.v(Hp);if(t.F()!==";")throw this.a("Unterminated reference (a reference must end with `;`)");let i;if(n[0]==="#"){let s=n[1]==="x"?parseInt(n.slice(2),16):parseInt(n.slice(1),10);if(isNaN(s))throw this.a("Invalid character reference");if(!Ql(s))throw this.a("Character reference resolves to an invalid character");i=String.fromCodePoint(s)}else if(i=Vp[n],i===void 0){let{ignoreUndefinedEntities:s,resolveUndefinedEntity:r}=this.f,a=`&${n};`;if(r){let o=r(a);if(o!=null){let l=typeof o;if(l!=="string")throw new TypeError(`\`resolveUndefinedEntity()\` must return a string, \`null\`, or \`undefined\`, but returned a value of type ${l}`);return o}}if(s)return a;throw t.o(-a.length),this.a(`Named entity isn't defined: ${a}`)}return i}s(){let{c:t}=this,n=t.b('"')||t.b("'");if(!n)return!1;let i=t.t(n);if(this.p(i),!t.b(n))throw this.a("Missing end quote");return i}e(){return!!this.c.v(Yp)}P(){let{c:t}=this,n=t.d;if(!t.b("<?xml"))return!1;if(!this.e())throw this.a("Invalid XML declaration");let i=!!t.b("version")&&this.u()&&this.s();if(i===!1)throw this.a("XML version is missing or invalid");if(!/^1\.[0-9]+$/.test(i))throw this.a("Invalid character in version number");let s,r;if(this.e()&&(s=!!t.b("encoding")&&this.u()&&this.s(),s&&this.e(),r=!!t.b("standalone")&&this.u()&&this.s(),r)){if(r!=="yes"&&r!=="no")throw this.a('Only "yes" and "no" are permitted as values of `standalone`');this.e()}if(!t.b("?>"))throw this.a("Invalid or unclosed XML declaration");return this.f.preserveXmlDeclaration?this.j(new pc(i,s||void 0,r||void 0),n):!0}a(t){let{c:n}=this;return new vc(t,n.d,n.m)}p(t){let{length:n}=t;for(let i=0;i<n;++i){let s=t.codePointAt(i);if(!Ql(s))throw this.c.o(-([...t].length-i)),this.a("Invalid character");s>65535&&(i+=1)}}};function Ss(e){let t=0;for(;(t=e.indexOf("\r",t))!==-1;)e=e[t+1]===`
`?e.slice(0,t)+e.slice(t+1):e.slice(0,t)+`
`+e.slice(t+1);return e}function Jp(e,t){return new Qp(e,t).document}class t1 extends Error{constructor(t){super(t)}}function e1(e){let t=null;try{t=jp.parseXml(e)}catch(n){throw new t1(n.message)}return t}function dr(e){const t=e.indexOf(":");return t>-1?e.substr(t+1):e}function Jl(e){return e.children[0]}function n1(e){return e.name||""}function th(e,t,n=!1){const i=dr(t);function s(r,a){return dr(n1(a))===i&&r.push(a),n&&Array.isArray(a.children)?[...r,...a.children.reduce(s,[])]:r}return e&&Array.isArray(e.children)?e.children.reduce(s,[]):[]}function Cn(e,t){return e&&e.attributes[t]||""}class kn extends Error{constructor(t,n,i){super(t),this.message=t,this.httpStatus=n,this.isCrossOriginRelated=i}}const eh=["utf-8","utf-16","iso-8859-1"],nh="utf-8";function i1(e){const t=/charset=([^;]+)/.exec(e);return t?t[1]:null}function s1(e,t){const n=t?i1(t):null,i=n?[n,...eh]:eh;for(const s of i)try{return new TextDecoder(s,{fatal:!0}).decode(e)}catch{}return console.warn(`[ogc-client] XML document encoding could not be determined, falling back to ${nh}.`),new TextDecoder(nh).decode(e)}const Ps=new Map;let r1={};function So(){return r1}function a1(e,t="GET"){const n=`${t}#${e}`;if(Ps.has(n))return Ps.get(n);const i=fetch(e,{...So(),method:t}).catch(s=>s).then(s=>(Ps.delete(n),s));return Ps.set(n,i),i.then(s=>{if(s instanceof Error)throw s;return s})}function ih(e){return a1(e).catch(()=>fetch(e,{...So(),method:"HEAD",mode:"no-cors"}).catch(t=>{throw new kn(`Fetching the document failed either due to network errors or unreachable host, error is: ${t.message}`,0,!1)}).then(()=>{throw new kn("The document could not be fetched due to CORS limitations",0,!0)})).then(async t=>{if(!t.ok){const s=await t.text();throw new kn(`Received an error with code ${t.status}: ${s}`,t.status,!1)}const n=await t.arrayBuffer(),i=t.headers.get("Content-Type");return s1(n,i)}).then(t=>e1(t))}function Un(e,t){const n=e.match(/(https?%3A%2F%2F[^/]+)$/);if(n){const o=n[1],l=Un(decodeURIComponent(o),t);return e.replace(o,encodeURIComponent(l))}const i=new URL(e),s=Object.keys(t),r=s.map(o=>o.toLowerCase()),a=[];for(const o of i.searchParams.keys())r.indexOf(o.toLowerCase())>-1&&a.push(o);return a.map(o=>i.searchParams.delete(o)),s.forEach(o=>i.searchParams.set(o,t[o]===!0?"":t[o])),i.toString()}let ga;function qr(){return ga||(ga=new Worker(new URL(""+new URL("worker-c0f2f57d.js",import.meta.url).href,self.location),{type:"module"})),ga}function o1(e){return Gr("parseWmsCapabilities",qr(),{url:e})}function l1(e){return Gr("parseWfsCapabilities",qr(),{url:e})}function h1(e,t,n){return Gr("queryWfsFeatureTypeDetails",qr(),{url:e,serviceVersion:t,featureTypeFull:n})}function u1(e){return Gr("parseWmtsCapabilities",qr(),{url:e})}let c1=1e3*60*60;function d1(){return c1}let Xn;function Xr(){return Xn!==void 0?Xn:"caches"in globalThis?(Xn=caches.open("ogc-client").catch(e=>(console.info("[ogc-client] Cache could not be accessed for the following reason:",e),null)),Xn):(Xn=Promise.resolve(null),Xn)}async function f1(e,...t){const n=await Xr();if(!n)return;const i="https://cache/"+t.join("/");await n.put(i,new Response(JSON.stringify(e),{headers:{"x-expiry":(Date.now()+d1()).toString(10)}}))}async function g1(...e){const t=await Xr();if(!t)return;const n="https://cache/"+e.join("/");return t.match(n).then(i=>!!i&&parseInt(i.headers.get("x-expiry"))>Date.now())}async function m1(...e){const t=await Xr();if(!t)return;const n="https://cache/"+e.join("/"),i=await t.match(n);return i?i.clone().json():null}const Ls=new Map;async function Hi(e,...t){if(await p1(),await g1(...t))return m1(...t);const n=t.join("#");if(Ls.has(n))return Ls.get(n);const i=e();i instanceof Promise&&(i.then(()=>Ls.delete(n)),Ls.set(n,i));const s=await i;return await f1(s,...t),s}async function p1(){const e=await Xr();if(!e)return;const t=await e.keys();for(let n of t){const i=await e.match(n);parseInt(i.headers.get("x-expiry"))<=Date.now()&&await e.delete(n)}}let _1=class{constructor(t){const n=Un(t,{SERVICE:"WMS",REQUEST:"GetCapabilities"});this._capabilitiesPromise=Hi(()=>o1(n),"WMS","CAPABILITIES",n).then(({info:i,layers:s,version:r})=>{this._info=i,this._layers=s,this._version=r})}isReady(){return this._capabilitiesPromise.then(()=>this)}getServiceInfo(){return this._info}getLayers(){function t(n){return{title:n.title,name:n.name,abstract:n.abstract,..."children"in n&&{children:n.children.map(t)}}}return this._layers.map(t)}getLayerByName(t){let n=null;function i(s){if(n===null){if(s.name===t){n=s;return}"children"in s&&s.children.map(i)}}return this._layers.map(i),n}getVersion(){return this._version}};const y1={name:"WmsEndpoint",components:{WmsLayerInfo:Sp,ItemsTree:jr,InfoList:zn},data:()=>({loading:!1,error:null,endpoint:null,url:"https://ahocevar.com/geoserver/wms",selectedLayer:null}),computed:{loaded(){return this.endpoint&&this.loading===!1&&this.error===null}},methods:{async createEndpoint(){this.error=null,this.loading=!0,this.endpoint=new _1(this.url);try{await this.endpoint.isReady()}catch(e){this.error=e.message}this.loading=!1},handleLayerClick(e,t){this.selectedLayer=this.endpoint.getLayerByName(e.name),t.preventDefault()}}},v1={class:"d-flex flex-row my-4"},E1={key:0},x1={key:1},b1=["title"],M1=["onClick"],C1={key:1},w1={key:2};function D1(e,t,n,i,s,r){const a=it("InfoList"),o=it("ItemsTree"),l=it("WmsLayerInfo");return L(),U("div",null,[b("div",v1,[gn(b("input",{class:"form-control me-3",placeholder:"Enter a WMS service URL here","onUpdate:modelValue":t[0]||(t[0]=h=>e.url=h)},null,512),[[Ur,e.url]]),b("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=h=>r.createEndpoint())}," Analyze ")]),e.loading?(L(),U("div",E1,"Loading...")):wt("",!0),r.loaded?(L(),U("div",x1,[Z(a,{info:e.endpoint.getServiceInfo()},null,8,["info"]),Z(o,{items:e.endpoint.getLayers(),style:{"min-height":"200px"}},{default:Yt(({item:h})=>[b("div",{title:h.abstract},[h.name?(L(),U("a",{key:0,href:"",onClick:u=>r.handleLayerClick(h,u),class:"link-light"},Ft(h.title),9,M1)):(L(),U("span",C1,Ft(h.title),1))],8,b1)]),_:1},8,["items"]),e.selectedLayer?(L(),fe(l,{key:0,layer:e.selectedLayer,"endpoint-url":e.url},null,8,["layer","endpoint-url"])):wt("",!0)])):wt("",!0),e.error?(L(),U("div",w1,"Error: "+Ft(e.error),1)):wt("",!0)])}const T1=Ot(y1,[["render",D1]]),F1={name:"WfsFeatureTypeInfo",components:{InfoList:zn},props:{featureType:Object,endpoint:Object},data:()=>({loadingValues:!1,featurePropsDetails:null}),computed:{featureTypeInfo(){return{..."title"in this.featureType&&{title:this.featureType.title},..."abstract"in this.featureType&&{abstract:this.featureType.abstract},CRS:[this.featureType.defaultCrs,...this.featureType.otherCrs].join(", "),..."objectCount"in this.featureType&&{"object count":this.featureType.objectCount},..."geometryName"in this.featureType&&{"geometry name":this.featureType.geometryName},..."geometryType"in this.featureType&&{"geometry type":this.featureType.geometryType}}},featureProperties(){return{...this.featureType.properties}},uniqueValues(){return this.featurePropsDetails===null?{}:Object.keys(this.featurePropsDetails).reduce((e,t)=>({...e,[t]:this.featurePropsDetails[t].uniqueValues.sort((n,i)=>i.count-n.count).filter((n,i)=>i<=8).map((n,i)=>i<8?`${n.value} (${n.count})`:"...").join(", ")}),{})}},methods:{async loadValues(){this.loadingValues=!0,this.featurePropsDetails=await this.endpoint.getFeatureTypePropDetails(this.featureType.name),this.loadingValues=!1}},watch:{featureType(){this.loadingValues=!1,this.featurePropsDetails=null}}},A1=b("p",null,"Properties",-1),R1={key:0},I1={key:1},S1={key:2},P1=b("p",null,"Unique values",-1);function L1(e,t,n,i,s,r){const a=it("InfoList");return L(),U("div",null,[b("p",null,Ft(n.featureType.name),1),Z(a,{info:r.featureTypeInfo},null,8,["info"]),A1,Z(a,{info:r.featureProperties},null,8,["info"]),e.featurePropsDetails===null&&!e.loadingValues?(L(),U("div",R1,[b("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=o=>r.loadValues())}," Load unique values ")])):wt("",!0),e.loadingValues?(L(),U("div",I1,"Loading unique values...")):wt("",!0),e.featurePropsDetails!==null?(L(),U("div",S1,[P1,Z(a,{info:r.uniqueValues},null,8,["info"])])):wt("",!0)])}const O1=Ot(F1,[["render",L1]]);function k1(e,t,n,i){const{name:s,title:r,abstract:a,defaultCrs:o,otherCrs:l,outputFormats:h,latLonBoundingBox:u}=e,c=i.startsWith("2.0")?"numberMatched":"numberOfFeatures",d=parseInt(Cn(Jl(n),c)),f=th(Jl(t),"complexType",!0)[0],g=th(f,"element",!0),m=g.filter(M=>Cn(M,"type").startsWith("xsd:")).reduce((M,x)=>({...M,[Cn(x,"name")]:N1(Cn(x,"type"))}),{}),_=g.filter(M=>Cn(M,"type").startsWith("gml:"))[0],v=_?Cn(_,"name"):void 0,E=_?$1(Cn(_,"type")):void 0;return{name:s,...r&&{title:r},...a&&{abstract:a},...u&&{boundingBox:u},...o&&{defaultCrs:o},...l&&{otherCrs:l},...h&&{outputFormats:h},properties:m,...v&&{geometryName:v},...E&&{geometryType:E},...!Number.isNaN(d)&&{objectCount:d}}}function N1(e){switch(e.indexOf(":")>-1?e.substr(e.indexOf(":")+1):e){case"string":return"string";case"boolean":return"boolean";case"float":case"double":case"decimal":return"float";case"long":case"byte":case"integer":case"int":case"positiveInteger":case"negativeInteger":case"nonPositiveInteger":case"nonNegativeInteger":case"short":case"unsignedLong":case"unsignedInt":case"unsignedShort":case"unsignedByte":return"integer";default:return"string"}}function $1(e){switch(e.indexOf(":")>-1?e.substr(e.indexOf(":")+1):e){case"PointPropertyType":return"point";case"MultiPointPropertyType":return"multipoint";case"CurvePropertyType":case"LineStringPropertyType":return"linestring";case"MultiCurvePropertyType":case"MultiLineStringPropertyType":return"linestring";case"PolygonPropertyType":case"SurfacePropertyType":return"polygon";case"MultiPolygonPropertyType":case"MultiSurfacePropertyType":return"multipolygon";default:return"unknown"}}function sh(e,t,n,i,s,r,a,o,l,h){const u=t==="2.0.0"?"TYPENAMES":"TYPENAME",c=t==="2.0.0"?"COUNT":"MAXFEATURES",d={SERVICE:"WFS",REQUEST:"GetFeature",VERSION:t,[u]:n};if(i!==void 0&&(d.OUTPUTFORMAT=i),r!==void 0&&(d.PROPERTYNAME=r.join(",")),a?(d.RESULTTYPE="hits",d[c]="1"):s!==void 0&&(d[c]=s.toString(10)),o&&(d.SRSNAME=o),l){const f=l.join(",");d.BBOX=h?`${f},${h}`:f}return Un(e,d)}function B1(e,t,n){return Un(e,{SERVICE:"WFS",REQUEST:"DescribeFeatureType",VERSION:t,[t==="2.0.0"?"TYPENAMES":"TYPENAME"]:n})}let z1=class{constructor(t){this._capabilitiesUrl=Un(t,{SERVICE:"WFS",REQUEST:"GetCapabilities"}),this._capabilitiesPromise=Hi(()=>l1(this._capabilitiesUrl),"WFS","CAPABILITIES",this._capabilitiesUrl).then(({info:n,featureTypes:i,version:s})=>{this._info=n,this._featureTypes=i,this._version=s})}isReady(){return this._capabilitiesPromise.then(()=>this)}getServiceInfo(){return this._info}getFeatureTypes(){return this._featureTypes.map(t=>({name:t.name,..."title"in t&&{title:t.title},..."abstract"in t&&{abstract:t.abstract},..."latLonBoundingBox"in t&&{boundingBox:t.latLonBoundingBox}}))}_getFeatureTypeByName(t){if(!this._featureTypes)return null;const n=dr(t)!==t;return this._featureTypes.find(i=>n?i.name===t:dr(i.name)===t)||null}getFeatureTypeSummary(t){const n=this._getFeatureTypeByName(t);return n?{name:n.name,..."title"in n&&{title:n.title},..."abstract"in n&&{abstract:n.abstract},..."latLonBoundingBox"in n&&{boundingBox:n.latLonBoundingBox},defaultCrs:n.defaultCrs,otherCrs:n.otherCrs,outputFormats:n.outputFormats}:null}getFeatureTypeFull(t){const n=this._getFeatureTypeByName(t);return n?Hi(()=>{const i=B1(this._capabilitiesUrl,this._version,t),s=sh(this._capabilitiesUrl,this._version,t,void 0,void 0,void 0,!0);return Promise.all([ih(i),ih(s)]).then(([r,a])=>k1(n,r,a,this._version))},"WFS","FEATURETYPEINFO",this._capabilitiesUrl,t):null}async getFeatureTypePropDetails(t){const n=await this.getFeatureTypeFull(t);return n===null?null:Hi(()=>h1(this._capabilitiesUrl,this._version,n).then(i=>i.props),"WFS","FEATURETYPEPROPDETAILS",this._capabilitiesUrl,t)}getVersion(){return this._version}_getJsonCompatibleOutputFormat(t){const n=this._getFeatureTypeByName(t);if(!n)throw new Error(`The following feature type was not found in the service: ${t}`);const i=n.outputFormats.filter(s=>s.toLowerCase().indexOf("json")>-1);return i.length?i[0]:null}supportsJson(t){return this._featureTypes?!!this._getJsonCompatibleOutputFormat(t):null}getFeatureUrl(t,n){if(!this._featureTypes)return null;const{maxFeatures:i,asJson:s,outputFormat:r,outputCrs:a,extent:o,extentCrs:l}=n||{},h=this._getFeatureTypeByName(t);if(!h)throw new Error(`The following feature type was not found in the service: ${t}`);let u=r;if(s){if(u=this._getJsonCompatibleOutputFormat(t)||void 0,!u)throw new Error(`The endpoint does not appear to support GeoJSON for the feature type ${h.name}`)}else r&&h.outputFormats.indexOf(r)===-1&&console.warn(`[ogc-client] The following output format type was not found in the feature type ${h.name}: ${r}`);return sh(this._capabilitiesUrl,this._version,h.name,u,i,void 0,void 0,a,o,l)}};const U1={name:"WfsEndpoint",components:{WfsFeatureTypeInfo:O1,ItemsTree:jr,InfoList:zn},data:()=>({loading:!1,error:null,endpoint:null,url:"https://ahocevar.com/geoserver/wfs",selectedFeatureType:null}),computed:{loaded(){return this.endpoint&&this.loading===!1&&this.error===null}},methods:{async createEndpoint(){this.error=null,this.loading=!0,this.endpoint=new z1(this.url);try{await this.endpoint.isReady()}catch(e){this.error=e.message}this.loading=!1},async handleItemClick(e,t){t.preventDefault(),this.selectedFeatureType=await this.endpoint.getFeatureTypeFull(e.name)}}},j1={class:"d-flex flex-row my-4"},G1=b("div",{class:"spacer-s"},null,-1),W1={key:0},q1={key:1},X1=["title"],K1=["onClick"],Z1={key:1},V1={key:2};function H1(e,t,n,i,s,r){const a=it("InfoList"),o=it("ItemsTree"),l=it("WfsFeatureTypeInfo");return L(),U("div",null,[b("div",j1,[gn(b("input",{class:"form-control me-3",placeholder:"Enter a WFS service URL here","onUpdate:modelValue":t[0]||(t[0]=h=>e.url=h)},null,512),[[Ur,e.url]]),G1,b("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=h=>r.createEndpoint())}," Analyze ")]),e.loading?(L(),U("div",W1,"Loading...")):wt("",!0),r.loaded?(L(),U("div",q1,[Z(a,{info:e.endpoint.getServiceInfo()},null,8,["info"]),Z(o,{items:e.endpoint.getFeatureTypes(),style:{"min-height":"200px"}},{default:Yt(({item:h})=>[b("div",{title:h.abstract},[h.name?(L(),U("a",{key:0,href:"",onClick:u=>r.handleItemClick(h,u),class:"link-light"},Ft(h.title),9,K1)):(L(),U("span",Z1,Ft(h.title),1))],8,X1)]),_:1},8,["items"]),e.selectedFeatureType?(L(),fe(l,{key:0,"feature-type":e.selectedFeatureType,endpoint:e.endpoint},null,8,["feature-type","endpoint"])):wt("",!0)])):wt("",!0),e.error?(L(),U("div",V1,"Error: "+Ft(e.error),1)):wt("",!0)])}const Y1=Ot(U1,[["render",H1]]);const Q1={name:"Async",props:{promise:Promise},data:()=>({pending:!0,resolved:null,rejected:null}),watch:{promise:{immediate:!0,handler(e){e instanceof Promise?(this.pending=!0,e.then(t=>{this.resolved=t,this.rejected=null,this.pending=!1},t=>{this.rejected=t,this.resolved=null,this.pending=!1})):(this.resolved=e,this.rejected=null,this.pending=!1)}}}},J1=e=>(Pi("data-v-b4911245"),e=e(),Li(),e),t_={key:0},e_=J1(()=>b("span",null,"Loading...",-1)),n_={key:1},i_={class:"error"},s_={key:2};function r_(e,t,n,i,s,r){return e.pending?(L(),U("div",t_,[Ln(e.$slots,"pending",{},()=>[e_],!0)])):e.rejected?(L(),U("div",n_,[Ln(e.$slots,"catch",{error:e.rejected},()=>[b("span",i_,"Error: "+Ft(e.rejected),1)],!0)])):(L(),U("div",s_,[Ln(e.$slots,"then",{result:e.resolved},()=>[b("span",null,"Loaded: "+Ft(e.resolved),1)],!0)]))}const a_=Ot(Q1,[["render",r_],["__scopeId","data-v-b4911245"]]),o_=["string","number","integer","date","point","linestring","polygon","geometry"];function fr(e){const t=new URL(e,window.location.toString());t.searchParams.set("f","json");const n=So(),i="headers"in n?n.headers:{};return fetch(t.toString(),{...n,headers:{...i,Accept:"application/json"}}).then(s=>s.json())}function l_(e){return fr(e)}function gr(e,t,n){const i=e.links.filter(s=>Array.isArray(t)?t.indexOf(s.rel)>-1:s.rel===t);return i.length?new URL(i[0].href,n||window.location.toString()).toString():null}function Bi(e,t,n){const i=gr(e,t,n);return i?fr(i):Promise.reject(new kn(`Could not find link with type: ${t}`))}function rh(e,t){if(!gr(e,t))throw new kn(`Could not find link with type: ${t}`)}function h_(e){try{rh(e,["data","http://www.opengis.net/def/rel/ogc/1.0/data"]),rh(e,["conformance","http://www.opengis.net/def/rel/ogc/1.0/conformance"])}catch(t){throw new kn(`The endpoint appears non-conforming, the following error was encountered:
${t.message}`)}return{title:e.title,description:e.description,attribution:e.attribution}}function u_(e){return e.conformsTo}function ma(e=null){return t=>t.collections.filter(n=>e===null||n.itemType===e).map(n=>n.id)}function c_(e){return e.indexOf("http://www.opengis.net/spec/ogcapi-tiles-1/1.0/conf/core")>-1}function d_(e){return e.indexOf("http://www.opengis.net/spec/ogcapi-styles-1/0.0/conf/core")>-1}function f_([e,t]){return(["http://www.opengis.net/spec/ogcapi-records-1/1.0/conf/record-core","http://www.opengis.net/spec/ogcapi-records-1/1.0/conf/record-collection","http://www.opengis.net/spec/ogcapi-records-1/1.0/conf/record-api"].every(i=>t.indexOf(i)>-1)||t.indexOf("http://www.opengis.net/spec/ogcapi-records-1/1.0/conf/core")>-1)&&e.some(i=>i.itemType==="record")}function g_([e,t]){return t.indexOf("http://www.opengis.net/spec/ogcapi-features-1/1.0/conf/core")>-1&&e.some(n=>n.itemType==="feature")}function m_(e){const{links:t,...n}=e;return n}function ah(e){return"properties"in e&&typeof e.properties=="object"?Object.keys(e.properties).map(t=>{const n=e.properties[t];let i="string";if(typeof n.$ref=="string"){const s=n.$ref.toLowerCase();s.indexOf("point")>-1?i="point":s.indexOf("linestring")>-1?i="linestring":s.indexOf("polygon")>-1?i="polygon":s.indexOf("geometry")>-1&&(i="geometry")}else typeof n.type=="string"&&o_.indexOf(n.type.toLowerCase())>-1&&(i=n.type.toLowerCase());return{name:t,type:i,...typeof n.title=="string"&&{title:n.title}}}):Array.isArray(e)?e.map(t=>({name:t,type:"string"})):[]}let p_=class{constructor(t){this.baseUrl=t,this.root=l_(this.baseUrl),this.conformance=this.root.then(n=>Bi(n,["conformance","http://www.opengis.net/def/rel/ogc/1.0/conformance"],this.baseUrl)).catch(()=>null),this.data=this.root.then(n=>Bi(n,["data","http://www.opengis.net/def/rel/ogc/1.0/data"],this.baseUrl)).catch(()=>null)}get info(){return this.root.then(h_)}get conformanceClasses(){return this.conformance.then(u_)}get allCollections(){return this.data.then(ma())}get recordCollections(){return Promise.all([this.data,this.hasRecords]).then(([t,n])=>n?t:{collections:[]}).then(ma("record"))}get featureCollections(){return Promise.all([this.data,this.hasFeatures]).then(([t,n])=>n?t:{collections:[]}).then(ma("feature"))}get hasTiles(){return this.conformanceClasses.then(c_)}get hasStyles(){return this.conformanceClasses.then(d_)}get hasFeatures(){return Promise.all([this.data.then(t=>t.collections),this.conformanceClasses]).then(g_)}get hasRecords(){return Promise.all([this.data.then(t=>t.collections),this.conformanceClasses]).then(f_)}getCollectionDocument(t){return Promise.all([this.allCollections,this.data]).then(([n,i])=>{if(n.indexOf(t)===-1)throw new kn(`Collection not found: ${t}`);return i.collections.find(s=>s.id===t)}).then(n=>Bi(n,"self",this.baseUrl))}async getCollectionInfo(t){const n=await this.getCollectionDocument(t),i=m_(n),[s,r]=await Promise.all([Bi(n,["queryables","http://www.opengis.net/def/rel/ogc/1.0/queryables"],this.baseUrl).then(ah).catch(()=>[]),Bi(n,["sortables","http://www.opengis.net/def/rel/ogc/1.0/sortables"],this.baseUrl).then(ah).catch(()=>[])]);return{...i,queryables:s,sortables:r}}getCollectionItems(t,n=10,i=0,s=null,r=null,a=null,o=null){return this.getCollectionDocument(t).then(l=>{const h=new URL(gr(l,"items",this.baseUrl),window.location.toString());return h.searchParams.set("limit",n.toString()),h.searchParams.set("offset",i.toString()),s!==null&&h.searchParams.set("skipGeometry",s.toString()),r!==null&&h.searchParams.set("sortby",r.join(",").toString()),a!==null&&h.searchParams.set("bbox",a.join(",").toString()),o!==null&&h.searchParams.set("properties",o.join(",").toString()),h.toString()}).then(fr).then(l=>l.features)}getCollectionItem(t,n){return this.getCollectionDocument(t).then(i=>{const s=new URL(gr(i,"items",this.baseUrl),window.location.toString());return s.pathname+=`/${n}`,s.toString()}).then(fr)}};const __={name:"OgcApiEndpoint",components:{Async:a_,ItemsTree:jr,InfoList:zn},data:()=>({endpoint:null,endpointSummary:null,endpointCollections:null,url:"https://demo.ldproxy.net/zoomstack"}),computed:{loaded(){return this.endpoint&&this.loading===!1&&this.error===null}},methods:{createEndpoint(){this.endpoint=new p_(this.url),this.endpointSummary=Promise.all([this.endpoint.info,this.endpoint.hasTiles,this.endpoint.hasStyles,this.endpoint.hasRecords,this.endpoint.hasFeatures,this.endpoint.allCollections]).then(([e,t,n,i,s,r])=>({info:{...e,hasTiles:t,hasStyles:n,hasRecords:i,hasFeatures:s},collections:r}))}}},y_={class:"d-flex flex-row my-4"},v_=b("div",{class:"spacer-s"},null,-1);function E_(e,t,n,i,s,r){const a=it("InfoList"),o=it("ItemsTree"),l=it("Async");return L(),U("div",null,[b("div",y_,[gn(b("input",{class:"form-control me-3",placeholder:"Enter an OGC API endpoint URL here","onUpdate:modelValue":t[0]||(t[0]=h=>e.url=h)},null,512),[[Ur,e.url]]),v_,b("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=h=>r.createEndpoint())}," Analyze ")]),e.endpointSummary?(L(),fe(l,{key:0,promise:e.endpointSummary},{then:Yt(({result:h})=>[Z(a,{info:h.info},null,8,["info"]),Z(o,{items:h.collections,style:{"min-height":"200px"}},{default:Yt(({item:u})=>[b("span",null,Ft(u),1)]),_:2},1032,["items"])]),_:1},8,["promise"])):wt("",!0)])}const x_=Ot(__,[["render",E_]]),b_="modulepreload",M_=function(e,t){return new URL(e,t).href},oh={},C_=function(t,n,i){if(!n||n.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(n.map(r=>{if(r=M_(r,i),r in oh)return;oh[r]=!0;const a=r.endsWith(".css"),o=a?'[rel="stylesheet"]':"";if(!!i)for(let u=s.length-1;u>=0;u--){const c=s[u];if(c.href===r&&(!a||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${o}`))return;const h=document.createElement("link");if(h.rel=a?"stylesheet":b_,a||(h.as="script",h.crossOrigin=""),h.href=r,document.head.appendChild(h),a)return new Promise((u,c)=>{h.addEventListener("load",u),h.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t()).catch(r=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=r,window.dispatchEvent(a),!a.defaultPrevented)throw r})};function w_(e,t,n,i,s,r,a,o,l){const h={layer:n,style:i,tilematrixset:s,Service:"WMTS",Request:"GetTile",Format:l,TileMatrix:r,TileCol:o.toString(),TileRow:a.toString()};if(t==="REST"){let u=e;for(const c in h)u=u.replace(new RegExp(`{${c}}`,"ig"),h[c]);return u}else return Un(e,h)}let D_=class{constructor(t){this._info=null,this._layers=null,this._matrixSets=null;const n=Un(t,{SERVICE:"WMTS",REQUEST:"GetCapabilities"});this._capabilitiesPromise=Hi(()=>u1(n),"WMTS","CAPABILITIES",n).then(({info:i,layers:s,matrixSets:r})=>{this._info=i,this._layers=s,this._matrixSets=r})}isReady(){return this._capabilitiesPromise.then(()=>this)}getServiceInfo(){return this._info}getLayers(){return this._layers}getMatrixSets(){return this._matrixSets}getMatrixSetByIdentifier(t){return this._matrixSets?this._matrixSets.find(n=>n.identifier===t)??null:null}getLayerByName(t){return this._layers?this._layers.find(n=>n.name===t)??null:null}getLayerResourceUrl(t,n){if(!this._layers)return null;const i=this.getLayerByName(t);let s=0;n&&(s=i.resourceUrls.findIndex(a=>a.format===n)||0);const r=i.resourceUrls[s];return n&&r.format!==n&&console.warn(`[ogc-client] Requested '${n}' format for the WMTS layer but it is not available in REST encoding, falling back to '${r.format}'`),r}getTileUrl(t,n,i,s,r,a,o){if(!this._layers)return null;const l=this.getLayerResourceUrl(t,o);return w_(l.url,l.encoding,t,n,i,s,r,a,l.format)}getDefaultDimensions(t){if(!this._layers)return null;const n=this.getLayerByName(t);return n.dimensions?n.dimensions.reduce((i,s)=>({...i,[s.identifier]:s.defaultValue}),{}):{}}getOpenLayersTileGrid(t,n){if(!this._layers)return null;this.tileGridModule||(this.tileGridModule=C_(()=>import("./ol-tilegrid-9859603a.js"),[],import.meta.url).catch(a=>(console.warn(`[ogc-client] Cannot use getOpenLayersTileGrid, the 'ol' package is probably not available.
`,a),null)));const i=this.getLayerByName(t),s=i.matrixSets.find(a=>a.identifier===n)??i.matrixSets[0],r=this.getMatrixSetByIdentifier(s.identifier);return this.tileGridModule.then(({buildOpenLayersTileGrid:a})=>a(r,s.limits))}};class T_{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const vn=T_,ss={PROPERTYCHANGE:"propertychange"};class F_{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}const Po=F_;function Lo(e,t){return e>t?1:e<t?-1:0}function Oo(e,t,n){if(e[0]<=t)return 0;const i=e.length;if(t<=e[i-1])return i-1;if(typeof n=="function"){for(let s=1;s<i;++s){const r=e[s];if(r===t)return s;if(r<t)return n(t,e[s-1],r)>0?s-1:s}return i-1}if(n>0){for(let s=1;s<i;++s)if(e[s]<t)return s-1;return i-1}if(n<0){for(let s=1;s<i;++s)if(e[s]<=t)return s;return i-1}for(let s=1;s<i;++s){if(e[s]==t)return s;if(e[s]<t)return e[s-1]-t<t-e[s]?s-1:s}return i-1}function A_(e,t){const n=Array.isArray(t)?t:[t],i=n.length;for(let s=0;s<i;s++)e[e.length]=n[s]}function Kr(e,t){const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function R_(e,t,n){const i=t||Lo;return e.every(function(s,r){if(r===0)return!0;const a=i(e[r-1],s);return!(a>0||n&&a===0)})}function mr(){return!0}function Zr(){return!1}function pr(){}function I_(e){let t=!1,n,i,s;return function(){const r=Array.prototype.slice.call(arguments);return(!t||this!==s||!Kr(r,i))&&(t=!0,s=this,i=r,n=e.apply(this,arguments)),n}}function Vr(e){for(const t in e)delete e[t]}function S_(e){let t;for(t in e)return!1;return!t}class P_ extends Po{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,n){if(!t||!n)return;const i=this.listeners_||(this.listeners_={}),s=i[t]||(i[t]=[]);s.includes(n)||s.push(n)}dispatchEvent(t){const n=typeof t=="string",i=n?t:t.type,s=this.listeners_&&this.listeners_[i];if(!s)return;const r=n?new vn(t):t;r.target||(r.target=this.eventTarget_||this);const a=this.dispatching_||(this.dispatching_={}),o=this.pendingRemovals_||(this.pendingRemovals_={});i in a||(a[i]=0,o[i]=0),++a[i];let l;for(let h=0,u=s.length;h<u;++h)if("handleEvent"in s[h]?l=s[h].handleEvent(r):l=s[h].call(this,r),l===!1||r.propagationStopped){l=!1;break}if(--a[i]===0){let h=o[i];for(delete o[i];h--;)this.removeEventListener(i,pr);delete a[i]}return l}disposeInternal(){this.listeners_&&Vr(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,n){if(!this.listeners_)return;const i=this.listeners_[t];if(!i)return;const s=i.indexOf(n);s!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[s]=pr,++this.pendingRemovals_[t]):(i.splice(s,1),i.length===0&&delete this.listeners_[t]))}}const ko=P_,nt={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function ft(e,t,n,i,s){if(i&&i!==e&&(n=n.bind(i)),s){const a=n;n=function(){e.removeEventListener(t,n),a.apply(this,arguments)}}const r={target:e,type:t,listener:n};return e.addEventListener(t,n),r}function _r(e,t,n,i){return ft(e,t,n,i,!0)}function Lt(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),Vr(e))}class Hr extends ko{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(nt.CHANGE)}getRevision(){return this.revision_}onInternal(t,n){if(Array.isArray(t)){const i=t.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=ft(this,t[r],n);return s}return ft(this,t,n)}onceInternal(t,n){let i;if(Array.isArray(t)){const s=t.length;i=new Array(s);for(let r=0;r<s;++r)i[r]=_r(this,t[r],n)}else i=_r(this,t,n);return n.ol_key=i,i}unInternal(t,n){const i=n.ol_key;if(i)L_(i);else if(Array.isArray(t))for(let s=0,r=t.length;s<r;++s)this.removeEventListener(t[s],n);else this.removeEventListener(t,n)}}Hr.prototype.on;Hr.prototype.once;Hr.prototype.un;function L_(e){if(Array.isArray(e))for(let t=0,n=e.length;t<n;++t)Lt(e[t]);else Lt(e)}const Ec=Hr;function Rt(){throw new Error("Unimplemented abstract method.")}let O_=0;function de(e){return e.ol_uid||(e.ol_uid=String(++O_))}class lh extends vn{constructor(t,n,i){super(t),this.key=n,this.oldValue=i}}class k_ extends Ec{constructor(t){super(),this.on,this.once,this.un,de(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let n;return this.values_&&this.values_.hasOwnProperty(t)&&(n=this.values_[t]),n}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,n){let i;i=`change:${t}`,this.hasListener(i)&&this.dispatchEvent(new lh(i,t,n)),i=ss.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new lh(i,t,n))}addChangeListener(t,n){this.addEventListener(`change:${t}`,n)}removeChangeListener(t,n){this.removeEventListener(`change:${t}`,n)}set(t,n,i){const s=this.values_||(this.values_={});if(i)s[t]=n;else{const r=s[t];s[t]=n,r!==n&&this.notify(t,r)}}setProperties(t,n){for(const i in t)this.set(i,t[i],n)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,n){if(this.values_&&t in this.values_){const i=this.values_[t];delete this.values_[t],S_(this.values_)&&(this.values_=null),n||this.notify(t,i)}}}const Qe=k_,Ce={ADD:"add",REMOVE:"remove"},hh={LENGTH:"length"};class Os extends vn{constructor(t,n,i){super(t),this.element=n,this.index=i}}class N_ extends Qe{constructor(t,n){if(super(),this.on,this.once,this.un,n=n||{},this.unique_=!!n.unique,this.array_=t||[],this.unique_)for(let i=0,s=this.array_.length;i<s;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let n=0,i=t.length;n<i;++n)this.push(t[n]);return this}forEach(t){const n=this.array_;for(let i=0,s=n.length;i<s;++i)t(n[i],i,n)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(hh.LENGTH)}insertAt(t,n){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(n),this.array_.splice(t,0,n),this.updateLength_(),this.dispatchEvent(new Os(Ce.ADD,n,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const n=this.getLength();return this.insertAt(n,t),this.getLength()}remove(t){const n=this.array_;for(let i=0,s=n.length;i<s;++i)if(n[i]===t)return this.removeAt(i)}removeAt(t){if(t<0||t>=this.getLength())return;const n=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Os(Ce.REMOVE,n,t)),n}setAt(t,n){const i=this.getLength();if(t>=i){this.insertAt(t,n);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(n,t);const s=this.array_[t];this.array_[t]=n,this.dispatchEvent(new Os(Ce.REMOVE,s,t)),this.dispatchEvent(new Os(Ce.ADD,n,t))}updateLength_(){this.set(hh.LENGTH,this.array_.length)}assertUnique_(t,n){for(let i=0,s=this.array_.length;i<s;++i)if(this.array_[i]===t&&i!==n)throw new Error("Duplicate item added to a unique collection")}}const Ve=N_,pn=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",$_=pn.includes("firefox"),B_=pn.includes("safari")&&!pn.includes("chrom");B_&&(pn.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(pn));const z_=pn.includes("webkit")&&!pn.includes("edge"),xc=pn.includes("macintosh"),bc=typeof devicePixelRatio<"u"?devicePixelRatio:1,Mc=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,U_=typeof Image<"u"&&Image.prototype.decode,Cc=function(){let e=!1;try{const t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return e}();function Mt(e,t){if(!e)throw new Error(t)}new Array(6);function fi(){return[1,0,0,1,0,0]}function be(e,t){const n=t[0],i=t[1];return t[0]=e[0]*n+e[2]*i+e[4],t[1]=e[1]*n+e[3]*i+e[5],t}function rs(e,t,n,i,s,r,a,o){const l=Math.sin(r),h=Math.cos(r);return e[0]=i*h,e[1]=s*l,e[2]=-i*l,e[3]=s*h,e[4]=a*i*h-o*i*l+t,e[5]=a*s*l+o*s*h+n,e}function wc(e,t){const n=j_(t);Mt(n!==0,"Transformation matrix cannot be inverted");const i=t[0],s=t[1],r=t[2],a=t[3],o=t[4],l=t[5];return e[0]=a/n,e[1]=-s/n,e[2]=-r/n,e[3]=i/n,e[4]=(r*l-a*o)/n,e[5]=-(i*l-s*o)/n,e}function j_(e){return e[0]*e[3]-e[1]*e[2]}let uh;function G_(e){const t="matrix("+e.join(", ")+")";if(Mc)return t;const n=uh||(uh=document.createElement("div"));return n.style.transform=t,n.style.transform}const Wt={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function ch(e){const t=jn();for(let n=0,i=e.length;n<i;++n)Ys(t,e[n]);return t}function W_(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e.slice()}function Dc(e,t,n){let i,s;return t<e[0]?i=e[0]-t:e[2]<t?i=t-e[2]:i=0,n<e[1]?s=e[1]-n:e[3]<n?s=n-e[3]:s=0,i*i+s*s}function No(e,t){return Tc(e,t[0],t[1])}function q_(e,t){return e[0]<=t[0]&&t[2]<=e[2]&&e[1]<=t[1]&&t[3]<=e[3]}function Tc(e,t,n){return e[0]<=t&&t<=e[2]&&e[1]<=n&&n<=e[3]}function dh(e,t){const n=e[0],i=e[1],s=e[2],r=e[3],a=t[0],o=t[1];let l=Wt.UNKNOWN;return a<n?l=l|Wt.LEFT:a>s&&(l=l|Wt.RIGHT),o<i?l=l|Wt.BELOW:o>r&&(l=l|Wt.ABOVE),l===Wt.UNKNOWN&&(l=Wt.INTERSECTING),l}function jn(){return[1/0,1/0,-1/0,-1/0]}function ms(e,t,n,i,s){return s?(s[0]=e,s[1]=t,s[2]=n,s[3]=i,s):[e,t,n,i]}function Yr(e){return ms(1/0,1/0,-1/0,-1/0,e)}function X_(e,t){const n=e[0],i=e[1];return ms(n,i,n,i,t)}function K_(e,t,n,i,s){const r=Yr(s);return Fc(r,e,t,n,i)}function Ga(e,t){return e[0]==t[0]&&e[2]==t[2]&&e[1]==t[1]&&e[3]==t[3]}function Z_(e,t){return t[0]<e[0]&&(e[0]=t[0]),t[2]>e[2]&&(e[2]=t[2]),t[1]<e[1]&&(e[1]=t[1]),t[3]>e[3]&&(e[3]=t[3]),e}function Ys(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function Fc(e,t,n,i,s){for(;n<i;n+=s)V_(e,t[n],t[n+1]);return e}function V_(e,t,n){e[0]=Math.min(e[0],t),e[1]=Math.min(e[1],n),e[2]=Math.max(e[2],t),e[3]=Math.max(e[3],n)}function Ac(e,t){let n;return n=t(Qr(e)),n||(n=t(Jr(e)),n)||(n=t(ta(e)),n)||(n=t(Gn(e)),n)?n:!1}function Wa(e){let t=0;return ea(e)||(t=Pt(e)*Pe(e)),t}function Qr(e){return[e[0],e[1]]}function Jr(e){return[e[2],e[1]]}function as(e){return[(e[0]+e[2])/2,(e[1]+e[3])/2]}function H_(e,t){let n;if(t==="bottom-left")n=Qr(e);else if(t==="bottom-right")n=Jr(e);else if(t==="top-left")n=Gn(e);else if(t==="top-right")n=ta(e);else throw new Error("Invalid corner");return n}function qa(e,t,n,i,s){const[r,a,o,l,h,u,c,d]=Xa(e,t,n,i);return ms(Math.min(r,o,h,c),Math.min(a,l,u,d),Math.max(r,o,h,c),Math.max(a,l,u,d),s)}function Xa(e,t,n,i){const s=t*i[0]/2,r=t*i[1]/2,a=Math.cos(n),o=Math.sin(n),l=s*a,h=s*o,u=r*a,c=r*o,d=e[0],f=e[1];return[d-l+c,f-h-u,d-l-c,f-h+u,d+l-c,f+h+u,d+l+c,f+h-u,d-l+c,f-h-u]}function Pe(e){return e[3]-e[1]}function Yi(e,t,n){const i=n||jn();return ps(e,t)?(e[0]>t[0]?i[0]=e[0]:i[0]=t[0],e[1]>t[1]?i[1]=e[1]:i[1]=t[1],e[2]<t[2]?i[2]=e[2]:i[2]=t[2],e[3]<t[3]?i[3]=e[3]:i[3]=t[3]):Yr(i),i}function Gn(e){return[e[0],e[3]]}function ta(e){return[e[2],e[3]]}function Pt(e){return e[2]-e[0]}function ps(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}function ea(e){return e[2]<e[0]||e[3]<e[1]}function Y_(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e}function Q_(e,t,n){let i=!1;const s=dh(e,t),r=dh(e,n);if(s===Wt.INTERSECTING||r===Wt.INTERSECTING)i=!0;else{const a=e[0],o=e[1],l=e[2],h=e[3],u=t[0],c=t[1],d=n[0],f=n[1],g=(f-c)/(d-u);let m,_;r&Wt.ABOVE&&!(s&Wt.ABOVE)&&(m=d-(f-h)/g,i=m>=a&&m<=l),!i&&r&Wt.RIGHT&&!(s&Wt.RIGHT)&&(_=f-(d-l)*g,i=_>=o&&_<=h),!i&&r&Wt.BELOW&&!(s&Wt.BELOW)&&(m=d-(f-o)/g,i=m>=a&&m<=l),!i&&r&Wt.LEFT&&!(s&Wt.LEFT)&&(_=f-(d-a)*g,i=_>=o&&_<=h)}return i}const yr={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var oe={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};oe.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};oe.max=oe.whitepoint[2].D65;oe.rgb=function(e,t){t=t||oe.whitepoint[2].E;var n=e[0]/t[0],i=e[1]/t[1],s=e[2]/t[2],r,a,o;return r=n*3.240969941904521+i*-1.537383177570093+s*-.498610760293,a=n*-.96924363628087+i*1.87596750150772+s*.041555057407175,o=n*.055630079696993+i*-.20397695888897+s*1.056971514242878,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:r=r*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o=o*12.92,r=Math.min(Math.max(0,r),1),a=Math.min(Math.max(0,a),1),o=Math.min(Math.max(0,o),1),[r*255,a*255,o*255]};yr.xyz=function(e,t){var n=e[0]/255,i=e[1]/255,s=e[2]/255;n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92;var r=n*.41239079926595+i*.35758433938387+s*.18048078840183,a=n*.21263900587151+i*.71516867876775+s*.072192315360733,o=n*.019330818715591+i*.11919477979462+s*.95053215224966;return t=t||oe.whitepoint[2].E,[r*t[0],a*t[1],o*t[2]]};const Rc={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(e,t,n){var i,s,r,a,o,l,h,u,c,d,f,g,m;if(r=e[0],a=e[1],o=e[2],r===0)return[0,0,0];var _=.0011070564598794539;return t=t||"D65",n=n||2,c=oe.whitepoint[n][t][0],d=oe.whitepoint[n][t][1],f=oe.whitepoint[n][t][2],g=4*c/(c+15*d+3*f),m=9*d/(c+15*d+3*f),i=a/(13*r)+g||0,s=o/(13*r)+m||0,h=r>8?d*Math.pow((r+16)/116,3):d*r*_,l=h*9*i/(4*s)||0,u=h*(12-3*i-20*s)/(4*s)||0,[l,h,u]}};oe.luv=function(e,t,n){var i,s,r,a,o,l,h,u,c,d,f,g,m,_=.008856451679035631,v=903.2962962962961;t=t||"D65",n=n||2,c=oe.whitepoint[n][t][0],d=oe.whitepoint[n][t][1],f=oe.whitepoint[n][t][2],g=4*c/(c+15*d+3*f),m=9*d/(c+15*d+3*f),l=e[0],h=e[1],u=e[2],i=4*l/(l+15*h+3*u)||0,s=9*h/(l+15*h+3*u)||0;var E=h/d;return r=E<=_?v*E:116*Math.pow(E,1/3)-16,a=13*r*(i-g),o=13*r*(s-m),[r,a,o]};Rc.lchuv=function(e){var t=e[0],n=e[1],i=e[2],s=Math.sqrt(n*n+i*i),r=Math.atan2(i,n),a=r*360/2/Math.PI;return a<0&&(a+=360),[t,s,a]};oe.lchuv=function(e){return Rc.lchuv(oe.luv(e))};var J_={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};const fh=Op(J_);var gh={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function ty(e){var u,c;var t,n=[],i=1,s;if(typeof e=="number")return{space:"rgb",values:[e>>>16,(e&65280)>>>8,e&255],alpha:1};if(typeof e=="number")return{space:"rgb",values:[e>>>16,(e&65280)>>>8,e&255],alpha:1};if(e=String(e).toLowerCase(),fh[e])n=fh[e].slice(),s="rgb";else if(e==="transparent")i=0,s="rgb",n=[0,0,0];else if(e[0]==="#"){var r=e.slice(1),a=r.length,o=a<=4;i=1,o?(n=[parseInt(r[0]+r[0],16),parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16)],a===4&&(i=parseInt(r[3]+r[3],16)/255)):(n=[parseInt(r[0]+r[1],16),parseInt(r[2]+r[3],16),parseInt(r[4]+r[5],16)],a===8&&(i=parseInt(r[6]+r[7],16)/255)),n[0]||(n[0]=0),n[1]||(n[1]=0),n[2]||(n[2]=0),s="rgb"}else if(t=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(e)){var l=t[1];s=l.replace(/a$/,"");var h=s==="cmyk"?4:s==="gray"?1:3;n=t[2].trim().split(/\s*[,\/]\s*|\s+/),s==="color"&&(s=n.shift()),n=n.map(function(d,f){if(d[d.length-1]==="%")return d=parseFloat(d)/100,f===3?d:s==="rgb"?d*255:s[0]==="h"||s[0]==="l"&&!f?d*100:s==="lab"?d*125:s==="lch"?f<2?d*150:d*360:s[0]==="o"&&!f?d:s==="oklab"?d*.4:s==="oklch"?f<2?d*.4:d*360:d;if(s[f]==="h"||f===2&&s[s.length-1]==="h"){if(gh[d]!==void 0)return gh[d];if(d.endsWith("deg"))return parseFloat(d);if(d.endsWith("turn"))return parseFloat(d)*360;if(d.endsWith("grad"))return parseFloat(d)*360/400;if(d.endsWith("rad"))return parseFloat(d)*180/Math.PI}return d==="none"?0:parseFloat(d)}),i=n.length>h?n.pop():1}else/[0-9](?:\s|\/|,)/.test(e)&&(n=e.match(/([0-9]+)/g).map(function(d){return parseFloat(d)}),s=((c=(u=e.match(/([a-z])/ig))==null?void 0:u.join(""))==null?void 0:c.toLowerCase())||"rgb");return{space:s,values:n,alpha:i}}const pa={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(e){var t=e[0]/360,n=e[1]/100,i=e[2]/100,s,r,a,o,l,h=0;if(n===0)return l=i*255,[l,l,l];for(r=i<.5?i*(1+n):i+n-i*n,s=2*i-r,o=[0,0,0];h<3;)a=t+1/3*-(h-1),a<0?a++:a>1&&a--,l=6*a<1?s+(r-s)*6*a:2*a<1?r:3*a<2?s+(r-s)*(2/3-a)*6:s,o[h++]=l*255;return o}};yr.hsl=function(e){var t=e[0]/255,n=e[1]/255,i=e[2]/255,s=Math.min(t,n,i),r=Math.max(t,n,i),a=r-s,o,l,h;return r===s?o=0:t===r?o=(n-i)/a:n===r?o=2+(i-t)/a:i===r&&(o=4+(t-n)/a),o=Math.min(o*60,360),o<0&&(o+=360),h=(s+r)/2,r===s?l=0:h<=.5?l=a/(r+s):l=a/(2-r-s),[o,l*100,h*100]};function ey(e){Array.isArray(e)&&e.raw&&(e=String.raw(...arguments)),e instanceof Number&&(e=+e);var t,n=ty(e);if(!n.space)return[];const i=n.space[0]==="h"?pa.min:yr.min,s=n.space[0]==="h"?pa.max:yr.max;return t=Array(3),t[0]=Math.min(Math.max(n.values[0],i[0]),s[0]),t[1]=Math.min(Math.max(n.values[1],i[1]),s[1]),t[2]=Math.min(Math.max(n.values[2],i[2]),s[2]),n.space[0]==="h"&&(t=pa.rgb(t)),t.push(Math.min(Math.max(n.alpha,0),1)),t}function kt(e,t,n){return Math.min(Math.max(e,t),n)}function ny(e,t,n,i,s,r){const a=s-n,o=r-i;if(a!==0||o!==0){const l=((e-n)*a+(t-i)*o)/(a*a+o*o);l>1?(n=s,i=r):l>0&&(n+=a*l,i+=o*l)}return gi(e,t,n,i)}function gi(e,t,n,i){const s=n-e,r=i-t;return s*s+r*r}function iy(e){const t=e.length;for(let i=0;i<t;i++){let s=i,r=Math.abs(e[i][i]);for(let o=i+1;o<t;o++){const l=Math.abs(e[o][i]);l>r&&(r=l,s=o)}if(r===0)return null;const a=e[s];e[s]=e[i],e[i]=a;for(let o=i+1;o<t;o++){const l=-e[o][i]/e[i][i];for(let h=i;h<t+1;h++)i==h?e[o][h]=0:e[o][h]+=l*e[i][h]}}const n=new Array(t);for(let i=t-1;i>=0;i--){n[i]=e[i][t]/e[i][i];for(let s=i-1;s>=0;s--)e[s][t]-=e[s][i]*n[i]}return n}function Qs(e){return e*Math.PI/180}function mi(e,t){const n=e%t;return n*t<0?n+t:n}function sy(e,t,n){return e+n*(t-e)}function Ic(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}function ks(e,t){return Math.floor(Ic(e,t))}function Ns(e,t){return Math.ceil(Ic(e,t))}function ry(e){return typeof e=="string"?e:hy(e)}const ay=1024,zi={};let _a=0;function oy(e){if(zi.hasOwnProperty(e))return zi[e];if(_a>=ay){let n=0;for(const i in zi)n++&3||(delete zi[i],--_a)}const t=ey(e);if(t.length!==4)throw new Error('Failed to parse "'+e+'" as color');for(const n of t)if(isNaN(n))throw new Error('Failed to parse "'+e+'" as color');return ly(t),zi[e]=t,++_a,t}function mh(e){return Array.isArray(e)?e:oy(e)}function ly(e){return e[0]=kt(e[0]+.5|0,0,255),e[1]=kt(e[1]+.5|0,0,255),e[2]=kt(e[2]+.5|0,0,255),e[3]=kt(e[3],0,1),e}function hy(e){let t=e[0];t!=(t|0)&&(t=t+.5|0);let n=e[1];n!=(n|0)&&(n=n+.5|0);let i=e[2];i!=(i|0)&&(i=i+.5|0);const s=e[3]===void 0?1:Math.round(e[3]*100)/100;return"rgba("+t+","+n+","+i+","+s+")"}class uy{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const n in this.cache_){const i=this.cache_[n];!(t++&3)&&!i.hasListener()&&(delete this.cache_[n],--this.cacheSize_)}}}get(t,n,i){const s=ph(t,n,i);return s in this.cache_?this.cache_[s]:null}set(t,n,i,s){const r=ph(t,n,i);this.cache_[r]=s,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function ph(e,t,n){const i=n?ry(n):"null";return t+":"+e+":"+i}const Sc=new uy,dt={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class cy extends Qe{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const n=Object.assign({},t);typeof t.properties=="object"&&(delete n.properties,Object.assign(n,t.properties)),n[dt.OPACITY]=t.opacity!==void 0?t.opacity:1,Mt(typeof n[dt.OPACITY]=="number","Layer opacity must be a number"),n[dt.VISIBLE]=t.visible!==void 0?t.visible:!0,n[dt.Z_INDEX]=t.zIndex,n[dt.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,n[dt.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,n[dt.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,n[dt.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=n.className!==void 0?n.className:"ol-layer",delete n.className,this.setProperties(n),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const n=this.state_||{layer:this,managed:t===void 0?!0:t},i=this.getZIndex();return n.opacity=kt(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=i===void 0&&!n.managed?1/0:i,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n}getLayersArray(t){return Rt()}getLayerStatesArray(t){return Rt()}getExtent(){return this.get(dt.EXTENT)}getMaxResolution(){return this.get(dt.MAX_RESOLUTION)}getMinResolution(){return this.get(dt.MIN_RESOLUTION)}getMinZoom(){return this.get(dt.MIN_ZOOM)}getMaxZoom(){return this.get(dt.MAX_ZOOM)}getOpacity(){return this.get(dt.OPACITY)}getSourceState(){return Rt()}getVisible(){return this.get(dt.VISIBLE)}getZIndex(){return this.get(dt.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(dt.EXTENT,t)}setMaxResolution(t){this.set(dt.MAX_RESOLUTION,t)}setMinResolution(t){this.set(dt.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(dt.MAX_ZOOM,t)}setMinZoom(t){this.set(dt.MIN_ZOOM,t)}setOpacity(t){Mt(typeof t=="number","Layer opacity must be a number"),this.set(dt.OPACITY,t)}setVisible(t){this.set(dt.VISIBLE,t)}setZIndex(t){this.set(dt.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const Pc=cy,un={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},Me={ANIMATING:0,INTERACTING:1},Te={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},dy=42,$o=256,os={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let fy=class{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||os[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const Bo=fy,_s=6378137,ni=Math.PI*_s,gy=[-ni,-ni,ni,ni],my=[-180,-85,180,85],$s=_s*Math.log(Math.tan(Math.PI/2));class Kn extends Bo{constructor(t){super({code:t,units:"m",extent:gy,global:!0,worldExtent:my,getPointResolution:function(n,i){return n/Math.cosh(i[1]/_s)}})}}const _h=[new Kn("EPSG:3857"),new Kn("EPSG:102100"),new Kn("EPSG:102113"),new Kn("EPSG:900913"),new Kn("http://www.opengis.net/def/crs/EPSG/0/3857"),new Kn("http://www.opengis.net/gml/srs/epsg.xml#3857")];function py(e,t,n){const i=e.length;n=n>1?n:2,t===void 0&&(n>2?t=e.slice():t=new Array(i));for(let s=0;s<i;s+=n){t[s]=ni*e[s]/180;let r=_s*Math.log(Math.tan(Math.PI*(+e[s+1]+90)/360));r>$s?r=$s:r<-$s&&(r=-$s),t[s+1]=r}return t}function _y(e,t,n){const i=e.length;n=n>1?n:2,t===void 0&&(n>2?t=e.slice():t=new Array(i));for(let s=0;s<i;s+=n)t[s]=180*e[s]/ni,t[s+1]=360*Math.atan(Math.exp(e[s+1]/_s))/Math.PI-90;return t}const yy=6378137,yh=[-180,-90,180,90],vy=Math.PI*yy/180;class wn extends Bo{constructor(t,n){super({code:t,units:"degrees",extent:yh,axisOrientation:n,global:!0,metersPerUnit:vy,worldExtent:yh})}}const vh=[new wn("CRS:84"),new wn("EPSG:4326","neu"),new wn("urn:ogc:def:crs:OGC:1.3:CRS84"),new wn("urn:ogc:def:crs:OGC:2:84"),new wn("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new wn("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new wn("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Ka={};function Ey(e){return Ka[e]||Ka[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function xy(e,t){Ka[e]=t}let pi={};function Di(e,t,n){const i=e.getCode(),s=t.getCode();i in pi||(pi[i]={}),pi[i][s]=n}function Lc(e,t){let n;return e in pi&&t in pi[e]&&(n=pi[e][t]),n}function by(e,t){return e[0]+=+t[0],e[1]+=+t[1],e}function vr(e,t){let n=!0;for(let i=e.length-1;i>=0;--i)if(e[i]!=t[i]){n=!1;break}return n}function zo(e,t){const n=Math.cos(t),i=Math.sin(t),s=e[0]*n-e[1]*i,r=e[1]*n+e[0]*i;return e[0]=s,e[1]=r,e}function My(e,t){return e[0]*=t,e[1]*=t,e}function Cy(e,t){if(t.canWrapX()){const n=Pt(t.getExtent()),i=Oc(e,t,n);i&&(e[0]-=i*n)}return e}function Oc(e,t,n){const i=t.getExtent();let s=0;return t.canWrapX()&&(e[0]<i[0]||e[0]>i[2])&&(n=n||Pt(i),s=Math.floor((e[0]-i[0])/n)),s}const wy=63710088e-1;function Eh(e,t,n){n=n||wy;const i=Qs(e[1]),s=Qs(t[1]),r=(s-i)/2,a=Qs(t[0]-e[0])/2,o=Math.sin(r)*Math.sin(r)+Math.sin(a)*Math.sin(a)*Math.cos(i)*Math.cos(s);return 2*n*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))}const kc={info:1,warn:2,error:3,none:4};let Dy=kc.info;function Nc(...e){Dy>kc.warn||console.warn(...e)}let Za=!0;function Ty(e){Za=!(e===void 0?!0:e)}function Uo(e,t){if(t!==void 0){for(let n=0,i=e.length;n<i;++n)t[n]=e[n];t=t}else t=e.slice();return t}function $c(e,t){if(t!==void 0&&e!==t){for(let n=0,i=e.length;n<i;++n)t[n]=e[n];e=t}return e}function Bc(e){xy(e.getCode(),e),Di(e,e,Uo)}function Fy(e){e.forEach(Bc)}function te(e){return typeof e=="string"?Ey(e):e||null}function xh(e,t,n,i){e=te(e);let s;const r=e.getPointResolutionFunc();if(r){if(s=r(t,n),i&&i!==e.getUnits()){const a=e.getMetersPerUnit();a&&(s=s*a/os[i])}}else{const a=e.getUnits();if(a=="degrees"&&!i||i=="degrees")s=t;else{const o=Go(e,te("EPSG:4326"));if(o===$c&&a!=="degrees")s=t*e.getMetersPerUnit();else{let h=[n[0]-t/2,n[1],n[0]+t/2,n[1],n[0],n[1]-t/2,n[0],n[1]+t/2];h=o(h,h,2);const u=Eh(h.slice(0,2),h.slice(2,4)),c=Eh(h.slice(4,6),h.slice(6,8));s=(u+c)/2}const l=i?os[i]:e.getMetersPerUnit();l!==void 0&&(s/=l)}}return s}function Va(e){Fy(e),e.forEach(function(t){e.forEach(function(n){t!==n&&Di(t,n,Uo)})})}function Ay(e,t,n,i){e.forEach(function(s){t.forEach(function(r){Di(s,r,n),Di(r,s,i)})})}function jo(e,t){return e?typeof e=="string"?te(e):e:te(t)}function bh(e){return function(t,n,i){const s=t.length;i=i!==void 0?i:2,n=n!==void 0?n:new Array(s);for(let r=0;r<s;r+=i){const a=e(t.slice(r,r+i)),o=a.length;for(let l=0,h=i;l<h;++l)n[r+l]=l>=o?t[r+l]:a[l]}return n}}function Ry(e,t,n,i){const s=te(e),r=te(t);Di(s,r,bh(n)),Di(r,s,bh(i))}function Qn(e,t){if(e===t)return!0;const n=e.getUnits()===t.getUnits();return(e.getCode()===t.getCode()||Go(e,t)===Uo)&&n}function Go(e,t){const n=e.getCode(),i=t.getCode();let s=Lc(n,i);return s||(s=$c),s}function Er(e,t){const n=te(e),i=te(t);return Go(n,i)}function Iy(e,t,n){return Er(t,n)(e,void 0,e.length)}function Ha(e,t){return e}function Ke(e,t){return Za&&!vr(e,[0,0])&&e[0]>=-180&&e[0]<=180&&e[1]>=-90&&e[1]<=90&&(Za=!1,Nc("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),e}function Sy(e,t){return e}function ii(e,t){return e}function Mh(e,t,n){return function(i){let s,r;if(e.canWrapX()){const a=e.getExtent(),o=Pt(a);i=i.slice(0),r=Oc(i,e,o),r&&(i[0]=i[0]-r*o),i[0]=kt(i[0],a[0],a[2]),i[1]=kt(i[1],a[1],a[3]),s=n(i)}else s=n(i);return r&&t.canWrapX()&&(s[0]+=r*Pt(t.getExtent())),s}}function Py(){Va(_h),Va(vh),Ay(vh,_h,py,_y)}Py();function Ch(e,t,n){return function(i,s,r,a,o){if(!i)return;if(!s&&!t)return i;const l=t?0:r[0]*s,h=t?0:r[1]*s,u=o?o[0]:0,c=o?o[1]:0;let d=e[0]+l/2+u,f=e[2]-l/2+u,g=e[1]+h/2+c,m=e[3]-h/2+c;d>f&&(d=(f+d)/2,f=d),g>m&&(g=(m+g)/2,m=g);let _=kt(i[0],d,f),v=kt(i[1],g,m);if(a&&n&&s){const E=30*s;_+=-E*Math.log(1+Math.max(0,d-i[0])/E)+E*Math.log(1+Math.max(0,i[0]-f)/E),v+=-E*Math.log(1+Math.max(0,g-i[1])/E)+E*Math.log(1+Math.max(0,i[1]-m)/E)}return[_,v]}}function Ly(e){return e}function Wo(e,t,n,i){const s=Pt(t)/n[0],r=Pe(t)/n[1];return i?Math.min(e,Math.max(s,r)):Math.min(e,Math.min(s,r))}function qo(e,t,n){let i=Math.min(e,t);const s=50;return i*=Math.log(1+s*Math.max(0,e/t-1))/s+1,n&&(i=Math.max(i,n),i/=Math.log(1+s*Math.max(0,n/e-1))/s+1),kt(i,n/2,t*2)}function Oy(e,t,n,i){return t=t!==void 0?t:!0,function(s,r,a,o){if(s!==void 0){const l=e[0],h=e[e.length-1],u=n?Wo(l,n,a,i):l;if(o)return t?qo(s,u,h):kt(s,h,u);const c=Math.min(u,s),d=Math.floor(Oo(e,c,r));return e[d]>u&&d<e.length-1?e[d+1]:e[d]}}}function ky(e,t,n,i,s,r){return i=i!==void 0?i:!0,n=n!==void 0?n:0,function(a,o,l,h){if(a!==void 0){const u=s?Wo(t,s,l,r):t;if(h)return i?qo(a,u,n):kt(a,n,u);const c=1e-9,d=Math.ceil(Math.log(t/u)/Math.log(e)-c),f=-o*(.5-c)+.5,g=Math.min(u,a),m=Math.floor(Math.log(t/g)/Math.log(e)+f),_=Math.max(d,m),v=t/Math.pow(e,_);return kt(v,n,u)}}}function wh(e,t,n,i,s){return n=n!==void 0?n:!0,function(r,a,o,l){if(r!==void 0){const h=i?Wo(e,i,o,s):e;return!n||!l?kt(r,t,h):qo(r,h,t)}}}function Xo(e){if(e!==void 0)return 0}function Dh(e){if(e!==void 0)return e}function Ny(e){const t=2*Math.PI/e;return function(n,i){if(i)return n;if(n!==void 0)return n=Math.floor(n/t+.5)*t,n}}function $y(e){const t=e===void 0?Qs(5):e;return function(n,i){return i||n===void 0?n:Math.abs(n)<=t?0:n}}function zc(e){return Math.pow(e,3)}function Oi(e){return 1-zc(1-e)}function By(e){return 3*e*e-2*e*e*e}function zy(e){return e}function Uy(e,t,n,i,s,r){r=r||[];let a=0;for(let o=t;o<n;o+=i){const l=e[o],h=e[o+1];r[a++]=s[0]*l+s[2]*h+s[4],r[a++]=s[1]*l+s[3]*h+s[5]}return r&&r.length!=a&&(r.length=a),r}function jy(e,t,n,i,s,r,a){a=a||[];const o=Math.cos(s),l=Math.sin(s),h=r[0],u=r[1];let c=0;for(let d=t;d<n;d+=i){const f=e[d]-h,g=e[d+1]-u;a[c++]=h+f*o-g*l,a[c++]=u+f*l+g*o;for(let m=d+2;m<d+i;++m)a[c++]=e[m]}return a&&a.length!=c&&(a.length=c),a}function Gy(e,t,n,i,s,r,a,o){o=o||[];const l=a[0],h=a[1];let u=0;for(let c=t;c<n;c+=i){const d=e[c]-l,f=e[c+1]-h;o[u++]=l+s*d,o[u++]=h+r*f;for(let g=c+2;g<c+i;++g)o[u++]=e[g]}return o&&o.length!=u&&(o.length=u),o}function Wy(e,t,n,i,s,r,a){a=a||[];let o=0;for(let l=t;l<n;l+=i){a[o++]=e[l]+s,a[o++]=e[l+1]+r;for(let h=l+2;h<l+i;++h)a[o++]=e[h]}return a&&a.length!=o&&(a.length=o),a}const Th=fi();class qy extends Qe{constructor(){super(),this.extent_=jn(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=I_((t,n,i)=>{if(!i)return this.getSimplifiedGeometry(n);const s=this.clone();return s.applyTransform(i),s.getSimplifiedGeometry(n)})}simplifyTransformed(t,n){return this.simplifyTransformedInternal(this.getRevision(),t,n)}clone(){return Rt()}closestPointXY(t,n,i,s){return Rt()}containsXY(t,n){const i=this.getClosestPoint([t,n]);return i[0]===t&&i[1]===n}getClosestPoint(t,n){return n=n||[NaN,NaN],this.closestPointXY(t[0],t[1],n,1/0),n}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return Rt()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&Yr(n),this.extentRevision_=this.getRevision()}return Y_(this.extent_,t)}rotate(t,n){Rt()}scale(t,n,i){Rt()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return Rt()}getType(){return Rt()}applyTransform(t){Rt()}intersectsExtent(t){return Rt()}translate(t,n){Rt()}transform(t,n){const i=te(t),s=i.getUnits()=="tile-pixels"?function(r,a,o){const l=i.getExtent(),h=i.getWorldExtent(),u=Pe(h)/Pe(l);return rs(Th,h[0],h[3],u,-u,0,0,0),Uy(r,0,r.length,o,Th,a),Er(i,n)(r,a,o)}:Er(i,n);return this.applyTransform(s),this}}const Xy=qy;class Ky extends Xy{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(t){return K_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return Rt()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=this.getSimplifiedGeometryInternal(t);return n.getFlatCoordinates().length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,n){this.stride=Fh(t),this.layout=t,this.flatCoordinates=n}setCoordinates(t,n){Rt()}setLayout(t,n,i){let s;if(t)s=Fh(t);else{for(let r=0;r<i;++r){if(n.length===0){this.layout="XY",this.stride=2;return}n=n[0]}s=n.length,t=Zy(s)}this.layout=t,this.stride=s}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,n){const i=this.getFlatCoordinates();if(i){const s=this.getStride();jy(i,0,i.length,s,t,n,i),this.changed()}}scale(t,n,i){n===void 0&&(n=t),i||(i=as(this.getExtent()));const s=this.getFlatCoordinates();if(s){const r=this.getStride();Gy(s,0,s.length,r,t,n,i,s),this.changed()}}translate(t,n){const i=this.getFlatCoordinates();if(i){const s=this.getStride();Wy(i,0,i.length,s,t,n,i),this.changed()}}}function Zy(e){let t;return e==2?t="XY":e==3?t="XYZ":e==4&&(t="XYZM"),t}function Fh(e){let t;return e=="XY"?t=2:e=="XYZ"||e=="XYM"?t=3:e=="XYZM"&&(t=4),t}const Ko=Ky;function Ah(e,t,n,i,s,r,a){const o=e[t],l=e[t+1],h=e[n]-o,u=e[n+1]-l;let c;if(h===0&&u===0)c=t;else{const d=((s-o)*h+(r-l)*u)/(h*h+u*u);if(d>1)c=n;else if(d>0){for(let f=0;f<i;++f)a[f]=sy(e[t+f],e[n+f],d);a.length=i;return}else c=t}for(let d=0;d<i;++d)a[d]=e[c+d];a.length=i}function Uc(e,t,n,i,s){let r=e[t],a=e[t+1];for(t+=i;t<n;t+=i){const o=e[t],l=e[t+1],h=gi(r,a,o,l);h>s&&(s=h),r=o,a=l}return s}function Vy(e,t,n,i,s){for(let r=0,a=n.length;r<a;++r){const o=n[r];s=Uc(e,t,o,i,s),t=o}return s}function jc(e,t,n,i,s,r,a,o,l,h,u){if(t==n)return h;let c,d;if(s===0){if(d=gi(a,o,e[t],e[t+1]),d<h){for(c=0;c<i;++c)l[c]=e[t+c];return l.length=i,d}return h}u=u||[NaN,NaN];let f=t+i;for(;f<n;)if(Ah(e,f-i,f,i,a,o,u),d=gi(a,o,u[0],u[1]),d<h){for(h=d,c=0;c<i;++c)l[c]=u[c];l.length=i,f+=i}else f+=i*Math.max((Math.sqrt(d)-Math.sqrt(h))/s|0,1);if(r&&(Ah(e,n-i,t,i,a,o,u),d=gi(a,o,u[0],u[1]),d<h)){for(h=d,c=0;c<i;++c)l[c]=u[c];l.length=i}return h}function Hy(e,t,n,i,s,r,a,o,l,h,u){u=u||[NaN,NaN];for(let c=0,d=n.length;c<d;++c){const f=n[c];h=jc(e,t,f,i,s,r,a,o,l,h,u),t=f}return h}function Yy(e,t,n,i){for(let s=0,r=n.length;s<r;++s)e[t++]=n[s];return t}function Gc(e,t,n,i){for(let s=0,r=n.length;s<r;++s){const a=n[s];for(let o=0;o<i;++o)e[t++]=a[o]}return t}function Qy(e,t,n,i,s){s=s||[];let r=0;for(let a=0,o=n.length;a<o;++a){const l=Gc(e,t,n[a],i);s[r++]=l,t=l}return s.length=r,s}function Jy(e,t,n,i,s,r,a){const o=(n-t)/i;if(o<3){for(;t<n;t+=i)r[a++]=e[t],r[a++]=e[t+1];return a}const l=new Array(o);l[0]=1,l[o-1]=1;const h=[t,n-i];let u=0;for(;h.length>0;){const c=h.pop(),d=h.pop();let f=0;const g=e[d],m=e[d+1],_=e[c],v=e[c+1];for(let E=d+i;E<c;E+=i){const M=e[E],x=e[E+1],w=ny(M,x,g,m,_,v);w>f&&(u=E,f=w)}f>s&&(l[(u-t)/i]=1,d+i<u&&h.push(d,u),u+i<c&&h.push(u,c))}for(let c=0;c<o;++c)l[c]&&(r[a++]=e[t+c*i],r[a++]=e[t+c*i+1]);return a}function Zn(e,t){return t*Math.round(e/t)}function tv(e,t,n,i,s,r,a){if(t==n)return a;let o=Zn(e[t],s),l=Zn(e[t+1],s);t+=i,r[a++]=o,r[a++]=l;let h,u;do if(h=Zn(e[t],s),u=Zn(e[t+1],s),t+=i,t==n)return r[a++]=h,r[a++]=u,a;while(h==o&&u==l);for(;t<n;){const c=Zn(e[t],s),d=Zn(e[t+1],s);if(t+=i,c==h&&d==u)continue;const f=h-o,g=u-l,m=c-o,_=d-l;if(f*_==g*m&&(f<0&&m<f||f==m||f>0&&m>f)&&(g<0&&_<g||g==_||g>0&&_>g)){h=c,u=d;continue}r[a++]=h,r[a++]=u,o=h,l=u,h=c,u=d}return r[a++]=h,r[a++]=u,a}function ev(e,t,n,i,s,r,a,o){for(let l=0,h=n.length;l<h;++l){const u=n[l];a=tv(e,t,u,i,s,r,a),o.push(a),t=u}return a}function Wc(e,t,n,i,s){s=s!==void 0?s:[];let r=0;for(let a=t;a<n;a+=i)s[r++]=e.slice(a,a+i);return s.length=r,s}function nv(e,t,n,i,s){s=s!==void 0?s:[];let r=0;for(let a=0,o=n.length;a<o;++a){const l=n[a];s[r++]=Wc(e,t,l,i,s[r]),t=l}return s.length=r,s}function qc(e,t,n,i){let s=0,r=e[n-i],a=e[n-i+1];for(;t<n;t+=i){const o=e[t],l=e[t+1];s+=a*o-r*l,r=o,a=l}return s/2}function iv(e,t,n,i){let s=0;for(let r=0,a=n.length;r<a;++r){const o=n[r];s+=qc(e,t,o,i),t=o}return s}class xr extends Ko{constructor(t,n){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(n,t):this.setCoordinates(t,n)}clone(){return new xr(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,n,i,s){return s<Dc(this.getExtent(),t,n)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Uc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),jc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,n,i,s))}getArea(){return qc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Wc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const n=[];return n.length=Jy(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new xr(n,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Gc(this.flatCoordinates,0,t,this.stride),this.changed()}}const Rh=xr;let sv=class Xc extends Ko{constructor(t,n){super(),this.setCoordinates(t,n)}clone(){const t=new Xc(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,n,i,s){const r=this.flatCoordinates,a=gi(t,n,r[0],r[1]);if(a<s){const o=this.stride;for(let l=0;l<o;++l)i[l]=r[l];return i.length=o,a}return s}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(t){return X_(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return Tc(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Yy(this.flatCoordinates,0,t,this.stride),this.changed()}};const rv=sv;function av(e,t,n,i,s){return!Ac(s,function(a){return!Sn(e,t,n,i,a[0],a[1])})}function Sn(e,t,n,i,s,r){let a=0,o=e[n-i],l=e[n-i+1];for(;t<n;t+=i){const h=e[t],u=e[t+1];l<=r?u>r&&(h-o)*(r-l)-(s-o)*(u-l)>0&&a++:u<=r&&(h-o)*(r-l)-(s-o)*(u-l)<0&&a--,o=h,l=u}return a!==0}function Kc(e,t,n,i,s,r){if(n.length===0||!Sn(e,t,n[0],i,s,r))return!1;for(let a=1,o=n.length;a<o;++a)if(Sn(e,n[a-1],n[a],i,s,r))return!1;return!0}function ov(e,t,n,i,s,r,a){let o,l,h,u,c,d,f;const g=s[r+1],m=[];for(let E=0,M=n.length;E<M;++E){const x=n[E];for(u=e[x-i],d=e[x-i+1],o=t;o<x;o+=i)c=e[o],f=e[o+1],(g<=d&&f<=g||d<=g&&g<=f)&&(h=(g-d)/(f-d)*(c-u)+u,m.push(h)),u=c,d=f}let _=NaN,v=-1/0;for(m.sort(Lo),u=m[0],o=1,l=m.length;o<l;++o){c=m[o];const E=Math.abs(c-u);E>v&&(h=(u+c)/2,Kc(e,t,n,i,h,g)&&(_=h,v=E)),u=c}return isNaN(_)&&(_=s[r]),a?(a.push(_,g,v),a):[_,g,v]}function lv(e,t,n,i,s){let r;for(t+=i;t<n;t+=i)if(r=s(e.slice(t-i,t),e.slice(t,t+i)),r)return r;return!1}function Zc(e,t,n,i,s){const r=Fc(jn(),e,t,n,i);return ps(s,r)?q_(s,r)||r[0]>=s[0]&&r[2]<=s[2]||r[1]>=s[1]&&r[3]<=s[3]?!0:lv(e,t,n,i,function(a,o){return Q_(s,a,o)}):!1}function Vc(e,t,n,i,s){return!!(Zc(e,t,n,i,s)||Sn(e,t,n,i,s[0],s[1])||Sn(e,t,n,i,s[0],s[3])||Sn(e,t,n,i,s[2],s[1])||Sn(e,t,n,i,s[2],s[3]))}function hv(e,t,n,i,s){if(!Vc(e,t,n[0],i,s))return!1;if(n.length===1)return!0;for(let r=1,a=n.length;r<a;++r)if(av(e,n[r-1],n[r],i,s)&&!Zc(e,n[r-1],n[r],i,s))return!1;return!0}function uv(e,t,n,i){for(;t<n-i;){for(let s=0;s<i;++s){const r=e[t+s];e[t+s]=e[n-i+s],e[n-i+s]=r}t+=i,n-=i}}function Hc(e,t,n,i){let s=0,r=e[n-i],a=e[n-i+1];for(;t<n;t+=i){const o=e[t],l=e[t+1];s+=(o-r)*(l+a),r=o,a=l}return s===0?void 0:s>0}function cv(e,t,n,i,s){s=s!==void 0?s:!1;for(let r=0,a=n.length;r<a;++r){const o=n[r],l=Hc(e,t,o,i);if(r===0){if(s&&l||!s&&!l)return!1}else if(s&&!l||!s&&l)return!1;t=o}return!0}function Ih(e,t,n,i,s){s=s!==void 0?s:!1;for(let r=0,a=n.length;r<a;++r){const o=n[r],l=Hc(e,t,o,i);(r===0?s&&l||!s&&!l:s&&!l||!s&&l)&&uv(e,t,o,i),t=o}return t}class ls extends Ko{constructor(t,n,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,n!==void 0&&i?(this.setFlatCoordinates(n,t),this.ends_=i):this.setCoordinates(t,n)}appendLinearRing(t){this.flatCoordinates?A_(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new ls(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,n,i,s){return s<Dc(this.getExtent(),t,n)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Vy(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Hy(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,n,i,s))}containsXY(t,n){return Kc(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,n)}getArea(){return iv(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let n;return t!==void 0?(n=this.getOrientedFlatCoordinates().slice(),Ih(n,0,this.ends_,this.stride,t)):n=this.flatCoordinates,nv(n,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=as(this.getExtent());this.flatInteriorPoint_=ov(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new rv(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new Rh(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,n=this.flatCoordinates,i=this.ends_,s=[];let r=0;for(let a=0,o=i.length;a<o;++a){const l=i[a],h=new Rh(n.slice(r,l),t);s.push(h),r=l}return s}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;cv(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Ih(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const n=[],i=[];return n.length=ev(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),n,0,i),new ls(n,"XY",i)}getType(){return"Polygon"}intersectsExtent(t){return hv(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=Qy(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}function Sh(e){if(ea(e))throw new Error("Cannot create polygon from empty extent");const t=e[0],n=e[1],i=e[2],s=e[3],r=[t,n,t,s,i,s,i,n,t,n];return new ls(r,"XY",[r.length])}const ya=0;class dv extends Qe{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=jo(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&Ty(),t.center&&(t.center=Ke(t.center,this.projection_)),t.extent&&(t.extent=ii(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const n=Object.assign({},t);for(const o in Te)delete n[o];this.setProperties(n,!0);const i=gv(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;const s=fv(t),r=i.constraint,a=mv(t);this.constraints_={center:s,resolution:r,rotation:a},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let n=this.padding_;this.padding_=t;const i=this.getCenterInternal();if(i){const s=t||[0,0,0,0];n=n||[0,0,0,0];const r=this.getResolution(),a=r/2*(s[3]-n[3]+n[1]-s[1]),o=r/2*(s[0]-n[0]+n[2]-s[2]);this.setCenterInternal([i[0]+a,i[1]-o])}}getUpdatedOptions_(t){const n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),Object.assign({},n,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const n=new Array(arguments.length);for(let i=0;i<n.length;++i){let s=arguments[i];s.center&&(s=Object.assign({},s),s.center=Ke(s.center,this.getProjection())),s.anchor&&(s=Object.assign({},s),s.anchor=Ke(s.anchor,this.getProjection())),n[i]=s}this.animateInternal.apply(this,n)}animateInternal(t){let n=arguments.length,i;n>1&&typeof arguments[n-1]=="function"&&(i=arguments[n-1],--n);let s=0;for(;s<n&&!this.isDef();++s){const u=arguments[s];u.center&&this.setCenterInternal(u.center),u.zoom!==void 0?this.setZoom(u.zoom):u.resolution&&this.setResolution(u.resolution),u.rotation!==void 0&&this.setRotation(u.rotation)}if(s===n){i&&Bs(i,!0);return}let r=Date.now(),a=this.targetCenter_.slice(),o=this.targetResolution_,l=this.targetRotation_;const h=[];for(;s<n;++s){const u=arguments[s],c={start:r,complete:!1,anchor:u.anchor,duration:u.duration!==void 0?u.duration:1e3,easing:u.easing||By,callback:i};if(u.center&&(c.sourceCenter=a,c.targetCenter=u.center.slice(),a=c.targetCenter),u.zoom!==void 0?(c.sourceResolution=o,c.targetResolution=this.getResolutionForZoom(u.zoom),o=c.targetResolution):u.resolution&&(c.sourceResolution=o,c.targetResolution=u.resolution,o=c.targetResolution),u.rotation!==void 0){c.sourceRotation=l;const d=mi(u.rotation-l+Math.PI,2*Math.PI)-Math.PI;c.targetRotation=l+d,l=c.targetRotation}pv(c)?c.complete=!0:r+=c.duration,h.push(c)}this.animations_.push(h),this.setHint(Me.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Me.ANIMATING]>0}getInteracting(){return this.hints_[Me.INTERACTING]>0}cancelAnimations(){this.setHint(Me.ANIMATING,-this.hints_[Me.ANIMATING]);let t;for(let n=0,i=this.animations_.length;n<i;++n){const s=this.animations_[n];if(s[0].callback&&Bs(s[0].callback,!1),!t)for(let r=0,a=s.length;r<a;++r){const o=s[r];if(!o.complete){t=o.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let n=!1;for(let i=this.animations_.length-1;i>=0;--i){const s=this.animations_[i];let r=!0;for(let a=0,o=s.length;a<o;++a){const l=s[a];if(l.complete)continue;const h=t-l.start;let u=l.duration>0?h/l.duration:1;u>=1?(l.complete=!0,u=1):r=!1;const c=l.easing(u);if(l.sourceCenter){const d=l.sourceCenter[0],f=l.sourceCenter[1],g=l.targetCenter[0],m=l.targetCenter[1];this.nextCenter_=l.targetCenter;const _=d+c*(g-d),v=f+c*(m-f);this.targetCenter_=[_,v]}if(l.sourceResolution&&l.targetResolution){const d=c===1?l.targetResolution:l.sourceResolution+c*(l.targetResolution-l.sourceResolution);if(l.anchor){const f=this.getViewportSize_(this.getRotation()),g=this.constraints_.resolution(d,0,f,!0);this.targetCenter_=this.calculateCenterZoom(g,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=d,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const d=c===1?mi(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+c*(l.targetRotation-l.sourceRotation);if(l.anchor){const f=this.constraints_.rotation(d,!0);this.targetCenter_=this.calculateCenterRotate(f,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=d}if(this.applyTargetState_(!0),n=!0,!l.complete)break}if(r){this.animations_[i]=null,this.setHint(Me.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const a=s[0].callback;a&&Bs(a,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,n){let i;const s=this.getCenterInternal();return s!==void 0&&(i=[s[0]-n[0],s[1]-n[1]],zo(i,t-this.getRotation()),by(i,n)),i}calculateCenterZoom(t,n){let i;const s=this.getCenterInternal(),r=this.getResolution();if(s!==void 0&&r!==void 0){const a=n[0]-t*(n[0]-s[0])/r,o=n[1]-t*(n[1]-s[1])/r;i=[a,o]}return i}getViewportSize_(t){const n=this.viewportSize_;if(t){const i=n[0],s=n[1];return[Math.abs(i*Math.cos(t))+Math.abs(s*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(s*Math.cos(t))]}return n}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&Ha(t,this.getProjection())}getCenterInternal(){return this.get(Te.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const n=this.calculateExtentInternal(t);return Sy(n,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const n=this.getCenterInternal();Mt(n,"The view center is not defined");const i=this.getResolution();Mt(i!==void 0,"The view resolution is not defined");const s=this.getRotation();return Mt(s!==void 0,"The view rotation is not defined"),qa(n,i,s,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(Te.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,n){return this.getResolutionForExtentInternal(ii(t,this.getProjection()),n)}getResolutionForExtentInternal(t,n){n=n||this.getViewportSizeMinusPadding_();const i=Pt(t)/n[0],s=Pe(t)/n[1];return Math.max(i,s)}getResolutionForValueFunction(t){t=t||2;const n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(n/i)/Math.log(t);return function(r){return n/Math.pow(t,r*s)}}getRotation(){return this.get(Te.ROTATION)}getValueForResolutionFunction(t){const n=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),s=this.minResolution_,r=Math.log(i/s)/n;return function(a){return Math.log(i/a)/n/r}}getViewportSizeMinusPadding_(t){let n=this.getViewportSize_(t);const i=this.padding_;return i&&(n=[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]),n}getState(){const t=this.getProjection(),n=this.getResolution(),i=this.getRotation();let s=this.getCenterInternal();const r=this.padding_;if(r){const a=this.getViewportSizeMinusPadding_();s=va(s,this.getViewportSize_(),[a[0]/2+r[3],a[1]/2+r[0]],n,i)}return{center:s.slice(0),projection:t!==void 0?t:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const n=this.getResolution();return n!==void 0&&(t=this.getZoomForResolution(n)),t}getZoomForResolution(t){let n=this.minZoom_||0,i,s;if(this.resolutions_){const r=Oo(this.resolutions_,t,1);n=r,i=this.resolutions_[r],r==this.resolutions_.length-1?s=2:s=i/this.resolutions_[r+1]}else i=this.maxResolution_,s=this.zoomFactor_;return n+Math.log(i/t)/Math.log(s)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const n=kt(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(i,kt(t-n,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,n){let i;if(Mt(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(t)){Mt(!ea(t),"Cannot fit empty extent provided as `geometry`");const s=ii(t,this.getProjection());i=Sh(s)}else if(t.getType()==="Circle"){const s=ii(t.getExtent(),this.getProjection());i=Sh(s),i.rotate(this.getRotation(),as(s))}else i=t;this.fitInternal(i,n)}rotatedExtentForGeometry(t){const n=this.getRotation(),i=Math.cos(n),s=Math.sin(-n),r=t.getFlatCoordinates(),a=t.getStride();let o=1/0,l=1/0,h=-1/0,u=-1/0;for(let c=0,d=r.length;c<d;c+=a){const f=r[c]*i-r[c+1]*s,g=r[c]*s+r[c+1]*i;o=Math.min(o,f),l=Math.min(l,g),h=Math.max(h,f),u=Math.max(u,g)}return[o,l,h,u]}fitInternal(t,n){n=n||{};let i=n.size;i||(i=this.getViewportSizeMinusPadding_());const s=n.padding!==void 0?n.padding:[0,0,0,0],r=n.nearest!==void 0?n.nearest:!1;let a;n.minResolution!==void 0?a=n.minResolution:n.maxZoom!==void 0?a=this.getResolutionForZoom(n.maxZoom):a=0;const o=this.rotatedExtentForGeometry(t);let l=this.getResolutionForExtentInternal(o,[i[0]-s[1]-s[3],i[1]-s[0]-s[2]]);l=isNaN(l)?a:Math.max(l,a),l=this.getConstrainedResolution(l,r?0:1);const h=this.getRotation(),u=Math.sin(h),c=Math.cos(h),d=as(o);d[0]+=(s[1]-s[3])/2*l,d[1]+=(s[0]-s[2])/2*l;const f=d[0]*c-d[1]*u,g=d[1]*c+d[0]*u,m=this.getConstrainedCenter([f,g],l),_=n.callback?n.callback:pr;n.duration!==void 0?this.animateInternal({resolution:l,center:m,duration:n.duration,easing:n.easing},_):(this.targetResolution_=l,this.targetCenter_=m,this.applyTargetState_(!1,!0),Bs(_,!0))}centerOn(t,n,i){this.centerOnInternal(Ke(t,this.getProjection()),n,i)}centerOnInternal(t,n,i){this.setCenterInternal(va(t,n,i,this.getResolution(),this.getRotation()))}calculateCenterShift(t,n,i,s){let r;const a=this.padding_;if(a&&t){const o=this.getViewportSizeMinusPadding_(-i),l=va(t,s,[o[0]/2+a[3],o[1]/2+a[0]],n,i);r=[t[0]-l[0],t[1]-l[1]]}return r}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){const n=Ha(this.targetCenter_,this.getProjection());this.setCenter([n[0]+t[0],n[1]+t[1]])}adjustCenterInternal(t){const n=this.targetCenter_;this.setCenterInternal([n[0]+t[0],n[1]+t[1]])}adjustResolution(t,n){n=n&&Ke(n,this.getProjection()),this.adjustResolutionInternal(t,n)}adjustResolutionInternal(t,n){const i=this.getAnimating()||this.getInteracting(),s=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*t,0,s,i);n&&(this.targetCenter_=this.calculateCenterZoom(r,n)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,n){this.adjustResolution(Math.pow(this.zoomFactor_,-t),n)}adjustRotation(t,n){n&&(n=Ke(n,this.getProjection())),this.adjustRotationInternal(t,n)}adjustRotationInternal(t,n){const i=this.getAnimating()||this.getInteracting(),s=this.constraints_.rotation(this.targetRotation_+t,i);n&&(this.targetCenter_=this.calculateCenterRotate(s,n)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&Ke(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,n){return this.hints_[t]+=n,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,n){const i=this.getAnimating()||this.getInteracting()||n,s=this.constraints_.rotation(this.targetRotation_,i),r=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,0,r,i),o=this.constraints_.center(this.targetCenter_,a,r,i,this.calculateCenterShift(this.targetCenter_,a,s,r));this.get(Te.ROTATION)!==s&&this.set(Te.ROTATION,s),this.get(Te.RESOLUTION)!==a&&(this.set(Te.RESOLUTION,a),this.set("zoom",this.getZoom(),!0)),(!o||!this.get(Te.CENTER)||!vr(this.get(Te.CENTER),o))&&this.set(Te.CENTER,o),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,n,i){t=t!==void 0?t:200;const s=n||0,r=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,s,a),l=this.constraints_.center(this.targetCenter_,o,a,!1,this.calculateCenterShift(this.targetCenter_,o,r,a));if(t===0&&!this.cancelAnchor_){this.targetResolution_=o,this.targetRotation_=r,this.targetCenter_=l,this.applyTargetState_();return}i=i||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==o||this.getRotation()!==r||!this.getCenterInternal()||!vr(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:l,resolution:o,duration:t,easing:Oi,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Me.INTERACTING,1)}endInteraction(t,n,i){i=i&&Ke(i,this.getProjection()),this.endInteractionInternal(t,n,i)}endInteractionInternal(t,n,i){this.getInteracting()&&(this.setHint(Me.INTERACTING,-1),this.resolveConstraints(t,n,i))}getConstrainedCenter(t,n){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,n||this.getResolution(),i)}getConstrainedZoom(t,n){const i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,n))}getConstrainedResolution(t,n){n=n||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,n,i)}}function Bs(e,t){setTimeout(function(){e(t)},0)}function fv(e){if(e.extent!==void 0){const n=e.smoothExtentConstraint!==void 0?e.smoothExtentConstraint:!0;return Ch(e.extent,e.constrainOnlyCenter,n)}const t=jo(e.projection,"EPSG:3857");if(e.multiWorld!==!0&&t.isGlobal()){const n=t.getExtent().slice();return n[0]=-1/0,n[2]=1/0,Ch(n,!1,!1)}return Ly}function gv(e){let t,n,i,a=e.minZoom!==void 0?e.minZoom:ya,o=e.maxZoom!==void 0?e.maxZoom:28;const l=e.zoomFactor!==void 0?e.zoomFactor:2,h=e.multiWorld!==void 0?e.multiWorld:!1,u=e.smoothResolutionConstraint!==void 0?e.smoothResolutionConstraint:!0,c=e.showFullExtent!==void 0?e.showFullExtent:!1,d=jo(e.projection,"EPSG:3857"),f=d.getExtent();let g=e.constrainOnlyCenter,m=e.extent;if(!h&&!m&&d.isGlobal()&&(g=!1,m=f),e.resolutions!==void 0){const _=e.resolutions;n=_[a],i=_[o]!==void 0?_[o]:_[_.length-1],e.constrainResolution?t=Oy(_,u,!g&&m,c):t=wh(n,i,u,!g&&m,c)}else{const v=(f?Math.max(Pt(f),Pe(f)):360*os.degrees/d.getMetersPerUnit())/$o/Math.pow(2,ya),E=v/Math.pow(2,28-ya);n=e.maxResolution,n!==void 0?a=0:n=v/Math.pow(l,a),i=e.minResolution,i===void 0&&(e.maxZoom!==void 0?e.maxResolution!==void 0?i=n/Math.pow(l,o):i=v/Math.pow(l,o):i=E),o=a+Math.floor(Math.log(n/i)/Math.log(l)),i=n/Math.pow(l,o-a),e.constrainResolution?t=ky(l,n,i,u,!g&&m,c):t=wh(n,i,u,!g&&m,c)}return{constraint:t,maxResolution:n,minResolution:i,minZoom:a,zoomFactor:l}}function mv(e){if(e.enableRotation!==void 0?e.enableRotation:!0){const n=e.constrainRotation;return n===void 0||n===!0?$y():n===!1?Dh:typeof n=="number"?Ny(n):Dh}return Xo}function pv(e){return!(e.sourceCenter&&e.targetCenter&&!vr(e.sourceCenter,e.targetCenter)||e.sourceResolution!==e.targetResolution||e.sourceRotation!==e.targetRotation)}function va(e,t,n,i,s){const r=Math.cos(-s);let a=Math.sin(-s),o=e[0]*r-e[1]*a,l=e[1]*r+e[0]*a;o+=(t[0]/2-n[0])*i,l+=(n[1]-t[1]/2)*i,a=-a;const h=o*r-l*a,u=l*r+o*a;return[h,u]}const ze=dv;class _v extends Pc{constructor(t){const n=Object.assign({},t);delete n.source,super(n),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(dt.SOURCE,this.handleSourcePropertyChange_);const i=t.source?t.source:null;this.setSource(i)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(dt.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Lt(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=ft(t,nt.CHANGE,this.handleSourceChange_,this),t.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}isVisible(t){let n;const i=this.getMapInternal();!t&&i&&(t=i.getView()),t instanceof ze?n={viewState:t.getState(),extent:t.calculateExtent()}:n=t,!n.layerStatesArray&&i&&(n.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let s;n.layerStatesArray?s=n.layerStatesArray.find(a=>a.layer===this):s=this.getLayerState();const r=this.getExtent();return Zo(s,n.viewState)&&(!r||ps(r,n.extent))}getAttributions(t){if(!this.isVisible(t))return[];let n;const i=this.getSource();if(i&&(n=i.getAttributions()),!n)return[];const s=t instanceof ze?t.getViewStateAndExtent():t;let r=n(s);return Array.isArray(r)||(r=[r]),r}render(t,n){const i=this.getRenderer();return i.prepareFrame(t)?(this.rendered=!0,i.renderFrame(t,n)):null}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set(dt.MAP,t)}getMapInternal(){return this.get(dt.MAP)}setMap(t){this.mapPrecomposeKey_&&(Lt(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Lt(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=ft(t,un.PRECOMPOSE,function(n){const s=n.frameState.layerStatesArray,r=this.getLayerState(!1);Mt(!s.some(function(a){return a.layer===r.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),s.push(r)},this),this.mapRenderKey_=ft(this,nt.CHANGE,t.render,t),this.changed())}setSource(t){this.set(dt.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function Zo(e,t){if(!e.visible)return!1;const n=t.resolution;if(n<e.minResolution||n>=e.maxResolution)return!1;const i=t.zoom;return i>e.minZoom&&i<=e.maxZoom}const Vo=_v;class yv extends Po{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,n){Rt()}calculateMatrices2D(t){const n=t.viewState,i=t.coordinateToPixelTransform,s=t.pixelToCoordinateTransform;rs(i,t.size[0]/2,t.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),wc(s,i)}forEachFeatureAtCoordinate(t,n,i,s,r,a,o,l){let h;const u=n.viewState;function c(x,w,S,Y){return r.call(a,w,x?S:null,Y)}const d=u.projection,f=Cy(t.slice(),d),g=[[0,0]];if(d.canWrapX()&&s){const x=d.getExtent(),w=Pt(x);g.push([-w,0],[w,0])}const m=n.layerStatesArray,_=m.length,v=[],E=[];for(let x=0;x<g.length;x++)for(let w=_-1;w>=0;--w){const S=m[w],Y=S.layer;if(Y.hasRenderer()&&Zo(S,u)&&o.call(l,Y)){const W=Y.getRenderer(),st=Y.getSource();if(W&&st){const at=st.getWrapX()?f:t,yt=c.bind(null,S.managed);E[0]=at[0]+g[x][0],E[1]=at[1]+g[x][1],h=W.forEachFeatureAtCoordinate(E,n,i,yt,v)}if(h)return h}}if(v.length===0)return;const M=1/v.length;return v.forEach((x,w)=>x.distanceSq+=w*M),v.sort((x,w)=>x.distanceSq-w.distanceSq),v.some(x=>h=x.callback(x.feature,x.layer,x.geometry)),h}hasFeatureAtCoordinate(t,n,i,s,r,a){return this.forEachFeatureAtCoordinate(t,n,i,s,mr,this,r,a)!==void 0}getMap(){return this.map_}renderFrame(t){Rt()}flushDeclutterItems(t){}scheduleExpireIconCache(t){Sc.canExpireCache()&&t.postRenderFunctions.push(vv)}}function vv(e,t){Sc.expire()}const Ev=yv;class xv extends vn{constructor(t,n,i,s){super(t),this.inversePixelTransform=n,this.frameState=i,this.context=s}}const Yc=xv,zs="ol-hidden",na="ol-unselectable",Ho="ol-control",Ph="ol-collapsed";function Ti(e,t,n,i){let s;return n&&n.length?s=n.shift():Mc?s=new OffscreenCanvas(e||300,t||300):s=document.createElement("canvas"),e&&(s.width=e),t&&(s.height=t),s.getContext("2d",i)}function Yo(e){const t=e.canvas;t.width=1,t.height=1,e.clearRect(0,0,1,1)}function Lh(e,t){const n=t.parentNode;n&&n.replaceChild(e,t)}function Ya(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function bv(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function Mv(e,t){const n=e.childNodes;for(let i=0;;++i){const s=n[i],r=t[i];if(!s&&!r)break;if(s!==r){if(!s){e.appendChild(r);continue}if(!r){e.removeChild(s),--i;continue}e.insertBefore(r,s)}}}const Cv=new Qe;class wv extends Ev{constructor(t){super(t),this.fontChangeListenerKey_=ft(Cv,ss.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div");const n=this.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",this.element_.className=na+" ol-layers";const i=t.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0,this.declutterLayers_=[]}dispatchRenderEvent(t,n){const i=this.getMap();if(i.hasListener(t)){const s=new Yc(t,void 0,n);i.dispatchEvent(s)}}disposeInternal(){Lt(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(un.PRECOMPOSE,t);const n=t.layerStatesArray.sort(function(a,o){return a.zIndex-o.zIndex}),i=t.viewState;this.children_.length=0;const s=this.declutterLayers_;s.length=0;let r=null;for(let a=0,o=n.length;a<o;++a){const l=n[a];t.layerIndex=a;const h=l.layer,u=h.getSourceState();if(!Zo(l,i)||u!="ready"&&u!="undefined"){h.unrender();continue}const c=h.render(t,r);c&&(c!==r&&(this.children_.push(c),r=c),"getDeclutter"in h&&s.push(h))}this.flushDeclutterItems(t),Mv(this.element_,this.children_),this.dispatchRenderEvent(un.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}flushDeclutterItems(t){const n=this.declutterLayers_;for(let i=n.length-1;i>=0;--i)n[i].renderDeclutter(t);n.length=0}}const Dv=wv;class an extends vn{constructor(t,n){super(t),this.layer=n}}const Ea={LAYERS:"layers"};class Qo extends Pc{constructor(t){t=t||{};const n=Object.assign({},t);delete n.layers;let i=t.layers;super(n),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Ea.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new Ve(i.slice(),{unique:!0}):Mt(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new Ve(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Lt),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(ft(t,Ce.ADD,this.handleLayersAdd_,this),ft(t,Ce.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(Lt);Vr(this.listenerKeys_);const n=t.getArray();for(let i=0,s=n.length;i<s;i++){const r=n[i];this.registerLayerListeners_(r),this.dispatchEvent(new an("addlayer",r))}this.changed()}registerLayerListeners_(t){const n=[ft(t,ss.PROPERTYCHANGE,this.handleLayerChange_,this),ft(t,nt.CHANGE,this.handleLayerChange_,this)];t instanceof Qo&&n.push(ft(t,"addlayer",this.handleLayerGroupAdd_,this),ft(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[de(t)]=n}handleLayerGroupAdd_(t){this.dispatchEvent(new an("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new an("removelayer",t.layer))}handleLayersAdd_(t){const n=t.element;this.registerLayerListeners_(n),this.dispatchEvent(new an("addlayer",n)),this.changed()}handleLayersRemove_(t){const n=t.element,i=de(n);this.listenerKeys_[i].forEach(Lt),delete this.listenerKeys_[i],this.dispatchEvent(new an("removelayer",n)),this.changed()}getLayers(){return this.get(Ea.LAYERS)}setLayers(t){const n=this.getLayers();if(n){const i=n.getArray();for(let s=0,r=i.length;s<r;++s)this.dispatchEvent(new an("removelayer",i[s]))}this.set(Ea.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(n){n.getLayersArray(t)}),t}getLayerStatesArray(t){const n=t!==void 0?t:[],i=n.length;this.getLayers().forEach(function(a){a.getLayerStatesArray(n)});const s=this.getLayerState();let r=s.zIndex;!t&&s.zIndex===void 0&&(r=0);for(let a=i,o=n.length;a<o;a++){const l=n[a];l.opacity*=s.opacity,l.visible=l.visible&&s.visible,l.maxResolution=Math.min(l.maxResolution,s.maxResolution),l.minResolution=Math.max(l.minResolution,s.minResolution),l.minZoom=Math.max(l.minZoom,s.minZoom),l.maxZoom=Math.min(l.maxZoom,s.maxZoom),s.extent!==void 0&&(l.extent!==void 0?l.extent=Yi(l.extent,s.extent):l.extent=s.extent),l.zIndex===void 0&&(l.zIndex=r)}return n}getSourceState(){return"ready"}}const ia=Qo;class Tv extends vn{constructor(t,n,i){super(t),this.map=n,this.frameState=i!==void 0?i:null}}const Jn=Tv;class Fv extends Jn{constructor(t,n,i,s,r,a){super(t,n,r),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=s!==void 0?s:!1,this.activePointers=a}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const nn=Fv,At={SINGLECLICK:"singleclick",CLICK:nt.CLICK,DBLCLICK:nt.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Qa={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class Av extends ko{constructor(t,n){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=n===void 0?1:n,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=ft(i,Qa.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=ft(i,Qa.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(nt.TOUCHMOVE,this.boundHandleTouchMove_,Cc?{passive:!1}:!1)}emulateClick_(t){let n=new nn(At.CLICK,this.map_,t);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new nn(At.DBLCLICK,this.map_,t),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new nn(At.SINGLECLICK,this.map_,t);this.dispatchEvent(i)},250)}updateActivePointers_(t){const n=t,i=n.pointerId;if(n.type==At.POINTERUP||n.type==At.POINTERCANCEL){delete this.trackedTouches_[i];for(const s in this.trackedTouches_)if(this.trackedTouches_[s].target!==n.target){delete this.trackedTouches_[s];break}}else(n.type==At.POINTERDOWN||n.type==At.POINTERMOVE)&&(this.trackedTouches_[i]=n);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const n=new nn(At.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Lt),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);const n=new nn(At.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(n),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(ft(i,At.POINTERMOVE,this.handlePointerMove_,this),ft(i,At.POINTERUP,this.handlePointerUp_,this),ft(this.element_,At.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(ft(this.element_.getRootNode(),At.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const n=new nn(At.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const n=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new nn(At.POINTERMOVE,this.map_,t,n))}handleTouchMove_(t){const n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Lt(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(nt.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Lt(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Lt),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Rv=Av,sn={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Zt={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},br=1/0;class Iv{constructor(t,n){this.priorityFunction_=t,this.keyFunction_=n,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Vr(this.queuedElements_)}dequeue(){const t=this.elements_,n=this.priorities_,i=t[0];t.length==1?(t.length=0,n.length=0):(t[0]=t.pop(),n[0]=n.pop(),this.siftUp_(0));const s=this.keyFunction_(i);return delete this.queuedElements_[s],i}enqueue(t){Mt(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const n=this.priorityFunction_(t);return n!=br?(this.elements_.push(t),this.priorities_.push(n),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const n=this.elements_,i=this.priorities_,s=n.length,r=n[t],a=i[t],o=t;for(;t<s>>1;){const l=this.getLeftChildIndex_(t),h=this.getRightChildIndex_(t),u=h<s&&i[h]<i[l]?h:l;n[t]=n[u],i[t]=i[u],t=u}n[t]=r,i[t]=a,this.siftDown_(o,t)}siftDown_(t,n){const i=this.elements_,s=this.priorities_,r=i[n],a=s[n];for(;n>t;){const o=this.getParentIndex_(n);if(s[o]>a)i[n]=i[o],s[n]=s[o],n=o;else break}i[n]=r,s[n]=a}reprioritize(){const t=this.priorityFunction_,n=this.elements_,i=this.priorities_;let s=0;const r=n.length;let a,o,l;for(o=0;o<r;++o)a=n[o],l=t(a),l==br?delete this.queuedElements_[this.keyFunction_(a)]:(i[s]=l,n[s++]=a);n.length=s,i.length=s,this.heapify_()}}const Sv=Iv,X={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class Pv extends Sv{constructor(t,n){super(function(i){return t.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=n,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const n=super.enqueue(t);return n&&t[0].addEventListener(nt.CHANGE,this.boundHandleTileChange_),n}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const n=t.target,i=n.getState();if(i===X.LOADED||i===X.ERROR||i===X.EMPTY){i!==X.ERROR&&n.removeEventListener(nt.CHANGE,this.boundHandleTileChange_);const s=n.getKey();s in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[s],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,n){let i=0,s,r,a;for(;this.tilesLoading_<t&&i<n&&this.getCount()>0;)r=this.dequeue()[0],a=r.getKey(),s=r.getState(),s===X.IDLE&&!(a in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[a]=!0,++this.tilesLoading_,++i,r.load())}}const Lv=Pv;function Ov(e,t,n,i,s){if(!e||!(n in e.wantedTiles)||!e.wantedTiles[n][t.getKey()])return br;const r=e.viewState.center,a=i[0]-r[0],o=i[1]-r[1];return 65536*Math.log(s)+Math.sqrt(a*a+o*o)/s}class kv extends Qe{constructor(t){super();const n=t.element;n&&!t.target&&!n.style.pointerEvents&&(n.style.pointerEvents="auto"),this.element=n||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){Ya(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&Ya(this.element);for(let n=0,i=this.listenerKeys.length;n<i;++n)Lt(this.listenerKeys[n]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==pr&&this.listenerKeys.push(ft(t,sn.POSTRENDER,this.render,this)),t.render())}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}}const Jo=kv;class Nv extends Jo{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const n=t.className!==void 0?t.className:"ol-attribution",i=t.tipLabel!==void 0?t.tipLabel:"Attributions",s=t.expandClassName!==void 0?t.expandClassName:n+"-expand",r=t.collapseLabel!==void 0?t.collapseLabel:"›",a=t.collapseClassName!==void 0?t.collapseClassName:n+"-collapse";typeof r=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r,this.collapseLabel_.className=a):this.collapseLabel_=r;const o=t.label!==void 0?t.label:"i";typeof o=="string"?(this.label_=document.createElement("span"),this.label_.textContent=o,this.label_.className=s):this.label_=o;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(nt.CLICK,this.handleClick_.bind(this),!1);const h=n+" "+na+" "+Ho+(this.collapsed_&&this.collapsible_?" "+Ph:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=h,u.appendChild(this.toggleButton_),u.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const n=Array.from(new Set(this.getMap().getAllLayers().flatMap(s=>s.getAttributions(t)))),i=!this.getMap().getAllLayers().some(s=>s.getSource()&&s.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(i),n}updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=this.collectSourceAttributions_(t),i=n.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!Kr(n,this.renderedAttributions_)){bv(this.ulElement_);for(let s=0,r=n.length;s<r;++s){const a=document.createElement("li");a.innerHTML=n[s],this.ulElement_.appendChild(a)}this.renderedAttributions_=n}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Ph),this.collapsed_?Lh(this.collapseLabel_,this.label_):Lh(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}const $v=Nv;class Bv extends Jo{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const n=t.className!==void 0?t.className:"ol-rotate",i=t.label!==void 0?t.label:"⇧",s=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=s,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(s));const r=t.tipLabel?t.tipLabel:"Reset rotation",a=document.createElement("button");a.className=n+"-reset",a.setAttribute("type","button"),a.title=r,a.appendChild(this.label_),a.addEventListener(nt.CLICK,this.handleClick_.bind(this),!1);const o=n+" "+na+" "+Ho,l=this.element;l.className=o,l.appendChild(a),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(zs)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const n=this.getMap().getView();if(!n)return;const i=n.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:Oi}):n.setRotation(0))}render(t){const n=t.frameState;if(!n)return;const i=n.viewState.rotation;if(i!=this.rotation_){const s="rotate("+i+"rad)";if(this.autoHide_){const r=this.element.classList.contains(zs);!r&&i===0?this.element.classList.add(zs):r&&i!==0&&this.element.classList.remove(zs)}this.label_.style.transform=s}this.rotation_=i}}const zv=Bv;class Uv extends Jo{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const n=t.className!==void 0?t.className:"ol-zoom",i=t.delta!==void 0?t.delta:1,s=t.zoomInClassName!==void 0?t.zoomInClassName:n+"-in",r=t.zoomOutClassName!==void 0?t.zoomOutClassName:n+"-out",a=t.zoomInLabel!==void 0?t.zoomInLabel:"+",o=t.zoomOutLabel!==void 0?t.zoomOutLabel:"–",l=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",h=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=s,u.setAttribute("type","button"),u.title=l,u.appendChild(typeof a=="string"?document.createTextNode(a):a),u.addEventListener(nt.CLICK,this.handleClick_.bind(this,i),!1);const c=document.createElement("button");c.className=r,c.setAttribute("type","button"),c.title=h,c.appendChild(typeof o=="string"?document.createTextNode(o):o),c.addEventListener(nt.CLICK,this.handleClick_.bind(this,-i),!1);const d=n+" "+na+" "+Ho,f=this.element;f.className=d,f.appendChild(u),f.appendChild(c),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,n){n.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const i=this.getMap().getView();if(!i)return;const s=i.getZoom();if(s!==void 0){const r=i.getConstrainedZoom(s+t);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:r,duration:this.duration_,easing:Oi})):i.setZoom(r)}}}const jv=Uv;function Gv(e){e=e||{};const t=new Ve;return(e.zoom!==void 0?e.zoom:!0)&&t.push(new jv(e.zoomOptions)),(e.rotate!==void 0?e.rotate:!0)&&t.push(new zv(e.rotateOptions)),(e.attribution!==void 0?e.attribution:!0)&&t.push(new $v(e.attributionOptions)),t}const Oh={ACTIVE:"active"};class Wv extends Qe{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Oh.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(Oh.ACTIVE,t)}setMap(t){this.map_=t}}function qv(e,t,n){const i=e.getCenterInternal();if(i){const s=[i[0]+t[0],i[1]+t[1]];e.animateInternal({duration:n!==void 0?n:250,easing:zy,center:e.getConstrainedCenter(s)})}}function tl(e,t,n,i){const s=e.getZoom();if(s===void 0)return;const r=e.getConstrainedZoom(s+t),a=e.getResolutionForZoom(r);e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:a,anchor:n,duration:i!==void 0?i:250,easing:Oi})}const ys=Wv;class Xv extends ys{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let n=!1;if(t.type==At.DBLCLICK){const i=t.originalEvent,s=t.map,r=t.coordinate,a=i.shiftKey?-this.delta_:this.delta_,o=s.getView();tl(o,a,r,this.duration_),i.preventDefault(),n=!0}return!n}}const Kv=Xv;class Zv extends ys{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let n=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==At.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==At.POINTERUP){const i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==At.POINTERDOWN){const i=this.handleDownEvent(t);this.handlingDownUpSequence=i,n=this.stopDown(i)}else t.type==At.POINTERMOVE&&this.handleMoveEvent(t);return!n}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function el(e){const t=e.length;let n=0,i=0;for(let s=0;s<t;s++)n+=e[s].clientX,i+=e[s].clientY;return{clientX:n/t,clientY:i/t}}const vs=Zv;function Ja(e){const t=arguments;return function(n){let i=!0;for(let s=0,r=t.length;s<r&&(i=i&&t[s](n),!!i);++s);return i}}const Vv=function(e){const t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},Hv=function(e){const t=e.map.getTargetElement(),n=e.map.getOwnerDocument().activeElement;return t.contains(n)},Qc=function(e){return e.map.getTargetElement().hasAttribute("tabindex")?Hv(e):!0},Yv=mr,Jc=function(e){const t=e.originalEvent;return t.button==0&&!(z_&&xc&&t.ctrlKey)},td=function(e){const t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},Qv=function(e){const t=e.originalEvent;return xc?t.metaKey:t.ctrlKey},Jv=function(e){const t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},ed=function(e){const t=e.originalEvent,n=t.target.tagName;return n!=="INPUT"&&n!=="SELECT"&&n!=="TEXTAREA"&&!t.target.isContentEditable},xa=function(e){const t=e.originalEvent;return Mt(t!==void 0,"mapBrowserEvent must originate from a pointer event"),t.pointerType=="mouse"},tE=function(e){const t=e.originalEvent;return Mt(t!==void 0,"mapBrowserEvent must originate from a pointer event"),t.isPrimary&&t.button===0};class eE extends vs{constructor(t){super({stopDown:Zr}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const n=t.condition?t.condition:Ja(td,tE);this.condition_=t.onFocusOnly?Ja(Qc,n):n,this.noKinetic_=!1}handleDragEvent(t){const n=t.map;this.panning_||(this.panning_=!0,n.getView().beginInteraction());const i=this.targetPointers,s=n.getEventPixel(el(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(s[0],s[1]),this.lastCentroid){const r=[this.lastCentroid[0]-s[0],s[1]-this.lastCentroid[1]],o=t.map.getView();My(r,o.getResolution()),zo(r,o.getRotation()),o.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=s,this.lastPointersCount_=i.length,t.originalEvent.preventDefault()}handleUpEvent(t){const n=t.map,i=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const s=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),a=i.getCenterInternal(),o=n.getPixelFromCoordinateInternal(a),l=n.getCoordinateFromPixelInternal([o[0]-s*Math.cos(r),o[1]-s*Math.sin(r)]);i.animateInternal({center:i.getConstrainedCenter(l),duration:500,easing:Oi})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const i=t.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}const nE=eE;class iE extends vs{constructor(t){t=t||{},super({stopDown:Zr}),this.condition_=t.condition?t.condition:Vv,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!xa(t))return;const n=t.map,i=n.getView();if(i.getConstraints().rotation===Xo)return;const s=n.getSize(),r=t.pixel,a=Math.atan2(s[1]/2-r[1],r[0]-s[0]/2);if(this.lastAngle_!==void 0){const o=a-this.lastAngle_;i.adjustRotationInternal(-o)}this.lastAngle_=a}handleUpEvent(t){return xa(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return xa(t)&&Jc(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}const sE=iE;class rE extends Po{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,n=this.endPixel_,i="px",s=this.element_.style;s.left=Math.min(t[0],n[0])+i,s.top=Math.min(t[1],n[1])+i,s.width=Math.abs(n[0]-t[0])+i,s.height=Math.abs(n[1]-t[1])+i}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,n){this.startPixel_=t,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,n=this.endPixel_,s=[t,[t[0],n[1]],n,[n[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);s[4]=s[0].slice(),this.geometry_?this.geometry_.setCoordinates([s]):this.geometry_=new ls([s])}getGeometry(){return this.geometry_}}const aE=rE,Us={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class ba extends vn{constructor(t,n,i){super(t),this.coordinate=n,this.mapBrowserEvent=i}}class oE extends vs{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new aE(t.className||"ol-dragbox"),this.minArea_=t.minArea!==void 0?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:Jc,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,n,i){const s=i[0]-n[0],r=i[1]-n[1];return s*s+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new ba(Us.BOXDRAG,t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);const n=this.boxEndCondition_(t,this.startPixel_,t.pixel);return n&&this.onBoxEnd(t),this.dispatchEvent(new ba(n?Us.BOXEND:Us.BOXCANCEL,t.coordinate,t)),!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new ba(Us.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}}const lE=oE;class hE extends lE{constructor(t){t=t||{};const n=t.condition?t.condition:Jv;super({condition:n,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){const i=this.getMap().getView();let s=this.getGeometry();if(this.out_){const r=i.rotatedExtentForGeometry(s),a=i.getResolutionForExtentInternal(r),o=i.getResolution()/a;s=s.clone(),s.scale(o*o)}i.fitInternal(s,{duration:this.duration_,easing:Oi})}}const uE=hE,Dn={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class cE extends ys{constructor(t){super(),t=t||{},this.defaultCondition_=function(n){return td(n)&&ed(n)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let n=!1;if(t.type==nt.KEYDOWN){const i=t.originalEvent,s=i.key;if(this.condition_(t)&&(s==Dn.DOWN||s==Dn.LEFT||s==Dn.RIGHT||s==Dn.UP)){const a=t.map.getView(),o=a.getResolution()*this.pixelDelta_;let l=0,h=0;s==Dn.DOWN?h=-o:s==Dn.LEFT?l=-o:s==Dn.RIGHT?l=o:h=o;const u=[l,h];zo(u,a.getRotation()),qv(a,u,this.duration_),i.preventDefault(),n=!0}}return!n}}const dE=cE;class fE extends ys{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(n){return!Qv(n)&&ed(n)},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let n=!1;if(t.type==nt.KEYDOWN||t.type==nt.KEYPRESS){const i=t.originalEvent,s=i.key;if(this.condition_(t)&&(s==="+"||s==="-")){const r=t.map,a=s==="+"?this.delta_:-this.delta_,o=r.getView();tl(o,a,void 0,this.duration_),i.preventDefault(),n=!0}}return!n}}const gE=fE;class mE{constructor(t,n,i){this.decay_=t,this.minVelocity_=n,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,n){this.points_.push(t,n,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,n=this.points_.length-3;if(this.points_[n+2]<t)return!1;let i=n-3;for(;i>0&&this.points_[i+2]>t;)i-=3;const s=this.points_[n+2]-this.points_[i+2];if(s<1e3/60)return!1;const r=this.points_[n]-this.points_[i],a=this.points_[n+1]-this.points_[i+1];return this.angle_=Math.atan2(a,r),this.initialVelocity_=Math.sqrt(r*r+a*a)/s,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const pE=mE;class _E extends ys{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;const n=t.condition?t.condition:Yv;this.condition_=t.onFocusOnly?Ja(Qc,n):n,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t)||t.type!==nt.WHEEL)return!0;const i=t.map,s=t.originalEvent;s.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate);let r;if(t.type==nt.WHEEL&&(r=s.deltaY,$_&&s.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(r/=bc),s.deltaMode===WheelEvent.DOM_DELTA_LINE&&(r*=40)),r===0)return!1;this.lastDelta_=r;const a=Date.now();this.startTime_===void 0&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(r)<4?"trackpad":"wheel");const o=i.getView();if(this.mode_==="trackpad"&&!(o.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-r/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=a,!1;this.totalDelta_+=r;const l=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),l),!1}handleWheelZoom_(t){const n=t.getView();n.getAnimating()&&n.cancelAnimations();let i=-kt(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),tl(n,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}const yE=_E;class vE extends vs{constructor(t){t=t||{};const n=t;n.stopDown||(n.stopDown=Zr),super(n),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let n=0;const i=this.targetPointers[0],s=this.targetPointers[1],r=Math.atan2(s.clientY-i.clientY,s.clientX-i.clientX);if(this.lastAngle_!==void 0){const l=r-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=l}this.lastAngle_=r;const a=t.map,o=a.getView();o.getConstraints().rotation!==Xo&&(this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(el(this.targetPointers))),this.rotating_&&(a.render(),o.adjustRotationInternal(n,this.anchor_)))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){const n=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}const EE=vE;class xE extends vs{constructor(t){t=t||{};const n=t;n.stopDown||(n.stopDown=Zr),super(n),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let n=1;const i=this.targetPointers[0],s=this.targetPointers[1],r=i.clientX-s.clientX,a=i.clientY-s.clientY,o=Math.sqrt(r*r+a*a);this.lastDistance_!==void 0&&(n=this.lastDistance_/o),this.lastDistance_=o;const l=t.map,h=l.getView();n!=1&&(this.lastScaleDelta_=n),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(el(this.targetPointers))),l.render(),h.adjustResolutionInternal(n,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const i=t.map.getView(),s=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,s),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const n=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}const bE=xE;function ME(e){e=e||{};const t=new Ve,n=new pE(-.005,.05,100);return(e.altShiftDragRotate!==void 0?e.altShiftDragRotate:!0)&&t.push(new sE),(e.doubleClickZoom!==void 0?e.doubleClickZoom:!0)&&t.push(new Kv({delta:e.zoomDelta,duration:e.zoomDuration})),(e.dragPan!==void 0?e.dragPan:!0)&&t.push(new nE({onFocusOnly:e.onFocusOnly,kinetic:n})),(e.pinchRotate!==void 0?e.pinchRotate:!0)&&t.push(new EE),(e.pinchZoom!==void 0?e.pinchZoom:!0)&&t.push(new bE({duration:e.zoomDuration})),(e.keyboard!==void 0?e.keyboard:!0)&&(t.push(new dE),t.push(new gE({delta:e.zoomDelta,duration:e.zoomDuration}))),(e.mouseWheelZoom!==void 0?e.mouseWheelZoom:!0)&&t.push(new yE({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration})),(e.shiftDragZoom!==void 0?e.shiftDragZoom:!0)&&t.push(new uE({duration:e.zoomDuration})),t}function kh(e){return e[0]>0&&e[1]>0}function CE(e,t,n){return n===void 0&&(n=[0,0]),n[0]=e[0]*t+.5|0,n[1]=e[1]*t+.5|0,n}function on(e,t){return Array.isArray(e)?e:(t===void 0?t=[e,e]:(t[0]=e,t[1]=e),t)}function nd(e){if(e instanceof Vo){e.setMapInternal(null);return}e instanceof ia&&e.getLayers().forEach(nd)}function id(e,t){if(e instanceof Vo){e.setMapInternal(t);return}if(e instanceof ia){const n=e.getLayers().getArray();for(let i=0,s=n.length;i<s;++i)id(n[i],t)}}let wE=class extends Qe{constructor(t){super(),t=t||{},this.on,this.once,this.un;const n=DE(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:bc,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=fi(),this.pixelToCoordinateTransform_=fi(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=n.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=n.controls||Gv(),this.interactions=n.interactions||ME({onFocusOnly:!0}),this.overlays_=n.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new Lv(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Zt.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Zt.VIEW,this.handleViewChanged_),this.addChangeListener(Zt.SIZE,this.handleSizeChanged_),this.addChangeListener(Zt.TARGET,this.handleTargetChanged_),this.setProperties(n.values);const i=this;t.view&&!(t.view instanceof ze)&&t.view.then(function(s){i.setView(new ze(s))}),this.controls.addEventListener(Ce.ADD,s=>{s.element.setMap(this)}),this.controls.addEventListener(Ce.REMOVE,s=>{s.element.setMap(null)}),this.interactions.addEventListener(Ce.ADD,s=>{s.element.setMap(this)}),this.interactions.addEventListener(Ce.REMOVE,s=>{s.element.setMap(null)}),this.overlays_.addEventListener(Ce.ADD,s=>{this.addOverlayInternal_(s.element)}),this.overlays_.addEventListener(Ce.REMOVE,s=>{const r=s.element.getId();r!==void 0&&delete this.overlayIdIndex_[r.toString()],s.element.setMap(null)}),this.controls.forEach(s=>{s.setMap(this)}),this.interactions.forEach(s=>{s.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){id(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const n=t.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,n,i){if(!this.frameState_||!this.renderer_)return;const s=this.getCoordinateFromPixelInternal(t);i=i!==void 0?i:{};const r=i.hitTolerance!==void 0?i.hitTolerance:0,a=i.layerFilter!==void 0?i.layerFilter:mr,o=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(s,this.frameState_,r,o,n,null,a,null)}getFeaturesAtPixel(t,n){const i=[];return this.forEachFeatureAtPixel(t,function(s){i.push(s)},n),i}getAllLayers(){const t=[];function n(i){i.forEach(function(s){s instanceof ia?n(s.getLayers()):t.push(s)})}return n(this.getLayers()),t}hasFeatureAtPixel(t,n){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(t);n=n!==void 0?n:{};const s=n.layerFilter!==void 0?n.layerFilter:mr,r=n.hitTolerance!==void 0?n.hitTolerance:0,a=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,r,a,s,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const i=this.viewport_.getBoundingClientRect(),s=this.getSize(),r=i.width/s[0],a=i.height/s[1],o="changedTouches"in t?t.changedTouches[0]:t;return[(o.clientX-i.left)/r,(o.clientY-i.top)/a]}getTarget(){return this.get(Zt.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return Ha(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const n=this.frameState_;return n?be(n.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const n=this.overlayIdIndex_[t.toString()];return n!==void 0?n:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Zt.LAYERGROUP)}setLayers(t){const n=this.getLayerGroup();if(t instanceof Ve){n.setLayers(t);return}const i=n.getLayers();i.clear(),i.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let n=0,i=t.length;n<i;++n){const s=t[n];if(!s.visible)continue;const r=s.layer.getRenderer();if(r&&!r.ready)return!0;const a=s.layer.getSource();if(a&&a.loading)return!0}return!1}getPixelFromCoordinate(t){const n=Ke(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)}getPixelFromCoordinateInternal(t){const n=this.frameState_;return n?be(n.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Zt.SIZE)}getView(){return this.get(Zt.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,n,i,s){return Ov(this.frameState_,t,n,i,s)}handleBrowserEvent(t,n){n=n||t.type;const i=new nn(n,this,t);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(t){if(!this.frameState_)return;const n=t.originalEvent,i=n.type;if(i===Qa.POINTERDOWN||i===nt.WHEEL||i===nt.KEYDOWN){const s=this.getOwnerDocument(),r=this.viewport_.getRootNode?this.viewport_.getRootNode():s,a=n.target;if(this.overlayContainerStopEvent_.contains(a)||!(r===s?s.documentElement:r).contains(a))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){const s=this.getInteractions().getArray().slice();for(let r=s.length-1;r>=0;r--){const a=s[r];if(a.getMap()!==this||!a.getActive()||!this.getTargetElement())continue;if(!a.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){let s=this.maxTilesLoading_,r=s;if(t){const a=t.viewHints;if(a[Me.ANIMATING]||a[Me.INTERACTING]){const o=Date.now()-t.time>8;s=o?0:8,r=o?0:2}}n.getTilesLoading()<s&&(n.reprioritize(),n.loadMoreTiles(s,r))}t&&this.renderer_&&!t.animate&&(this.renderComplete_===!0?(this.hasListener(un.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(un.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Jn(sn.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Jn(sn.LOADSTART,this,t))));const i=this.postRenderFunctions_;for(let s=0,r=i.length;s<r;++s)i[s](this,t);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,s=this.targetChangeHandlerKeys_.length;i<s;++i)Lt(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(nt.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(nt.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Ya(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const t=this.getTarget(),n=typeof t=="string"?document.getElementById(t):t;if(this.targetElement_=n,!n)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{n.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Dv(this)),this.mapBrowserEventHandler_=new Rv(this,this.moveTolerance_);for(const r in At)this.mapBrowserEventHandler_.addEventListener(At[r],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(nt.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(nt.WHEEL,this.boundHandleBrowserEvent_,Cc?{passive:!1}:!1);const i=this.keyboardEventTarget_?this.keyboardEventTarget_:n;this.targetChangeHandlerKeys_=[ft(i,nt.KEYDOWN,this.handleBrowserEvent,this),ft(i,nt.KEYPRESS,this.handleBrowserEvent,this)];const s=n.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.observe(s.host),this.resizeObserver_.observe(n)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Lt(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Lt(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=ft(t,ss.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=ft(t,nt.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Lt),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new an("addlayer",t)),this.layerGroupPropertyListenerKeys_=[ft(t,ss.PROPERTYCHANGE,this.render,this),ft(t,nt.CHANGE,this.render,this),ft(t,"addlayer",this.handleLayerAdd_,this),ft(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let n=0,i=t.length;n<i;++n){const s=t[n].layer;s.hasRenderer()&&s.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}flushDeclutterItems(){const t=this.frameState_;t&&this.renderer_.flushDeclutterItems(t)}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){nd(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const n=this.getSize(),i=this.getView(),s=this.frameState_;let r=null;if(n!==void 0&&kh(n)&&i&&i.isDef()){const a=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),o=i.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:qa(o.center,o.resolution,o.rotation,n),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:o,viewHints:a,wantedTiles:{},mapId:de(this),renderTargets:{}},o.nextCenter&&o.nextResolution){const l=isNaN(o.nextRotation)?o.rotation:o.nextRotation;r.nextExtent=qa(o.nextCenter,o.nextResolution,l,n)}}this.frameState_=r,this.renderer_.renderFrame(r),r&&(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),s&&(!this.previousExtent_||!ea(this.previousExtent_)&&!Ga(r.extent,this.previousExtent_))&&(this.dispatchEvent(new Jn(sn.MOVESTART,this,s)),this.previousExtent_=Yr(this.previousExtent_)),this.previousExtent_&&!r.viewHints[Me.ANIMATING]&&!r.viewHints[Me.INTERACTING]&&!Ga(r.extent,this.previousExtent_)&&(this.dispatchEvent(new Jn(sn.MOVEEND,this,r)),W_(r.extent,this.previousExtent_))),this.dispatchEvent(new Jn(sn.POSTRENDER,this,r)),this.renderComplete_=this.hasListener(sn.LOADSTART)||this.hasListener(sn.LOADEND)||this.hasListener(un.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const n=this.getLayerGroup();n&&this.handleLayerRemove_(new an("removelayer",n)),this.set(Zt.LAYERGROUP,t)}setSize(t){this.set(Zt.SIZE,t)}setTarget(t){this.set(Zt.TARGET,t)}setView(t){if(!t||t instanceof ze){this.set(Zt.VIEW,t);return}this.set(Zt.VIEW,new ze);const n=this;t.then(function(i){n.setView(new ze(i))})}updateSize(){const t=this.getTargetElement();let n;if(t){const s=getComputedStyle(t),r=t.offsetWidth-parseFloat(s.borderLeftWidth)-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight)-parseFloat(s.borderRightWidth),a=t.offsetHeight-parseFloat(s.borderTopWidth)-parseFloat(s.paddingTop)-parseFloat(s.paddingBottom)-parseFloat(s.borderBottomWidth);!isNaN(r)&&!isNaN(a)&&(n=[r,a],!kh(n)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&Nc("No map visible because the map container's width or height are 0."))}const i=this.getSize();n&&(!i||!Kr(n,i))&&(this.setSize(n),this.updateViewportSize_(n))}updateViewportSize_(t){const n=this.getView();n&&n.setViewportSize(t)}};function DE(e){let t=null;e.keyboardEventTarget!==void 0&&(t=typeof e.keyboardEventTarget=="string"?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);const n={},i=e.layers&&typeof e.layers.getLayers=="function"?e.layers:new ia({layers:e.layers});n[Zt.LAYERGROUP]=i,n[Zt.TARGET]=e.target,n[Zt.VIEW]=e.view instanceof ze?e.view:new ze;let s;e.controls!==void 0&&(Array.isArray(e.controls)?s=new Ve(e.controls.slice()):(Mt(typeof e.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),s=e.controls));let r;e.interactions!==void 0&&(Array.isArray(e.interactions)?r=new Ve(e.interactions.slice()):(Mt(typeof e.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),r=e.interactions));let a;return e.overlays!==void 0?Array.isArray(e.overlays)?a=new Ve(e.overlays.slice()):(Mt(typeof e.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),a=e.overlays):a=new Ve,{controls:s,interactions:r,keyboardEventTarget:t,overlays:a,values:n}}const TE=wE;class FE extends ko{constructor(t,n,i){super(),i=i||{},this.tileCoord=t,this.state=n,this.interimTile=null,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(nt.CHANGE)}release(){this.state===X.ERROR&&this.setState(X.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){let t=this.interimTile;if(!t)return this;do{if(t.getState()==X.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){let t=this.interimTile;if(!t)return;let n=this;do{if(t.getState()==X.LOADED){t.interimTile=null;break}t.getState()==X.LOADING?n=t:t.getState()==X.IDLE?n.interimTile=t.interimTile:n=t,t=n.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==X.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){Rt()}getAlpha(t,n){if(!this.transition_)return 1;let i=this.transitionStarts_[t];if(!i)i=n,this.transitionStarts_[t]=i;else if(i===-1)return 1;const s=n-i+1e3/60;return s>=this.transition_?1:zc(s/this.transition_)}inTransition(t){return this.transition_?this.transitionStarts_[t]!==-1:!1}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}}const sd=FE,Vn={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function AE(e,t,n){const i=e;let s=!0,r=!1,a=!1;const o=[_r(i,nt.LOAD,function(){a=!0,r||t()})];return i.src&&U_?(r=!0,i.decode().then(function(){s&&t()}).catch(function(l){s&&(a?t():n())})):o.push(_r(i,nt.ERROR,n)),function(){s=!1,o.forEach(Lt)}}class RE extends sd{constructor(t,n,i,s,r,a){super(t,n,a),this.crossOrigin_=s,this.src_=i,this.key=i,this.image_=new Image,s!==null&&(this.image_.crossOrigin=s),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(t){this.image_=t,this.state=X.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=X.ERROR,this.unlistenImage_(),this.image_=IE(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=X.LOADED:this.state=X.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==X.ERROR&&(this.state=X.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==X.IDLE&&(this.state=X.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=AE(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function IE(){const e=Ti(1,1);return e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),e.canvas}const rd=RE,SE=.5,PE=10,Nh=.25;class LE{constructor(t,n,i,s,r,a){this.sourceProj_=t,this.targetProj_=n;let o={};const l=Er(this.targetProj_,this.sourceProj_);this.transformInv_=function(E){const M=E[0]+"/"+E[1];return o[M]||(o[M]=l(E)),o[M]},this.maxSourceExtent_=s,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!s&&!!this.sourceProj_.getExtent()&&Pt(s)>=Pt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Pt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Pt(this.targetProj_.getExtent()):null;const h=Gn(i),u=ta(i),c=Jr(i),d=Qr(i),f=this.transformInv_(h),g=this.transformInv_(u),m=this.transformInv_(c),_=this.transformInv_(d),v=PE+(a?Math.max(0,Math.ceil(Math.log2(Wa(i)/(a*a*256*256)))):0);if(this.addQuad_(h,u,c,d,f,g,m,_,v),this.wrapsXInSource_){let E=1/0;this.triangles_.forEach(function(M,x,w){E=Math.min(E,M.source[0][0],M.source[1][0],M.source[2][0])}),this.triangles_.forEach(M=>{if(Math.max(M.source[0][0],M.source[1][0],M.source[2][0])-E>this.sourceWorldWidth_/2){const x=[[M.source[0][0],M.source[0][1]],[M.source[1][0],M.source[1][1]],[M.source[2][0],M.source[2][1]]];x[0][0]-E>this.sourceWorldWidth_/2&&(x[0][0]-=this.sourceWorldWidth_),x[1][0]-E>this.sourceWorldWidth_/2&&(x[1][0]-=this.sourceWorldWidth_),x[2][0]-E>this.sourceWorldWidth_/2&&(x[2][0]-=this.sourceWorldWidth_);const w=Math.min(x[0][0],x[1][0],x[2][0]);Math.max(x[0][0],x[1][0],x[2][0])-w<this.sourceWorldWidth_/2&&(M.source=x)}})}o={}}addTriangle_(t,n,i,s,r,a){this.triangles_.push({source:[s,r,a],target:[t,n,i]})}addQuad_(t,n,i,s,r,a,o,l,h){const u=ch([r,a,o,l]),c=this.sourceWorldWidth_?Pt(u)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&c>.5&&c<1;let g=!1;if(h>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const _=ch([t,n,i,s]);g=Pt(_)/this.targetWorldWidth_>Nh||g}!f&&this.sourceProj_.isGlobal()&&c&&(g=c>Nh||g)}if(!g&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!ps(u,this.maxSourceExtent_))return;let m=0;if(!g&&(!isFinite(r[0])||!isFinite(r[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(l[0])||!isFinite(l[1]))){if(h>0)g=!0;else if(m=(!isFinite(r[0])||!isFinite(r[1])?8:0)+(!isFinite(a[0])||!isFinite(a[1])?4:0)+(!isFinite(o[0])||!isFinite(o[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),m!=1&&m!=2&&m!=4&&m!=8)return}if(h>0){if(!g){const _=[(t[0]+i[0])/2,(t[1]+i[1])/2],v=this.transformInv_(_);let E;f?E=(mi(r[0],d)+mi(o[0],d))/2-mi(v[0],d):E=(r[0]+o[0])/2-v[0];const M=(r[1]+o[1])/2-v[1];g=E*E+M*M>this.errorThresholdSquared_}if(g){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){const _=[(n[0]+i[0])/2,(n[1]+i[1])/2],v=this.transformInv_(_),E=[(s[0]+t[0])/2,(s[1]+t[1])/2],M=this.transformInv_(E);this.addQuad_(t,n,_,E,r,a,v,M,h-1),this.addQuad_(E,_,i,s,M,v,o,l,h-1)}else{const _=[(t[0]+n[0])/2,(t[1]+n[1])/2],v=this.transformInv_(_),E=[(i[0]+s[0])/2,(i[1]+s[1])/2],M=this.transformInv_(E);this.addQuad_(t,_,E,s,r,v,M,l,h-1),this.addQuad_(_,n,i,E,v,a,o,M,h-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}m&11||this.addTriangle_(t,i,s,r,o,l),m&14||this.addTriangle_(t,i,n,r,o,a),m&&(m&13||this.addTriangle_(n,s,t,a,l,r),m&7||this.addTriangle_(n,s,i,a,l,o))}calculateSourceExtent(){const t=jn();return this.triangles_.forEach(function(n,i,s){const r=n.source;Ys(t,r[0]),Ys(t,r[1]),Ys(t,r[2])}),t}getTriangles(){return this.triangles_}}const OE=LE;let Ma;const _i=[];function $h(e,t,n,i,s){e.beginPath(),e.moveTo(0,0),e.lineTo(t,n),e.lineTo(i,s),e.closePath(),e.save(),e.clip(),e.fillRect(0,0,Math.max(t,i)+1,Math.max(n,s)),e.restore()}function Ca(e,t){return Math.abs(e[t*4]-210)>2||Math.abs(e[t*4+3]-.75*255)>2}function kE(){if(Ma===void 0){const e=Ti(6,6,_i);e.globalCompositeOperation="lighter",e.fillStyle="rgba(210, 0, 0, 0.75)",$h(e,4,5,4,0),$h(e,4,5,0,5);const t=e.getImageData(0,0,3,3).data;Ma=Ca(t,0)||Ca(t,4)||Ca(t,8),Yo(e),_i.push(e.canvas)}return Ma}function Bh(e,t,n,i){const s=Iy(n,t,e);let r=xh(t,i,n);const a=t.getMetersPerUnit();a!==void 0&&(r*=a);const o=e.getMetersPerUnit();o!==void 0&&(r/=o);const l=e.getExtent();if(!l||No(l,s)){const h=xh(e,r,s)/r;isFinite(h)&&h>0&&(r/=h)}return r}function NE(e,t,n,i){const s=as(n);let r=Bh(e,t,s,i);return(!isFinite(r)||r<=0)&&Ac(n,function(a){return r=Bh(e,t,a,i),isFinite(r)&&r>0}),r}function $E(e,t,n,i,s,r,a,o,l,h,u,c,d){const f=Ti(Math.round(n*e),Math.round(n*t),_i);if(c||(f.imageSmoothingEnabled=!1),l.length===0)return f.canvas;f.scale(n,n);function g(E){return Math.round(E*n)/n}f.globalCompositeOperation="lighter";const m=jn();l.forEach(function(E,M,x){Z_(m,E.extent)});let _;if(!d||l.length!==1||h!==0){const E=Pt(m),M=Pe(m);_=Ti(Math.round(n*E/i),Math.round(n*M/i),_i),c||(_.imageSmoothingEnabled=!1);const x=n/i;l.forEach(function(w,S,Y){const W=w.extent[0]-m[0],st=-(w.extent[3]-m[3]),at=Pt(w.extent),yt=Pe(w.extent);w.image.width>0&&w.image.height>0&&_.drawImage(w.image,h,h,w.image.width-2*h,w.image.height-2*h,W*x,st*x,at*x,yt*x)})}const v=Gn(a);return o.getTriangles().forEach(function(E,M,x){const w=E.source,S=E.target;let Y=w[0][0],W=w[0][1],st=w[1][0],at=w[1][1],yt=w[2][0],Xt=w[2][1];const ne=g((S[0][0]-v[0])/r),De=g(-(S[0][1]-v[1])/r),he=g((S[1][0]-v[0])/r),vt=g(-(S[1][1]-v[1])/r),H=g((S[2][0]-v[0])/r),et=g(-(S[2][1]-v[1])/r),Ut=Y,ie=W;Y=0,W=0,st-=Ut,at-=ie,yt-=Ut,Xt-=ie;const pe=[[st,at,0,0,he-ne],[yt,Xt,0,0,H-ne],[0,0,st,at,vt-De],[0,0,yt,Xt,et-De]],_t=iy(pe);if(!_t)return;if(f.save(),f.beginPath(),kE()||!c){f.moveTo(he,vt);const Et=4,It=ne-he,Kt=De-vt;for(let zt=0;zt<Et;zt++)f.lineTo(he+g((zt+1)*It/Et),vt+g(zt*Kt/(Et-1))),zt!=Et-1&&f.lineTo(he+g((zt+1)*It/Et),vt+g((zt+1)*Kt/(Et-1)));f.lineTo(H,et)}else f.moveTo(he,vt),f.lineTo(ne,De),f.lineTo(H,et);f.clip(),f.transform(_t[0],_t[2],_t[1],_t[3],ne,De),f.translate(m[0]-Ut,m[3]-ie);let jt;if(_)jt=_.canvas,f.scale(i/n,-i/n);else{const Et=l[0],It=Et.extent;jt=Et.image,f.scale(Pt(It)/jt.width,-Pe(It)/jt.height)}f.drawImage(jt,0,0),f.restore()}),_&&(Yo(_),_i.push(_.canvas)),u&&(f.save(),f.globalCompositeOperation="source-over",f.strokeStyle="black",f.lineWidth=1,o.getTriangles().forEach(function(E,M,x){const w=E.target,S=(w[0][0]-v[0])/r,Y=-(w[0][1]-v[1])/r,W=(w[1][0]-v[0])/r,st=-(w[1][1]-v[1])/r,at=(w[2][0]-v[0])/r,yt=-(w[2][1]-v[1])/r;f.beginPath(),f.moveTo(W,st),f.lineTo(S,Y),f.lineTo(at,yt),f.closePath(),f.stroke()}),f.restore()),f.canvas}class BE extends sd{constructor(t,n,i,s,r,a,o,l,h,u,c,d){super(r,X.IDLE,d),this.renderEdges_=c!==void 0?c:!1,this.pixelRatio_=o,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=n,this.targetTileGrid_=s,this.wrappedTileCoord_=a||r,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const f=s.getTileCoordExtent(this.wrappedTileCoord_),g=this.targetTileGrid_.getExtent();let m=this.sourceTileGrid_.getExtent();const _=g?Yi(f,g):f;if(Wa(_)===0){this.state=X.EMPTY;return}const v=t.getExtent();v&&(m?m=Yi(m,v):m=v);const E=s.getResolution(this.wrappedTileCoord_[0]),M=NE(t,i,_,E);if(!isFinite(M)||M<=0){this.state=X.EMPTY;return}const x=u!==void 0?u:SE;if(this.triangulation_=new OE(t,i,_,m,M*x,E),this.triangulation_.getTriangles().length===0){this.state=X.EMPTY;return}this.sourceZ_=n.getZForResolution(M);let w=this.triangulation_.calculateSourceExtent();if(m&&(t.canWrapX()?(w[1]=kt(w[1],m[1],m[3]),w[3]=kt(w[3],m[1],m[3])):w=Yi(w,m)),!Wa(w))this.state=X.EMPTY;else{const S=n.getTileRangeForExtentAndZ(w,this.sourceZ_);for(let Y=S.minX;Y<=S.maxX;Y++)for(let W=S.minY;W<=S.maxY;W++){const st=h(this.sourceZ_,Y,W,o);st&&this.sourceTiles_.push(st)}this.sourceTiles_.length===0&&(this.state=X.EMPTY)}}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach(n=>{n&&n.getState()==X.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(n.tileCoord),image:n.getImage()})}),this.sourceTiles_.length=0,t.length===0)this.state=X.ERROR;else{const n=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(n),s=typeof i=="number"?i:i[0],r=typeof i=="number"?i:i[1],a=this.targetTileGrid_.getResolution(n),o=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=$E(s,r,this.pixelRatio_,o,this.sourceTileGrid_.getExtent(),a,l,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=X.LOADED}this.changed()}load(){if(this.state==X.IDLE){this.state=X.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(n=>{const i=n.getState();if(i==X.IDLE||i==X.LOADING){t++;const s=ft(n,nt.CHANGE,function(r){const a=n.getState();(a==X.LOADED||a==X.ERROR||a==X.EMPTY)&&(Lt(s),t--,t===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(s)}}),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(n,i,s){n.getState()==X.IDLE&&n.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Lt),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Yo(this.canvas_.getContext("2d")),_i.push(this.canvas_),this.canvas_=null),super.release()}}const to=BE;class zE{constructor(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let n=this.oldest_;for(;n;)t(n.value_,n.key_,this),n=n.newer}get(t,n){const i=this.entries_[t];return Mt(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(t){const n=this.entries_[t];return Mt(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_?(this.newest_=n.older,this.newest_&&(this.newest_.newer=null)):n===this.oldest_?(this.oldest_=n.newer,this.oldest_&&(this.oldest_.older=null)):(n.newer.older=n.older,n.older.newer=n.newer),delete this.entries_[t],--this.count_,n.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let n=0,i;for(i=this.newest_;i;i=i.older)t[n++]=i.key_;return t}getValues(){const t=new Array(this.count_);let n=0,i;for(i=this.newest_;i;i=i.older)t[n++]=i.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){var n;return(n=this.entries_[t])==null?void 0:n.value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,n){this.get(t),this.entries_[t].value_=n}set(t,n){Mt(!(t in this.entries_),"Tried to set a value for a key that is used already");const i={key_:t,newer:null,older:this.newest_,value_:n};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_}setSize(t){this.highWaterMark=t}}const UE=zE;function zh(e,t,n,i){return i!==void 0?(i[0]=e,i[1]=t,i[2]=n,i):[e,t,n]}function sa(e,t,n){return e+"/"+t+"/"+n}function ad(e){return sa(e[0],e[1],e[2])}function jE(e){return e.split("/").map(Number)}function GE(e){return(e[1]<<e[0])+e[2]}function WE(e,t){const n=e[0],i=e[1],s=e[2];if(t.getMinZoom()>n||n>t.getMaxZoom())return!1;const r=t.getFullTileRange(n);return r?r.containsXY(i,s):!0}class qE extends UE{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const t=this.peekFirstKey(),i=jE(t)[0];this.forEach(s=>{s.tileCoord[0]!==i&&(this.remove(ad(s.tileCoord)),s.release())})}}const od=qE,wa={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class XE extends Qe{constructor(t){super(),this.projection=te(t.projection),this.attributions_=Uh(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible!==void 0?t.attributionsCollapsible:!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const n=this;this.viewPromise_=new Promise(function(i,s){n.viewResolver=i,n.viewRejector=s})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=Uh(t),this.changed()}setState(t){this.state_=t,this.changed()}}function Uh(e){return e?Array.isArray(e)?function(t){return e}:typeof e=="function"?e:function(t){return[e]}:null}const KE=XE;class ld{constructor(t,n,i,s){this.minX=t,this.maxX=n,this.minY=i,this.maxY=s}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,n){return this.minX<=t&&t<=this.maxX&&this.minY<=n&&n<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function Hn(e,t,n,i,s){return s!==void 0?(s.minX=e,s.maxX=t,s.minY=n,s.maxY=i,s):new ld(e,t,n,i)}const hd=ld,Yn=[0,0,0],en=5;class ZE{constructor(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,Mt(R_(this.resolutions_,(s,r)=>r-s,!0),"`resolutions` must be sorted in descending order");let n;if(!t.origins){for(let s=0,r=this.resolutions_.length-1;s<r;++s)if(!n)n=this.resolutions_[s]/this.resolutions_[s+1];else if(this.resolutions_[s]/this.resolutions_[s+1]!==n){n=void 0;break}}this.zoomFactor_=n,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,Mt(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=t.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Gn(i)),Mt(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,Mt(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:$o,Mt(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map((s,r)=>{const a=new hd(Math.min(0,s[0]),Math.max(s[0]-1,-1),Math.min(0,s[1]),Math.max(s[1]-1,-1));if(i){const o=this.getTileRangeForExtentAndZ(i,r);a.minX=Math.max(o.minX,a.minX),a.maxX=Math.min(o.maxX,a.maxX),a.minY=Math.max(o.minY,a.minY),a.maxY=Math.min(o.maxY,a.maxY)}return a}):i&&this.calculateTileRanges_(i)}forEachTileCoord(t,n,i){const s=this.getTileRangeForExtentAndZ(t,n);for(let r=s.minX,a=s.maxX;r<=a;++r)for(let o=s.minY,l=s.maxY;o<=l;++o)i([n,r,o])}forEachTileCoordParentTileRange(t,n,i,s){let r,a,o,l=null,h=t[0]-1;for(this.zoomFactor_===2?(a=t[1],o=t[2]):l=this.getTileCoordExtent(t,s);h>=this.minZoom;){if(a!==void 0&&o!==void 0?(a=Math.floor(a/2),o=Math.floor(o/2),r=Hn(a,a,o,o,i)):r=this.getTileRangeForExtentAndZ(l,h,i),n(h,r))return!0;--h}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,n,i){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){const r=t[1]*2,a=t[2]*2;return Hn(r,r+1,a,a+1,n)}const s=this.getTileCoordExtent(t,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,t[0]+1,n)}return null}getTileRangeForTileCoordAndZ(t,n,i){if(n>this.maxZoom||n<this.minZoom)return null;const s=t[0],r=t[1],a=t[2];if(n===s)return Hn(r,a,r,a,i);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,n-s),h=Math.floor(r*l),u=Math.floor(a*l);if(n<s)return Hn(h,h,u,u,i);const c=Math.floor(l*(r+1))-1,d=Math.floor(l*(a+1))-1;return Hn(h,c,u,d,i)}const o=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,n,i)}getTileRangeForExtentAndZ(t,n,i){this.getTileCoordForXYAndZ_(t[0],t[3],n,!1,Yn);const s=Yn[1],r=Yn[2];this.getTileCoordForXYAndZ_(t[2],t[1],n,!0,Yn);const a=Yn[1],o=Yn[2];return Hn(s,a,r,o,i)}getTileCoordCenter(t){const n=this.getOrigin(t[0]),i=this.getResolution(t[0]),s=on(this.getTileSize(t[0]),this.tmpSize_);return[n[0]+(t[1]+.5)*s[0]*i,n[1]-(t[2]+.5)*s[1]*i]}getTileCoordExtent(t,n){const i=this.getOrigin(t[0]),s=this.getResolution(t[0]),r=on(this.getTileSize(t[0]),this.tmpSize_),a=i[0]+t[1]*r[0]*s,o=i[1]-(t[2]+1)*r[1]*s,l=a+r[0]*s,h=o+r[1]*s;return ms(a,o,l,h,n)}getTileCoordForCoordAndResolution(t,n,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],n,!1,i)}getTileCoordForXYAndResolution_(t,n,i,s,r){const a=this.getZForResolution(i),o=i/this.getResolution(a),l=this.getOrigin(a),h=on(this.getTileSize(a),this.tmpSize_);let u=o*(t-l[0])/i/h[0],c=o*(l[1]-n)/i/h[1];return s?(u=Ns(u,en)-1,c=Ns(c,en)-1):(u=ks(u,en),c=ks(c,en)),zh(a,u,c,r)}getTileCoordForXYAndZ_(t,n,i,s,r){const a=this.getOrigin(i),o=this.getResolution(i),l=on(this.getTileSize(i),this.tmpSize_);let h=(t-a[0])/o/l[0],u=(a[1]-n)/o/l[1];return s?(h=Ns(h,en)-1,u=Ns(u,en)-1):(h=ks(h,en),u=ks(u,en)),zh(i,h,u,r)}getTileCoordForCoordAndZ(t,n,i){return this.getTileCoordForXYAndZ_(t[0],t[1],n,!1,i)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,n){const i=Oo(this.resolutions_,t,n||0);return kt(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,n){return Vc(n,0,n.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const n=this.resolutions_.length,i=new Array(n);for(let s=this.minZoom;s<n;++s)i[s]=this.getTileRangeForExtentAndZ(t,s);this.fullTileRanges_=i}}const ud=ZE;function cd(e){let t=e.getDefaultTileGrid();return t||(t=QE(e),e.setDefaultTileGrid(t)),t}function VE(e,t,n){const i=t[0],s=e.getTileCoordCenter(t),r=nl(n);if(!No(r,s)){const a=Pt(r),o=Math.ceil((r[0]-s[0])/a);return s[0]+=a*o,e.getTileCoordForCoordAndZ(s,i)}return t}function HE(e,t,n,i){i=i!==void 0?i:"top-left";const s=dd(e,t,n);return new ud({extent:e,origin:H_(e,i),resolutions:s,tileSize:n})}function YE(e){const t=e||{},n=t.extent||te("EPSG:3857").getExtent(),i={extent:n,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:dd(n,t.maxZoom,t.tileSize,t.maxResolution)};return new ud(i)}function dd(e,t,n,i){t=t!==void 0?t:dy,n=on(n!==void 0?n:$o);const s=Pe(e),r=Pt(e);i=i>0?i:Math.max(r/n[0],s/n[1]);const a=t+1,o=new Array(a);for(let l=0;l<a;++l)o[l]=i/Math.pow(2,l);return o}function QE(e,t,n,i){const s=nl(e);return HE(s,t,n,i)}function nl(e){e=te(e);let t=e.getExtent();if(!t){const n=180*os.degrees/e.getMetersPerUnit();t=ms(-n,-n,n,n)}return t}class JE extends KE{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=t.opaque!==void 0?t.opaque:!1,this.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;const n=[256,256];this.tileGrid&&on(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),n),this.tileCache=new od(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,n){const i=this.getTileCacheForProjection(t);i&&i.expireCache(n)}forEachLoadedTile(t,n,i,s){const r=this.getTileCacheForProjection(t);if(!r)return!1;let a=!0,o,l,h;for(let u=i.minX;u<=i.maxX;++u)for(let c=i.minY;c<=i.maxY;++c)l=sa(n,u,c),h=!1,r.containsKey(l)&&(o=r.get(l),h=o.getState()===X.LOADED,h&&(h=s(o)!==!1)),h||(a=!1);return a}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(t){const n=t?this.getTileGridForProjection(t):this.tileGrid;return n?n.getResolutions():null}getTile(t,n,i,s,r){return Rt()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:cd(t)}getTileCacheForProjection(t){const n=this.getProjection();return Mt(n===null||Qn(n,t),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,n,i){const s=this.getTileGridForProjection(i),r=this.getTilePixelRatio(n),a=on(s.getTileSize(t),this.tmpSize);return r==1?a:CE(a,r,this.tmpSize)}getTileCoordForTileUrlFunction(t,n){n=n!==void 0?n:this.getProjection();const i=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=VE(i,t,n)),WE(t,i)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,n){const i=this.getTileCacheForProjection(n);t>i.highWaterMark&&(i.highWaterMark=t)}useTile(t,n,i,s){}}class t2 extends vn{constructor(t,n){super(t),this.tile=n}}const e2=JE;function n2(e,t){const n=/\{z\}/g,i=/\{x\}/g,s=/\{y\}/g,r=/\{-y\}/g;return function(a,o,l){if(a)return e.replace(n,a[0].toString()).replace(i,a[1].toString()).replace(s,a[2].toString()).replace(r,function(){const h=a[0],u=t.getFullTileRange(h);if(!u)throw new Error("The {-y} placeholder requires a tile grid with extent");return(u.getHeight()-a[2]-1).toString()})}}function i2(e,t){const n=e.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=n2(e[s],t);return eo(i)}function eo(e){return e.length===1?e[0]:function(t,n,i){if(!t)return;const s=GE(t),r=mi(s,e.length);return e[r](t,n,i)}}function fd(e){const t=[];let n=/\{([a-z])-([a-z])\}/.exec(e);if(n){const i=n[1].charCodeAt(0),s=n[2].charCodeAt(0);let r;for(r=i;r<=s;++r)t.push(e.replace(n[0],String.fromCharCode(r)));return t}if(n=/\{(\d+)-(\d+)\}/.exec(e),n){const i=parseInt(n[2],10);for(let s=parseInt(n[1],10);s<=i;s++)t.push(e.replace(n[0],s.toString()));return t}return t.push(e),t}class il extends e2{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===il.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const n=t.target,i=de(n),s=n.getState();let r;s==X.LOADING?(this.tileLoadingKeys_[i]=!0,r=wa.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],r=s==X.ERROR?wa.TILELOADERROR:s==X.LOADED?wa.TILELOADEND:void 0),r!=null&&this.dispatchEvent(new t2(r,n))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,n){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),typeof n<"u"?this.setKey(n):this.changed()}setUrl(t){const n=fd(t);this.urls=n,this.setUrls(n)}setUrls(t){this.urls=t;const n=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(i2(t,this.tileGrid),n):this.setKey(n)}tileUrlFunction(t,n,i){}useTile(t,n,i){const s=sa(t,n,i);this.tileCache.containsKey(s)&&this.tileCache.get(s)}}const s2=il;class r2 extends s2{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:a2,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,this.tileClass=t.tileClass!==void 0?t.tileClass:rd,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,n){const i=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==i?n:{});for(const s in this.tileCacheForProjection){const r=this.tileCacheForProjection[s];r.expireCache(r==i?n:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!Qn(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return this.getProjection()&&t&&!Qn(this.getProjection(),t)?!1:super.getOpaque(t)}getTileGridForProjection(t){const n=this.getProjection();if(this.tileGrid&&(!n||Qn(n,t)))return this.tileGrid;const i=de(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=cd(t)),this.tileGridForProjection[i]}getTileCacheForProjection(t){const n=this.getProjection();if(!n||Qn(n,t))return this.tileCache;const i=de(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new od(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}createTile_(t,n,i,s,r,a){const o=[t,n,i],l=this.getTileCoordForTileUrlFunction(o,r),h=l?this.tileUrlFunction(l,s,r):void 0,u=new this.tileClass(o,h!==void 0?X.IDLE:X.EMPTY,h!==void 0?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=a,u.addEventListener(nt.CHANGE,this.handleTileChange.bind(this)),u}getTile(t,n,i,s,r){const a=this.getProjection();if(!a||!r||Qn(a,r))return this.getTileInternal(t,n,i,s,a||r);const o=this.getTileCacheForProjection(r),l=[t,n,i];let h;const u=ad(l);o.containsKey(u)&&(h=o.get(u));const c=this.getKey();if(h&&h.key==c)return h;const d=this.getTileGridForProjection(a),f=this.getTileGridForProjection(r),g=this.getTileCoordForTileUrlFunction(l,r),m=new to(a,d,r,f,l,g,this.getTilePixelRatio(s),this.getGutter(),(_,v,E,M)=>this.getTileInternal(_,v,E,M,a),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return m.key=c,h?(m.interimTile=h,m.refreshInterimChain(),o.replace(u,m)):o.set(u,m),m}getTileInternal(t,n,i,s,r){let a=null;const o=sa(t,n,i),l=this.getKey();if(!this.tileCache.containsKey(o))a=this.createTile_(t,n,i,s,r,l),this.tileCache.set(o,a);else if(a=this.tileCache.get(o),a.key!=l){const h=a;a=this.createTile_(t,n,i,s,r,l),h.getState()==X.IDLE?a.interimTile=h.interimTile:a.interimTile=h,a.refreshInterimChain(),this.tileCache.replace(o,a)}return a}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(const n in this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}}setTileGridForProjection(t,n){const i=te(t);if(i){const s=de(i);s in this.tileGridForProjection||(this.tileGridForProjection[s]=n)}}clear(){super.clear();for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}}function a2(e,t){e.getImage().src=t}const gd=r2;class o2 extends gd{constructor(t){t=t||{};const n=t.projection!==void 0?t.projection:"EPSG:3857",i=t.tileGrid!==void 0?t.tileGrid:YE({extent:nl(n),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:n,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0}getGutter(){return this.gutter_}}const l2=o2,h2='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class u2 extends l2{constructor(t){t=t||{};let n;t.attributions!==void 0?n=t.attributions:n=[h2];const i=t.crossOrigin!==void 0?t.crossOrigin:"anonymous",s=t.url!==void 0?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:n,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:i,interpolate:t.interpolate,maxZoom:t.maxZoom!==void 0?t.maxZoom:19,opaque:t.opaque!==void 0?t.opaque:!0,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:s,wrapX:t.wrapX,zDirection:t.zDirection})}}const c2=u2,js={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class d2 extends Vo{constructor(t){t=t||{};const n=Object.assign({},t);delete n.preload,delete n.useInterimTilesOnError,super(n),this.on,this.once,this.un,this.setPreload(t.preload!==void 0?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0)}getPreload(){return this.get(js.PRELOAD)}setPreload(t){this.set(js.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(js.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(js.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}}const f2=d2;class g2 extends Ec{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return Rt()}getData(t){return null}prepareFrame(t){return Rt()}renderFrame(t,n){return Rt()}loadedTileCallback(t,n,i){t[n]||(t[n]={}),t[n][i.tileCoord.toString()]=i}createLoadedTileFinder(t,n,i){return(s,r)=>{const a=this.loadedTileCallback.bind(this,i,s);return t.forEachLoadedTile(n,s,r,a)}}forEachFeatureAtCoordinate(t,n,i,s,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const n=t.target;(n.getState()===Vn.LOADED||n.getState()===Vn.ERROR)&&this.renderIfReadyAndVisible()}loadImage(t){let n=t.getState();return n!=Vn.LOADED&&n!=Vn.ERROR&&t.addEventListener(nt.CHANGE,this.boundHandleImageChange_),n==Vn.IDLE&&(t.load(),n=t.getState()),n==Vn.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}const m2=g2;let ti=null;function p2(){ti=Ti(1,1,void 0,{willReadFrequently:!0})}class _2 extends m2{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=fi(),this.pixelTransform=fi(),this.inversePixelTransform=fi(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,n,i){ti||p2(),ti.clearRect(0,0,1,1);let s;try{ti.drawImage(t,n,i,1,1,0,0,1,1),s=ti.getImageData(0,0,1,1).data}catch{return ti=null,null}return s}getBackground(t){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(t.viewState.resolution)),i||void 0}useContainer(t,n,i){const s=this.getLayer().getClassName();let r,a;if(t&&t.className===s&&(!i||t&&t.style.backgroundColor&&Kr(mh(t.style.backgroundColor),mh(i)))){const o=t.firstElementChild;o instanceof HTMLCanvasElement&&(a=o.getContext("2d"))}if(a&&a.canvas.style.transform===n?(this.container=t,this.context=a,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){r=document.createElement("div"),r.className=s;let o=r.style;o.position="absolute",o.width="100%",o.height="100%",a=Ti();const l=a.canvas;r.appendChild(l),o=l.style,o.position="absolute",o.left="0",o.transformOrigin="top left",this.container=r,this.context=a}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(t,n,i){const s=Gn(i),r=ta(i),a=Jr(i),o=Qr(i);be(n.coordinateToPixelTransform,s),be(n.coordinateToPixelTransform,r),be(n.coordinateToPixelTransform,a),be(n.coordinateToPixelTransform,o);const l=this.inversePixelTransform;be(l,s),be(l,r),be(l,a),be(l,o),t.save(),t.beginPath(),t.moveTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.clip()}dispatchRenderEvent_(t,n,i){const s=this.getLayer();if(s.hasListener(t)){const r=new Yc(t,this.inversePixelTransform,i,n);s.dispatchEvent(r)}}preRender(t,n){this.frameState=n,this.dispatchRenderEvent_(un.PRERENDER,t,n)}postRender(t,n){this.dispatchRenderEvent_(un.POSTRENDER,t,n)}getRenderTransform(t,n,i,s,r,a,o){const l=r/2,h=a/2,u=s/n,c=-u,d=-t[0]+o,f=-t[1];return rs(this.tempTransform,l,h,u,c,-i,d,f)}disposeInternal(){delete this.frameState,super.disposeInternal()}}const y2=_2;class v2 extends y2{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=jn(),this.tmpTileRange_=new hd(0,0,0,0)}isDrawableTile(t){const n=this.getLayer(),i=t.getState(),s=n.getUseInterimTilesOnError();return i==X.LOADED||i==X.EMPTY||i==X.ERROR&&!s}getTile(t,n,i,s){const r=s.pixelRatio,a=s.viewState.projection,o=this.getLayer();let h=o.getSource().getTile(t,n,i,r,a);return h.getState()==X.ERROR&&o.getUseInterimTilesOnError()&&o.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(h)||(h=h.getInterimTile()),h}getData(t){const n=this.frameState;if(!n)return null;const i=this.getLayer(),s=be(n.pixelToCoordinateTransform,t.slice()),r=i.getExtent();if(r&&!No(r,s))return null;const a=n.pixelRatio,o=n.viewState.projection,l=n.viewState,h=i.getRenderSource(),u=h.getTileGridForProjection(l.projection),c=h.getTilePixelRatio(n.pixelRatio);for(let d=u.getZForResolution(l.resolution);d>=u.getMinZoom();--d){const f=u.getTileCoordForCoordAndZ(s,d),g=h.getTile(d,f[1],f[2],a,o);if(!(g instanceof rd||g instanceof to)||g instanceof to&&g.getState()===X.EMPTY)return null;if(g.getState()!==X.LOADED)continue;const m=u.getOrigin(d),_=on(u.getTileSize(d)),v=u.getResolution(d),E=Math.floor(c*((s[0]-m[0])/v-f[1]*_[0])),M=Math.floor(c*((m[1]-s[1])/v-f[2]*_[1])),x=Math.round(c*h.getGutterForProjection(l.projection));return this.getImageData(g.getImage(),E+x,M+x)}return null}loadedTileCallback(t,n,i){return this.isDrawableTile(i)?super.loadedTileCallback(t,n,i):!1}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,n){const i=t.layerStatesArray[t.layerIndex],s=t.viewState,r=s.projection,a=s.resolution,o=s.center,l=s.rotation,h=t.pixelRatio,u=this.getLayer(),c=u.getSource(),d=c.getRevision(),f=c.getTileGridForProjection(r),g=f.getZForResolution(a,c.zDirection),m=f.getResolution(g);let _=t.extent;const v=t.viewState.resolution,E=c.getTilePixelRatio(h),M=Math.round(Pt(_)/v*h),x=Math.round(Pe(_)/v*h),w=i.extent&&ii(i.extent);w&&(_=Yi(_,ii(i.extent)));const S=m*M/2/E,Y=m*x/2/E,W=[o[0]-S,o[1]-Y,o[0]+S,o[1]+Y],st=f.getTileRangeForExtentAndZ(_,g),at={};at[g]={};const yt=this.createLoadedTileFinder(c,r,at),Xt=this.tmpExtent,ne=this.tmpTileRange_;this.newTiles_=!1;const De=l?Xa(s.center,v,l,t.size):void 0;for(let jt=st.minX;jt<=st.maxX;++jt)for(let Et=st.minY;Et<=st.maxY;++Et){if(l&&!f.tileCoordIntersectsViewport([g,jt,Et],De))continue;const It=this.getTile(g,jt,Et,t);if(this.isDrawableTile(It)){const Xe=de(this);if(It.getState()==X.LOADED){at[g][It.tileCoord.toString()]=It;let _e=It.inTransition(Xe);_e&&i.opacity!==1&&(It.endTransition(Xe),_e=!1),!this.newTiles_&&(_e||!this.renderedTiles.includes(It))&&(this.newTiles_=!0)}if(It.getAlpha(Xe,t.time)===1)continue}const Kt=f.getTileCoordChildTileRange(It.tileCoord,ne,Xt);let zt=!1;Kt&&(zt=yt(g+1,Kt)),zt||f.forEachTileCoordParentTileRange(It.tileCoord,yt,ne,Xt)}const he=m/a*h/E;rs(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/h,1/h,l,-M/2,-x/2);const vt=G_(this.pixelTransform);this.useContainer(n,vt,this.getBackground(t));const H=this.context,et=H.canvas;wc(this.inversePixelTransform,this.pixelTransform),rs(this.tempTransform,M/2,x/2,he,he,0,-M/2,-x/2),et.width!=M||et.height!=x?(et.width=M,et.height=x):this.containerReused||H.clearRect(0,0,M,x),w&&this.clipUnrotated(H,t,w),c.getInterpolate()||(H.imageSmoothingEnabled=!1),this.preRender(H,t),this.renderedTiles.length=0;let Ut=Object.keys(at).map(Number);Ut.sort(Lo);let ie,pe,_t;i.opacity===1&&(!this.containerReused||c.getOpaque(t.viewState.projection))?Ut=Ut.reverse():(ie=[],pe=[]);for(let jt=Ut.length-1;jt>=0;--jt){const Et=Ut[jt],It=c.getTilePixelSize(Et,h,r),zt=f.getResolution(Et)/m,Xe=It[0]*zt*he,_e=It[1]*zt*he,En=f.getTileCoordForCoordAndZ(Gn(W),Et),Wn=f.getTileCoordExtent(En),p=be(this.tempTransform,[E*(Wn[0]-W[0])/m,E*(W[3]-Wn[3])/m]),y=E*c.getGutterForProjection(r),C=at[Et];for(const T in C){const D=C[T],I=D.tileCoord,k=En[1]-I[1],R=Math.round(p[0]-(k-1)*Xe),P=En[2]-I[2],F=Math.round(p[1]-(P-1)*_e),z=Math.round(p[0]-k*Xe),$=Math.round(p[1]-P*_e),j=R-z,K=F-$,tt=g===Et,ct=tt&&D.getAlpha(de(this),t.time)!==1;let ot=!1;if(!ct)if(ie){_t=[z,$,z+j,$,z+j,$+K,z,$+K];for(let xt=0,ye=ie.length;xt<ye;++xt)if(g!==Et&&Et<pe[xt]){const Nt=ie[xt];ps([z,$,z+j,$+K],[Nt[0],Nt[3],Nt[4],Nt[7]])&&(ot||(H.save(),ot=!0),H.beginPath(),H.moveTo(_t[0],_t[1]),H.lineTo(_t[2],_t[3]),H.lineTo(_t[4],_t[5]),H.lineTo(_t[6],_t[7]),H.moveTo(Nt[6],Nt[7]),H.lineTo(Nt[4],Nt[5]),H.lineTo(Nt[2],Nt[3]),H.lineTo(Nt[0],Nt[1]),H.clip())}ie.push(_t),pe.push(Et)}else H.clearRect(z,$,j,K);this.drawTileImage(D,t,z,$,j,K,y,tt),ie&&!ct?(ot&&H.restore(),this.renderedTiles.unshift(D)):this.renderedTiles.push(D),this.updateUsedTiles(t.usedTiles,c,D)}}return this.renderedRevision=d,this.renderedResolution=m,this.extentChanged=!this.renderedExtent_||!Ga(this.renderedExtent_,W),this.renderedExtent_=W,this.renderedPixelRatio=h,this.renderedProjection=r,this.manageTilePyramid(t,c,f,h,r,_,g,u.getPreload()),this.scheduleExpireCache(t,c),this.postRender(H,t),i.extent&&H.restore(),H.imageSmoothingEnabled=!0,vt!==et.style.transform&&(et.style.transform=vt),this.container}drawTileImage(t,n,i,s,r,a,o,l){const h=this.getTileImage(t);if(!h)return;const u=de(this),c=n.layerStatesArray[n.layerIndex],d=c.opacity*(l?t.getAlpha(u,n.time):1),f=d!==this.context.globalAlpha;f&&(this.context.save(),this.context.globalAlpha=d),this.context.drawImage(h,o,o,h.width-2*o,h.height-2*o,i,s,r,a),f&&this.context.restore(),d!==c.opacity?n.animate=!0:l&&t.endTransition(u)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,n){if(n.canExpireCache()){const i=(function(s,r,a){const o=de(s);o in a.usedTiles&&s.expireCache(a.viewState.projection,a.usedTiles[o])}).bind(null,n);t.postRenderFunctions.push(i)}}updateUsedTiles(t,n,i){const s=de(n);s in t||(t[s]={}),t[s][i.getKey()]=!0}manageTilePyramid(t,n,i,s,r,a,o,l,h){const u=de(n);u in t.wantedTiles||(t.wantedTiles[u]={});const c=t.wantedTiles[u],d=t.tileQueue,f=i.getMinZoom(),g=t.viewState.rotation,m=g?Xa(t.viewState.center,t.viewState.resolution,g,t.size):void 0;let _=0,v,E,M,x,w,S;for(S=f;S<=o;++S)for(E=i.getTileRangeForExtentAndZ(a,S,E),M=i.getResolution(S),x=E.minX;x<=E.maxX;++x)for(w=E.minY;w<=E.maxY;++w)g&&!i.tileCoordIntersectsViewport([S,x,w],m)||(o-S<=l?(++_,v=n.getTile(S,x,w,s,r),v.getState()==X.IDLE&&(c[v.getKey()]=!0,d.isKeyQueued(v.getKey())||d.enqueue([v,u,i.getTileCoordCenter(v.tileCoord),M])),h!==void 0&&h(v)):n.useTile(S,x,w,r));n.updateCacheSize(_,r)}}const E2=v2;class x2 extends f2{constructor(t){super(t)}createRenderer(){return new E2(this)}}const jh=x2;function Gh(e,t){const n=[];Object.keys(t).forEach(function(s){t[s]!==null&&t[s]!==void 0&&n.push(s+"="+encodeURIComponent(t[s]))});const i=n.join("&");return e=e.replace(/[?&]$/,""),e+=e.includes("?")?"&":"?",e+i}class b2 extends gd{constructor(t){const n=t.requestEncoding!==void 0?t.requestEncoding:"KVP",i=t.tileGrid;let s=t.urls;s===void 0&&t.url!==void 0&&(s=fd(t.url)),super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,urls:s,wrapX:t.wrapX!==void 0?t.wrapX:!1,transition:t.transition,zDirection:t.zDirection}),this.version_=t.version!==void 0?t.version:"1.0.0",this.format_=t.format!==void 0?t.format:"image/jpeg",this.dimensions_=t.dimensions!==void 0?t.dimensions:{},this.layer_=t.layer,this.matrixSet_=t.matrixSet,this.style_=t.style,this.requestEncoding_=n,this.setKey(this.getKeyForDimensions_()),s&&s.length>0&&(this.tileUrlFunction=eo(s.map(this.createFromWMTSTemplate.bind(this))))}setUrls(t){this.urls=t;const n=t.join(`
`);this.setTileUrlFunction(eo(t.map(this.createFromWMTSTemplate.bind(this))),n)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const t=this.urls?this.urls.slice(0):[];for(const n in this.dimensions_)t.push(n+"-"+this.dimensions_[n]);return t.join("/")}updateDimensions(t){Object.assign(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(t){const n=this.requestEncoding_,i={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};n=="KVP"&&Object.assign(i,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t=n=="KVP"?Gh(t,i):t.replace(/\{(\w+?)\}/g,function(a,o){return o.toLowerCase()in i?i[o.toLowerCase()]:a});const s=this.tileGrid,r=this.dimensions_;return function(a,o,l){if(!a)return;const h={TileMatrix:s.getMatrixId(a[0]),TileCol:a[1],TileRow:a[2]};Object.assign(h,r);let u=t;return n=="KVP"?u=Gh(u,h):u=u.replace(/\{(\w+?)\}/g,function(c,d){return h[d]}),u}}}const M2=b2;function C2(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}var Nn=1,$n=2,yi=3,w2=4,no=5,Wh=6378137,D2=6356752314e-3,qh=.0066943799901413165,Qi=484813681109536e-20,A=Math.PI/2,T2=.16666666666666666,F2=.04722222222222222,A2=.022156084656084655,O=1e-10,Gt=.017453292519943295,Ue=57.29577951308232,ht=Math.PI/4,hs=Math.PI*2,St=3.14159265359,me={};me.greenwich=0;me.lisbon=-9.131906111111;me.paris=2.337229166667;me.bogota=-74.080916666667;me.madrid=-3.687938888889;me.rome=12.452333333333;me.bern=7.439583333333;me.jakarta=106.807719444444;me.ferro=-17.666666666667;me.brussels=4.367975;me.stockholm=18.058277777778;me.athens=23.7163375;me.oslo=10.722916666667;const R2={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var Xh=/[\s_\-\/\(\)]/g;function _n(e,t){if(e[t])return e[t];for(var n=Object.keys(e),i=t.toLowerCase().replace(Xh,""),s=-1,r,a;++s<n.length;)if(r=n[s],a=r.toLowerCase().replace(Xh,""),a===i)return e[r]}function io(e){var t={},n=e.split("+").map(function(o){return o.trim()}).filter(function(o){return o}).reduce(function(o,l){var h=l.split("=");return h.push(!0),o[h[0].toLowerCase()]=h[1],o},{}),i,s,r,a={proj:"projName",datum:"datumCode",rf:function(o){t.rf=parseFloat(o)},lat_0:function(o){t.lat0=o*Gt},lat_1:function(o){t.lat1=o*Gt},lat_2:function(o){t.lat2=o*Gt},lat_ts:function(o){t.lat_ts=o*Gt},lon_0:function(o){t.long0=o*Gt},lon_1:function(o){t.long1=o*Gt},lon_2:function(o){t.long2=o*Gt},alpha:function(o){t.alpha=parseFloat(o)*Gt},gamma:function(o){t.rectified_grid_angle=parseFloat(o)},lonc:function(o){t.longc=o*Gt},x_0:function(o){t.x0=parseFloat(o)},y_0:function(o){t.y0=parseFloat(o)},k_0:function(o){t.k0=parseFloat(o)},k:function(o){t.k0=parseFloat(o)},a:function(o){t.a=parseFloat(o)},b:function(o){t.b=parseFloat(o)},r_a:function(){t.R_A=!0},zone:function(o){t.zone=parseInt(o,10)},south:function(){t.utmSouth=!0},towgs84:function(o){t.datum_params=o.split(",").map(function(l){return parseFloat(l)})},to_meter:function(o){t.to_meter=parseFloat(o)},units:function(o){t.units=o;var l=_n(R2,o);l&&(t.to_meter=l.to_meter)},from_greenwich:function(o){t.from_greenwich=o*Gt},pm:function(o){var l=_n(me,o);t.from_greenwich=(l||parseFloat(o))*Gt},nadgrids:function(o){o==="@null"?t.datumCode="none":t.nadgrids=o},axis:function(o){var l="ewnsud";o.length===3&&l.indexOf(o.substr(0,1))!==-1&&l.indexOf(o.substr(1,1))!==-1&&l.indexOf(o.substr(2,1))!==-1&&(t.axis=o)},approx:function(){t.approx=!0}};for(i in n)s=n[i],i in a?(r=a[i],typeof r=="function"?r(s):t[r]=s):t[i]=s;return typeof t.datumCode=="string"&&t.datumCode!=="WGS84"&&(t.datumCode=t.datumCode.toLowerCase()),t}var us=1,md=2,pd=3,Mr=4,_d=5,sl=-1,I2=/\s/,S2=/[A-Za-z]/,P2=/[A-Za-z84_]/,ra=/[,\]]/,yd=/[\d\.E\-\+]/;function Je(e){if(typeof e!="string")throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=us}Je.prototype.readCharicter=function(){var e=this.text[this.place++];if(this.state!==Mr)for(;I2.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case us:return this.neutral(e);case md:return this.keyword(e);case Mr:return this.quoted(e);case _d:return this.afterquote(e);case pd:return this.number(e);case sl:return}};Je.prototype.afterquote=function(e){if(e==='"'){this.word+='"',this.state=Mr;return}if(ra.test(e)){this.word=this.word.trim(),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in afterquote yet, index '+this.place)};Je.prototype.afterItem=function(e){if(e===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=us;return}if(e==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=us,this.currentObject=this.stack.pop(),this.currentObject||(this.state=sl);return}};Je.prototype.number=function(e){if(yd.test(e)){this.word+=e;return}if(ra.test(e)){this.word=parseFloat(this.word),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in number yet, index '+this.place)};Je.prototype.quoted=function(e){if(e==='"'){this.state=_d;return}this.word+=e};Je.prototype.keyword=function(e){if(P2.test(e)){this.word+=e;return}if(e==="["){var t=[];t.push(this.word),this.level++,this.root===null?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,this.state=us;return}if(ra.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in keyword yet, index '+this.place)};Je.prototype.neutral=function(e){if(S2.test(e)){this.word=e,this.state=md;return}if(e==='"'){this.word="",this.state=Mr;return}if(yd.test(e)){this.word=e,this.state=pd;return}if(ra.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in neutral yet, index '+this.place)};Je.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===sl)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function L2(e){var t=new Je(e);return t.output()}function Kh(e,t,n){Array.isArray(t)&&(n.unshift(t),t=null);var i=t?{}:e,s=n.reduce(function(r,a){return si(a,r),r},i);t&&(e[t]=s)}function si(e,t){if(!Array.isArray(e)){t[e]=!0;return}var n=e.shift();if(n==="PARAMETER"&&(n=e.shift()),e.length===1){if(Array.isArray(e[0])){t[n]={},si(e[0],t[n]);return}t[n]=e[0];return}if(!e.length){t[n]=!0;return}if(n==="TOWGS84"){t[n]=e;return}if(n==="AXIS"){n in t||(t[n]=[]),t[n].push(e);return}Array.isArray(n)||(t[n]={});var i;switch(n){case"UNIT":case"PRIMEM":case"VERT_DATUM":t[n]={name:e[0].toLowerCase(),convert:e[1]},e.length===3&&si(e[2],t[n]);return;case"SPHEROID":case"ELLIPSOID":t[n]={name:e[0],a:e[1],rf:e[2]},e.length===4&&si(e[3],t[n]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":e[0]=["name",e[0]],Kh(t,n,e);return;default:for(i=-1;++i<e.length;)if(!Array.isArray(e[i]))return si(e,t[n]);return Kh(t,n,e)}}var O2=.017453292519943295;function k2(e,t){var n=t[0],i=t[1];!(n in e)&&i in e&&(e[n]=e[i],t.length===3&&(e[n]=t[2](e[n])))}function Ne(e){return e*O2}function N2(e){if(e.type==="GEOGCS"?e.projName="longlat":e.type==="LOCAL_CS"?(e.projName="identity",e.local=!0):typeof e.PROJECTION=="object"?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var t="",n=0,i=e.AXIS.length;n<i;++n){var s=[e.AXIS[n][0].toLowerCase(),e.AXIS[n][1].toLowerCase()];s[0].indexOf("north")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="north"?t+="n":s[0].indexOf("south")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="south"?t+="s":s[0].indexOf("east")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="east"?t+="e":(s[0].indexOf("west")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="west")&&(t+="w")}t.length===2&&(t+="u"),t.length===3&&(e.axis=t)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.UNIT.convert&&(e.type==="GEOGCS"?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var r=e.GEOGCS;e.type==="GEOGCS"&&(r=e),r&&(r.DATUM?e.datumCode=r.DATUM.name.toLowerCase():e.datumCode=r.name.toLowerCase(),e.datumCode.slice(0,2)==="d_"&&(e.datumCode=e.datumCode.slice(2)),(e.datumCode==="new_zealand_geodetic_datum_1949"||e.datumCode==="new_zealand_1949")&&(e.datumCode="nzgd49"),(e.datumCode==="wgs_1984"||e.datumCode==="world_geodetic_system_1984")&&(e.PROJECTION==="Mercator_Auxiliary_Sphere"&&(e.sphere=!0),e.datumCode="wgs84"),e.datumCode.slice(-6)==="_ferro"&&(e.datumCode=e.datumCode.slice(0,-6)),e.datumCode.slice(-8)==="_jakarta"&&(e.datumCode=e.datumCode.slice(0,-8)),~e.datumCode.indexOf("belge")&&(e.datumCode="rnb72"),r.DATUM&&r.DATUM.SPHEROID&&(e.ellps=r.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),e.ellps.toLowerCase().slice(0,13)==="international"&&(e.ellps="intl"),e.a=r.DATUM.SPHEROID.a,e.rf=parseFloat(r.DATUM.SPHEROID.rf,10)),r.DATUM&&r.DATUM.TOWGS84&&(e.datum_params=r.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),e.datumCode==="ch1903+"&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a);function a(h){var u=e.to_meter||1;return h*u}var o=function(h){return k2(e,h)},l=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Ne],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Ne],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",Ne],["lat0","latitude_of_origin",Ne],["lat0","standard_parallel_1",Ne],["lat1","standard_parallel_1",Ne],["lat2","standard_parallel_2",Ne],["azimuth","Azimuth"],["alpha","azimuth",Ne],["srsCode","name"]];l.forEach(o),!e.long0&&e.longc&&(e.projName==="Albers_Conic_Equal_Area"||e.projName==="Lambert_Azimuthal_Equal_Area")&&(e.long0=e.longc),!e.lat_ts&&e.lat1&&(e.projName==="Stereographic_South_Pole"||e.projName==="Polar Stereographic (variant B)")?(e.lat0=Ne(e.lat1>0?90:-90),e.lat_ts=e.lat1):!e.lat_ts&&e.lat0&&e.projName==="Polar_Stereographic"&&(e.lat_ts=e.lat0,e.lat0=Ne(e.lat0>0?90:-90))}function vd(e){var t=L2(e),n=t.shift(),i=t.shift();t.unshift(["name",i]),t.unshift(["type",n]);var s={};return si(t,s),N2(s),s}function re(e){var t=this;if(arguments.length===2){var n=arguments[1];typeof n=="string"?n.charAt(0)==="+"?re[e]=io(arguments[1]):re[e]=vd(arguments[1]):re[e]=n}else if(arguments.length===1){if(Array.isArray(e))return e.map(function(i){Array.isArray(i)?re.apply(t,i):re(i)});if(typeof e=="string"){if(e in re)return re[e]}else"EPSG"in e?re["EPSG:"+e.EPSG]=e:"ESRI"in e?re["ESRI:"+e.ESRI]=e:"IAU2000"in e?re["IAU2000:"+e.IAU2000]=e:console.log(e);return}}C2(re);function $2(e){return typeof e=="string"}function B2(e){return e in re}var z2=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function U2(e){return z2.some(function(t){return e.indexOf(t)>-1})}var j2=["3857","900913","3785","102113"];function G2(e){var t=_n(e,"authority");if(t){var n=_n(t,"epsg");return n&&j2.indexOf(n)>-1}}function W2(e){var t=_n(e,"extension");if(t)return _n(t,"proj4")}function q2(e){return e[0]==="+"}function X2(e){if($2(e)){if(B2(e))return re[e];if(U2(e)){var t=vd(e);if(G2(t))return re["EPSG:3857"];var n=W2(t);return n?io(n):t}if(q2(e))return io(e)}else return e}function Zh(e,t){e=e||{};var n,i;if(!t)return e;for(i in t)n=t[i],n!==void 0&&(e[i]=n);return e}function qe(e,t,n){var i=e*t;return n/Math.sqrt(1-i*i)}function Es(e){return e<0?-1:1}function B(e){return Math.abs(e)<=St?e:e-Es(e)*hs}function Le(e,t,n){var i=e*n,s=.5*e;return i=Math.pow((1-i)/(1+i),s),Math.tan(.5*(A-t))/i}function cs(e,t){for(var n=.5*e,i,s,r=A-2*Math.atan(t),a=0;a<=15;a++)if(i=e*Math.sin(r),s=A-2*Math.atan(t*Math.pow((1-i)/(1+i),n))-r,r+=s,Math.abs(s)<=1e-10)return r;return-9999}function K2(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=qe(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function Z2(e){var t=e.x,n=e.y;if(n*Ue>90&&n*Ue<-90&&t*Ue>180&&t*Ue<-180)return null;var i,s;if(Math.abs(Math.abs(n)-A)<=O)return null;if(this.sphere)i=this.x0+this.a*this.k0*B(t-this.long0),s=this.y0+this.a*this.k0*Math.log(Math.tan(ht+.5*n));else{var r=Math.sin(n),a=Le(this.e,n,r);i=this.x0+this.a*this.k0*B(t-this.long0),s=this.y0-this.a*this.k0*Math.log(a)}return e.x=i,e.y=s,e}function V2(e){var t=e.x-this.x0,n=e.y-this.y0,i,s;if(this.sphere)s=A-2*Math.atan(Math.exp(-n/(this.a*this.k0)));else{var r=Math.exp(-n/(this.a*this.k0));if(s=cs(this.e,r),s===-9999)return null}return i=B(this.long0+t/(this.a*this.k0)),e.x=i,e.y=s,e}var H2=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const Y2={init:K2,forward:Z2,inverse:V2,names:H2};function Q2(){}function Vh(e){return e}var J2=["longlat","identity"];const tx={init:Q2,forward:Vh,inverse:Vh,names:J2};var ex=[Y2,tx],Js={},Cr=[];function Ed(e,t){var n=Cr.length;return e.names?(Cr[n]=e,e.names.forEach(function(i){Js[i.toLowerCase()]=n}),this):(console.log(t),!0)}function nx(e){if(!e)return!1;var t=e.toLowerCase();if(typeof Js[t]<"u"&&Cr[Js[t]])return Cr[Js[t]]}function ix(){ex.forEach(Ed)}const sx={start:ix,add:Ed,get:nx};var Q={};Q.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};Q.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};Q.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};Q.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};Q.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};Q.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};Q.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};Q.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};Q.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};Q.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};Q.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};Q.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};Q.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};Q.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};Q.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};Q.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};Q.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};Q.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};Q.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};Q.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};Q.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};Q.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};Q.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};Q.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};Q.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};Q.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};Q.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};Q.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};Q.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};Q.hough={a:6378270,rf:297,ellipseName:"Hough"};Q.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};Q.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};Q.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};Q.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};Q.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};Q.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};Q.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};Q.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};Q.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};Q.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};Q.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};Q.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var rx=Q.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Q.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function ax(e,t,n,i){var s=e*e,r=t*t,a=(s-r)/s,o=0;i?(e*=1-a*(T2+a*(F2+a*A2)),s=e*e,a=0):o=Math.sqrt(a);var l=(s-r)/r;return{es:a,e:o,ep2:l}}function ox(e,t,n,i,s){if(!e){var r=_n(Q,i);r||(r=rx),e=r.a,t=r.b,n=r.rf}return n&&!t&&(t=(1-1/n)*e),(n===0||Math.abs(e-t)<O)&&(s=!0,t=e),{a:e,b:t,rf:n,sphere:s}}var Bt={};Bt.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};Bt.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};Bt.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};Bt.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};Bt.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};Bt.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};Bt.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};Bt.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"};Bt.militargeographische_institut={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"};Bt.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};Bt.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};Bt.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};Bt.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};Bt.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};Bt.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};Bt.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};Bt.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};Bt.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function lx(e,t,n,i,s,r,a){var o={};return e===void 0||e==="none"?o.datum_type=no:o.datum_type=w2,t&&(o.datum_params=t.map(parseFloat),(o.datum_params[0]!==0||o.datum_params[1]!==0||o.datum_params[2]!==0)&&(o.datum_type=Nn),o.datum_params.length>3&&(o.datum_params[3]!==0||o.datum_params[4]!==0||o.datum_params[5]!==0||o.datum_params[6]!==0)&&(o.datum_type=$n,o.datum_params[3]*=Qi,o.datum_params[4]*=Qi,o.datum_params[5]*=Qi,o.datum_params[6]=o.datum_params[6]/1e6+1)),a&&(o.datum_type=yi,o.grids=a),o.a=n,o.b=i,o.es=s,o.ep2=r,o}var xd={};function hx(e,t){var n=new DataView(t),i=dx(n),s=fx(n,i),r=gx(n,s,i),a={header:s,subgrids:r};return xd[e]=a,a}function ux(e){if(e===void 0)return null;var t=e.split(",");return t.map(cx)}function cx(e){if(e.length===0)return null;var t=e[0]==="@";return t&&(e=e.slice(1)),e==="null"?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:e,mandatory:!t,grid:xd[e]||null,isNull:!1}}function ri(e){return e/3600*Math.PI/180}function dx(e){var t=e.getInt32(8,!1);return t===11?!1:(t=e.getInt32(8,!0),t!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function fx(e,t){return{nFields:e.getInt32(8,t),nSubgridFields:e.getInt32(24,t),nSubgrids:e.getInt32(40,t),shiftType:so(e,56,56+8).trim(),fromSemiMajorAxis:e.getFloat64(120,t),fromSemiMinorAxis:e.getFloat64(136,t),toSemiMajorAxis:e.getFloat64(152,t),toSemiMinorAxis:e.getFloat64(168,t)}}function so(e,t,n){return String.fromCharCode.apply(null,new Uint8Array(e.buffer.slice(t,n)))}function gx(e,t,n){for(var i=176,s=[],r=0;r<t.nSubgrids;r++){var a=px(e,i,n),o=_x(e,i,a,n),l=Math.round(1+(a.upperLongitude-a.lowerLongitude)/a.longitudeInterval),h=Math.round(1+(a.upperLatitude-a.lowerLatitude)/a.latitudeInterval);s.push({ll:[ri(a.lowerLongitude),ri(a.lowerLatitude)],del:[ri(a.longitudeInterval),ri(a.latitudeInterval)],lim:[l,h],count:a.gridNodeCount,cvs:mx(o)}),i+=176+a.gridNodeCount*16}return s}function mx(e){return e.map(function(t){return[ri(t.longitudeShift),ri(t.latitudeShift)]})}function px(e,t,n){return{name:so(e,t+8,t+16).trim(),parent:so(e,t+24,t+24+8).trim(),lowerLatitude:e.getFloat64(t+72,n),upperLatitude:e.getFloat64(t+88,n),lowerLongitude:e.getFloat64(t+104,n),upperLongitude:e.getFloat64(t+120,n),latitudeInterval:e.getFloat64(t+136,n),longitudeInterval:e.getFloat64(t+152,n),gridNodeCount:e.getInt32(t+168,n)}}function _x(e,t,n,i){for(var s=t+176,r=16,a=[],o=0;o<n.gridNodeCount;o++){var l={latitudeShift:e.getFloat32(s+o*r,i),longitudeShift:e.getFloat32(s+o*r+4,i),latitudeAccuracy:e.getFloat32(s+o*r+8,i),longitudeAccuracy:e.getFloat32(s+o*r+12,i)};a.push(l)}return a}function je(e,t){if(!(this instanceof je))return new je(e);t=t||function(h){if(h)throw h};var n=X2(e);if(typeof n!="object"){t(e);return}var i=je.projections.get(n.projName);if(!i){t(e);return}if(n.datumCode&&n.datumCode!=="none"){var s=_n(Bt,n.datumCode);s&&(n.datum_params=n.datum_params||(s.towgs84?s.towgs84.split(","):null),n.ellps=s.ellipse,n.datumName=s.datumName?s.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var r=ox(n.a,n.b,n.rf,n.ellps,n.sphere),a=ax(r.a,r.b,r.rf,n.R_A),o=ux(n.nadgrids),l=n.datum||lx(n.datumCode,n.datum_params,r.a,r.b,a.es,a.ep2,o);Zh(this,n),Zh(this,i),this.a=r.a,this.b=r.b,this.rf=r.rf,this.sphere=r.sphere,this.es=a.es,this.e=a.e,this.ep2=a.ep2,this.datum=l,this.init(),t(null,this)}je.projections=sx;je.projections.start();function yx(e,t){return e.datum_type!==t.datum_type||e.a!==t.a||Math.abs(e.es-t.es)>5e-11?!1:e.datum_type===Nn?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:e.datum_type===$n?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6]:!0}function bd(e,t,n){var i=e.x,s=e.y,r=e.z?e.z:0,a,o,l,h;if(s<-A&&s>-1.001*A)s=-A;else if(s>A&&s<1.001*A)s=A;else{if(s<-A)return{x:-1/0,y:-1/0,z:e.z};if(s>A)return{x:1/0,y:1/0,z:e.z}}return i>Math.PI&&(i-=2*Math.PI),o=Math.sin(s),h=Math.cos(s),l=o*o,a=n/Math.sqrt(1-t*l),{x:(a+r)*h*Math.cos(i),y:(a+r)*h*Math.sin(i),z:(a*(1-t)+r)*o}}function Md(e,t,n,i){var s=1e-12,r=s*s,a=30,o,l,h,u,c,d,f,g,m,_,v,E,M,x=e.x,w=e.y,S=e.z?e.z:0,Y,W,st;if(o=Math.sqrt(x*x+w*w),l=Math.sqrt(x*x+w*w+S*S),o/n<s){if(Y=0,l/n<s)return W=A,st=-i,{x:e.x,y:e.y,z:e.z}}else Y=Math.atan2(w,x);h=S/l,u=o/l,c=1/Math.sqrt(1-t*(2-t)*u*u),g=u*(1-t)*c,m=h*c,M=0;do M++,f=n/Math.sqrt(1-t*m*m),st=o*g+S*m-f*(1-t*m*m),d=t*f/(f+st),c=1/Math.sqrt(1-d*(2-d)*u*u),_=u*(1-d)*c,v=h*c,E=v*g-_*m,g=_,m=v;while(E*E>r&&M<a);return W=Math.atan(v/Math.abs(_)),{x:Y,y:W,z:st}}function vx(e,t,n){if(t===Nn)return{x:e.x+n[0],y:e.y+n[1],z:e.z+n[2]};if(t===$n){var i=n[0],s=n[1],r=n[2],a=n[3],o=n[4],l=n[5],h=n[6];return{x:h*(e.x-l*e.y+o*e.z)+i,y:h*(l*e.x+e.y-a*e.z)+s,z:h*(-o*e.x+a*e.y+e.z)+r}}}function Ex(e,t,n){if(t===Nn)return{x:e.x-n[0],y:e.y-n[1],z:e.z-n[2]};if(t===$n){var i=n[0],s=n[1],r=n[2],a=n[3],o=n[4],l=n[5],h=n[6],u=(e.x-i)/h,c=(e.y-s)/h,d=(e.z-r)/h;return{x:u+l*c-o*d,y:-l*u+c+a*d,z:o*u-a*c+d}}}function Gs(e){return e===Nn||e===$n}function xx(e,t,n){if(yx(e,t)||e.datum_type===no||t.datum_type===no)return n;var i=e.a,s=e.es;if(e.datum_type===yi){var r=Hh(e,!1,n);if(r!==0)return;i=Wh,s=qh}var a=t.a,o=t.b,l=t.es;if(t.datum_type===yi&&(a=Wh,o=D2,l=qh),s===l&&i===a&&!Gs(e.datum_type)&&!Gs(t.datum_type))return n;if(n=bd(n,s,i),Gs(e.datum_type)&&(n=vx(n,e.datum_type,e.datum_params)),Gs(t.datum_type)&&(n=Ex(n,t.datum_type,t.datum_params)),n=Md(n,l,a,o),t.datum_type===yi){var h=Hh(t,!0,n);if(h!==0)return}return n}function Hh(e,t,n){if(e.grids===null||e.grids.length===0)return console.log("Grid shift grids not found"),-1;var i={x:-n.x,y:n.y},s={x:Number.NaN,y:Number.NaN},r=[];t:for(var a=0;a<e.grids.length;a++){var o=e.grids[a];if(r.push(o.name),o.isNull){s=i;break}if(o.mandatory,o.grid===null){if(o.mandatory)return console.log("Unable to find mandatory grid '"+o.name+"'"),-1;continue}for(var l=o.grid.subgrids,h=0,u=l.length;h<u;h++){var c=l[h],d=(Math.abs(c.del[1])+Math.abs(c.del[0]))/1e4,f=c.ll[0]-d,g=c.ll[1]-d,m=c.ll[0]+(c.lim[0]-1)*c.del[0]+d,_=c.ll[1]+(c.lim[1]-1)*c.del[1]+d;if(!(g>i.y||f>i.x||_<i.y||m<i.x)&&(s=bx(i,t,c),!isNaN(s.x)))break t}}return isNaN(s.x)?(console.log("Failed to find a grid shift table for location '"+-i.x*Ue+" "+i.y*Ue+" tried: '"+r+"'"),-1):(n.x=-s.x,n.y=s.y,0)}function bx(e,t,n){var i={x:Number.NaN,y:Number.NaN};if(isNaN(e.x))return i;var s={x:e.x,y:e.y};s.x-=n.ll[0],s.y-=n.ll[1],s.x=B(s.x-Math.PI)+Math.PI;var r=Yh(s,n);if(t){if(isNaN(r.x))return i;r.x=s.x-r.x,r.y=s.y-r.y;var a=9,o=1e-12,l,h;do{if(h=Yh(r,n),isNaN(h.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:s.x-(h.x+r.x),y:s.y-(h.y+r.y)},r.x+=l.x,r.y+=l.y}while(a--&&Math.abs(l.x)>o&&Math.abs(l.y)>o);if(a<0)return console.log("Inverse grid shift iterator failed to converge."),i;i.x=B(r.x+n.ll[0]),i.y=r.y+n.ll[1]}else isNaN(r.x)||(i.x=e.x+r.x,i.y=e.y+r.y);return i}function Yh(e,t){var n={x:e.x/t.del[0],y:e.y/t.del[1]},i={x:Math.floor(n.x),y:Math.floor(n.y)},s={x:n.x-1*i.x,y:n.y-1*i.y},r={x:Number.NaN,y:Number.NaN},a;if(i.x<0||i.x>=t.lim[0]||i.y<0||i.y>=t.lim[1])return r;a=i.y*t.lim[0]+i.x;var o={x:t.cvs[a][0],y:t.cvs[a][1]};a++;var l={x:t.cvs[a][0],y:t.cvs[a][1]};a+=t.lim[0];var h={x:t.cvs[a][0],y:t.cvs[a][1]};a--;var u={x:t.cvs[a][0],y:t.cvs[a][1]},c=s.x*s.y,d=s.x*(1-s.y),f=(1-s.x)*(1-s.y),g=(1-s.x)*s.y;return r.x=f*o.x+d*l.x+g*u.x+c*h.x,r.y=f*o.y+d*l.y+g*u.y+c*h.y,r}function Qh(e,t,n){var i=n.x,s=n.y,r=n.z||0,a,o,l,h={};for(l=0;l<3;l++)if(!(t&&l===2&&n.z===void 0))switch(l===0?(a=i,"ew".indexOf(e.axis[l])!==-1?o="x":o="y"):l===1?(a=s,"ns".indexOf(e.axis[l])!==-1?o="y":o="x"):(a=r,o="z"),e.axis[l]){case"e":h[o]=a;break;case"w":h[o]=-a;break;case"n":h[o]=a;break;case"s":h[o]=-a;break;case"u":n[o]!==void 0&&(h.z=a);break;case"d":n[o]!==void 0&&(h.z=-a);break;default:return null}return h}function Cd(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t}function Mx(e){Jh(e.x),Jh(e.y)}function Jh(e){if(typeof Number.isFinite=="function"){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if(typeof e!="number"||e!==e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function Cx(e,t){return(e.datum.datum_type===Nn||e.datum.datum_type===$n||e.datum.datum_type===yi)&&t.datumCode!=="WGS84"||(t.datum.datum_type===Nn||t.datum.datum_type===$n||t.datum.datum_type===yi)&&e.datumCode!=="WGS84"}function wr(e,t,n,i){var s;Array.isArray(n)?n=Cd(n):n={x:n.x,y:n.y,z:n.z,m:n.m};var r=n.z!==void 0;if(Mx(n),e.datum&&t.datum&&Cx(e,t)&&(s=new je("WGS84"),n=wr(e,s,n,i),e=s),i&&e.axis!=="enu"&&(n=Qh(e,!1,n)),e.projName==="longlat")n={x:n.x*Gt,y:n.y*Gt,z:n.z||0};else if(e.to_meter&&(n={x:n.x*e.to_meter,y:n.y*e.to_meter,z:n.z||0}),n=e.inverse(n),!n)return;if(e.from_greenwich&&(n.x+=e.from_greenwich),n=xx(e.datum,t.datum,n),!!n)return t.from_greenwich&&(n={x:n.x-t.from_greenwich,y:n.y,z:n.z||0}),t.projName==="longlat"?n={x:n.x*Ue,y:n.y*Ue,z:n.z||0}:(n=t.forward(n),t.to_meter&&(n={x:n.x/t.to_meter,y:n.y/t.to_meter,z:n.z||0})),i&&t.axis!=="enu"?Qh(t,!0,n):(n&&!r&&delete n.z,n)}var tu=je("WGS84");function Da(e,t,n,i){var s,r,a;return Array.isArray(n)?(s=wr(e,t,n,i)||{x:NaN,y:NaN},n.length>2?typeof e.name<"u"&&e.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"?typeof s.z=="number"?[s.x,s.y,s.z].concat(n.splice(3)):[s.x,s.y,n[2]].concat(n.splice(3)):[s.x,s.y].concat(n.splice(2)):[s.x,s.y]):(r=wr(e,t,n,i),a=Object.keys(n),a.length===2||a.forEach(function(o){if(typeof e.name<"u"&&e.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"){if(o==="x"||o==="y"||o==="z")return}else if(o==="x"||o==="y")return;r[o]=n[o]}),r)}function eu(e){return e instanceof je?e:e.oProj?e.oProj:je(e)}function Ee(e,t,n){e=eu(e);var i=!1,s;return typeof t>"u"?(t=e,e=tu,i=!0):(typeof t.x<"u"||Array.isArray(t))&&(n=t,t=e,e=tu,i=!0),t=eu(t),n?Da(e,t,n):(s={forward:function(r,a){return Da(e,t,r,a)},inverse:function(r,a){return Da(t,e,r,a)}},i&&(s.oProj=t),s)}var nu=6,wd="AJSAJS",Dd="AFAFAF",ai=65,ue=73,xe=79,Wi=86,qi=90;const wx={forward:Td,inverse:Dx,toPoint:Fd};function Td(e,t){return t=t||5,Ax(Tx({lat:e[1],lon:e[0]}),t)}function Dx(e){var t=rl(Rd(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]}function Fd(e){var t=rl(Rd(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function Ta(e){return e*(Math.PI/180)}function iu(e){return 180*(e/Math.PI)}function Tx(e){var t=e.lat,n=e.lon,i=6378137,s=.00669438,r=.9996,a,o,l,h,u,c,d,f=Ta(t),g=Ta(n),m,_;_=Math.floor((n+180)/6)+1,n===180&&(_=60),t>=56&&t<64&&n>=3&&n<12&&(_=32),t>=72&&t<84&&(n>=0&&n<9?_=31:n>=9&&n<21?_=33:n>=21&&n<33?_=35:n>=33&&n<42&&(_=37)),a=(_-1)*6-180+3,m=Ta(a),o=s/(1-s),l=i/Math.sqrt(1-s*Math.sin(f)*Math.sin(f)),h=Math.tan(f)*Math.tan(f),u=o*Math.cos(f)*Math.cos(f),c=Math.cos(f)*(g-m),d=i*((1-s/4-3*s*s/64-5*s*s*s/256)*f-(3*s/8+3*s*s/32+45*s*s*s/1024)*Math.sin(2*f)+(15*s*s/256+45*s*s*s/1024)*Math.sin(4*f)-35*s*s*s/3072*Math.sin(6*f));var v=r*l*(c+(1-h+u)*c*c*c/6+(5-18*h+h*h+72*u-58*o)*c*c*c*c*c/120)+5e5,E=r*(d+l*Math.tan(f)*(c*c/2+(5-h+9*u+4*u*u)*c*c*c*c/24+(61-58*h+h*h+600*u-330*o)*c*c*c*c*c*c/720));return t<0&&(E+=1e7),{northing:Math.round(E),easting:Math.round(v),zoneNumber:_,zoneLetter:Fx(t)}}function rl(e){var t=e.northing,n=e.easting,i=e.zoneLetter,s=e.zoneNumber;if(s<0||s>60)return null;var r=.9996,a=6378137,o=.00669438,l,h=(1-Math.sqrt(1-o))/(1+Math.sqrt(1-o)),u,c,d,f,g,m,_,v,E,M=n-5e5,x=t;i<"N"&&(x-=1e7),_=(s-1)*6-180+3,l=o/(1-o),m=x/r,v=m/(a*(1-o/4-3*o*o/64-5*o*o*o/256)),E=v+(3*h/2-27*h*h*h/32)*Math.sin(2*v)+(21*h*h/16-55*h*h*h*h/32)*Math.sin(4*v)+151*h*h*h/96*Math.sin(6*v),u=a/Math.sqrt(1-o*Math.sin(E)*Math.sin(E)),c=Math.tan(E)*Math.tan(E),d=l*Math.cos(E)*Math.cos(E),f=a*(1-o)/Math.pow(1-o*Math.sin(E)*Math.sin(E),1.5),g=M/(u*r);var w=E-u*Math.tan(E)/f*(g*g/2-(5+3*c+10*d-4*d*d-9*l)*g*g*g*g/24+(61+90*c+298*d+45*c*c-252*l-3*d*d)*g*g*g*g*g*g/720);w=iu(w);var S=(g-(1+2*c+d)*g*g*g/6+(5-2*d+28*c-3*d*d+8*l+24*c*c)*g*g*g*g*g/120)/Math.cos(E);S=_+iu(S);var Y;if(e.accuracy){var W=rl({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});Y={top:W.lat,right:W.lon,bottom:w,left:S}}else Y={lat:w,lon:S};return Y}function Fx(e){var t="Z";return 84>=e&&e>=72?t="X":72>e&&e>=64?t="W":64>e&&e>=56?t="V":56>e&&e>=48?t="U":48>e&&e>=40?t="T":40>e&&e>=32?t="S":32>e&&e>=24?t="R":24>e&&e>=16?t="Q":16>e&&e>=8?t="P":8>e&&e>=0?t="N":0>e&&e>=-8?t="M":-8>e&&e>=-16?t="L":-16>e&&e>=-24?t="K":-24>e&&e>=-32?t="J":-32>e&&e>=-40?t="H":-40>e&&e>=-48?t="G":-48>e&&e>=-56?t="F":-56>e&&e>=-64?t="E":-64>e&&e>=-72?t="D":-72>e&&e>=-80&&(t="C"),t}function Ax(e,t){var n="00000"+e.easting,i="00000"+e.northing;return e.zoneNumber+e.zoneLetter+Rx(e.easting,e.northing,e.zoneNumber)+n.substr(n.length-5,t)+i.substr(i.length-5,t)}function Rx(e,t,n){var i=Ad(n),s=Math.floor(e/1e5),r=Math.floor(t/1e5)%20;return Ix(s,r,i)}function Ad(e){var t=e%nu;return t===0&&(t=nu),t}function Ix(e,t,n){var i=n-1,s=wd.charCodeAt(i),r=Dd.charCodeAt(i),a=s+e-1,o=r+t,l=!1;a>qi&&(a=a-qi+ai-1,l=!0),(a===ue||s<ue&&a>ue||(a>ue||s<ue)&&l)&&a++,(a===xe||s<xe&&a>xe||(a>xe||s<xe)&&l)&&(a++,a===ue&&a++),a>qi&&(a=a-qi+ai-1),o>Wi?(o=o-Wi+ai-1,l=!0):l=!1,(o===ue||r<ue&&o>ue||(o>ue||r<ue)&&l)&&o++,(o===xe||r<xe&&o>xe||(o>xe||r<xe)&&l)&&(o++,o===ue&&o++),o>Wi&&(o=o-Wi+ai-1);var h=String.fromCharCode(a)+String.fromCharCode(o);return h}function Rd(e){if(e&&e.length===0)throw"MGRSPoint coverting from nothing";for(var t=e.length,n=null,i="",s,r=0;!/[A-Z]/.test(s=e.charAt(r));){if(r>=2)throw"MGRSPoint bad conversion from: "+e;i+=s,r++}var a=parseInt(i,10);if(r===0||r+3>t)throw"MGRSPoint bad conversion from: "+e;var o=e.charAt(r++);if(o<="A"||o==="B"||o==="Y"||o>="Z"||o==="I"||o==="O")throw"MGRSPoint zone letter "+o+" not handled: "+e;n=e.substring(r,r+=2);for(var l=Ad(a),h=Sx(n.charAt(0),l),u=Px(n.charAt(1),l);u<Lx(o);)u+=2e6;var c=t-r;if(c%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+e;var d=c/2,f=0,g=0,m,_,v,E,M;return d>0&&(m=1e5/Math.pow(10,d),_=e.substring(r,r+d),f=parseFloat(_)*m,v=e.substring(r+d),g=parseFloat(v)*m),E=f+h,M=g+u,{easting:E,northing:M,zoneLetter:o,zoneNumber:a,accuracy:m}}function Sx(e,t){for(var n=wd.charCodeAt(t-1),i=1e5,s=!1;n!==e.charCodeAt(0);){if(n++,n===ue&&n++,n===xe&&n++,n>qi){if(s)throw"Bad character: "+e;n=ai,s=!0}i+=1e5}return i}function Px(e,t){if(e>"V")throw"MGRSPoint given invalid Northing "+e;for(var n=Dd.charCodeAt(t-1),i=0,s=!1;n!==e.charCodeAt(0);){if(n++,n===ue&&n++,n===xe&&n++,n>Wi){if(s)throw"Bad character: "+e;n=ai,s=!0}i+=1e5}return i}function Lx(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+e}function Fi(e,t,n){if(!(this instanceof Fi))return new Fi(e,t,n);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if(typeof e=="object")this.x=e.x,this.y=e.y,this.z=e.z||0;else if(typeof e=="string"&&typeof t>"u"){var i=e.split(",");this.x=parseFloat(i[0],10),this.y=parseFloat(i[1],10),this.z=parseFloat(i[2],10)||0}else this.x=e,this.y=t,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Fi.fromMGRS=function(e){return new Fi(Fd(e))};Fi.prototype.toMGRS=function(e){return Td([this.x,this.y],e)};var Ox=1,kx=.25,su=.046875,ru=.01953125,au=.01068115234375,Nx=.75,$x=.46875,Bx=.013020833333333334,zx=.007120768229166667,Ux=.3645833333333333,jx=.005696614583333333,Gx=.3076171875;function Id(e){var t=[];t[0]=Ox-e*(kx+e*(su+e*(ru+e*au))),t[1]=e*(Nx-e*(su+e*(ru+e*au)));var n=e*e;return t[2]=n*($x-e*(Bx+e*zx)),n*=e,t[3]=n*(Ux-e*jx),t[4]=n*e*Gx,t}function aa(e,t,n,i){return n*=t,t*=t,i[0]*e-n*(i[1]+t*(i[2]+t*(i[3]+t*i[4])))}var Wx=20;function Sd(e,t,n){for(var i=1/(1-t),s=e,r=Wx;r;--r){var a=Math.sin(s),o=1-t*a*a;if(o=(aa(s,a,Math.cos(s),n)-e)*(o*Math.sqrt(o))*i,s-=o,Math.abs(o)<O)return s}return s}function qx(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=Id(this.es),this.ml0=aa(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function Xx(e){var t=e.x,n=e.y,i=B(t-this.long0),s,r,a,o=Math.sin(n),l=Math.cos(n);if(this.es){var u=l*i,c=Math.pow(u,2),d=this.ep2*Math.pow(l,2),f=Math.pow(d,2),g=Math.abs(l)>O?Math.tan(n):0,m=Math.pow(g,2),_=Math.pow(m,2);s=1-this.es*Math.pow(o,2),u=u/Math.sqrt(s);var v=aa(n,o,l,this.en);r=this.a*(this.k0*u*(1+c/6*(1-m+d+c/20*(5-18*m+_+14*d-58*m*d+c/42*(61+179*_-_*m-479*m)))))+this.x0,a=this.a*(this.k0*(v-this.ml0+o*i*u/2*(1+c/12*(5-m+9*d+4*f+c/30*(61+_-58*m+270*d-330*m*d+c/56*(1385+543*_-_*m-3111*m))))))+this.y0}else{var h=l*Math.sin(i);if(Math.abs(Math.abs(h)-1)<O)return 93;if(r=.5*this.a*this.k0*Math.log((1+h)/(1-h))+this.x0,a=l*Math.cos(i)/Math.sqrt(1-Math.pow(h,2)),h=Math.abs(a),h>=1){if(h-1>O)return 93;a=0}else a=Math.acos(a);n<0&&(a=-a),a=this.a*this.k0*(a-this.lat0)+this.y0}return e.x=r,e.y=a,e}function Kx(e){var t,n,i,s,r=(e.x-this.x0)*(1/this.a),a=(e.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+a/this.k0,n=Sd(t,this.es,this.en),Math.abs(n)<A){var c=Math.sin(n),d=Math.cos(n),f=Math.abs(d)>O?Math.tan(n):0,g=this.ep2*Math.pow(d,2),m=Math.pow(g,2),_=Math.pow(f,2),v=Math.pow(_,2);t=1-this.es*Math.pow(c,2);var E=r*Math.sqrt(t)/this.k0,M=Math.pow(E,2);t=t*f,i=n-t*M/(1-this.es)*.5*(1-M/12*(5+3*_-9*g*_+g-4*m-M/30*(61+90*_-252*g*_+45*v+46*g-M/56*(1385+3633*_+4095*v+1574*v*_)))),s=B(this.long0+E*(1-M/6*(1+2*_+g-M/20*(5+28*_+24*v+8*g*_+6*g-M/42*(61+662*_+1320*v+720*v*_))))/d)}else i=A*Es(a),s=0;else{var o=Math.exp(r/this.k0),l=.5*(o-1/o),h=this.lat0+a/this.k0,u=Math.cos(h);t=Math.sqrt((1-Math.pow(u,2))/(1+Math.pow(l,2))),i=Math.asin(t),a<0&&(i=-i),l===0&&u===0?s=0:s=B(Math.atan2(l,u)+this.long0)}return e.x=s,e.y=i,e}var Zx=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const tr={init:qx,forward:Xx,inverse:Kx,names:Zx};function Pd(e){var t=Math.exp(e);return t=(t-1/t)/2,t}function we(e,t){e=Math.abs(e),t=Math.abs(t);var n=Math.max(e,t),i=Math.min(e,t)/(n||1);return n*Math.sqrt(1+Math.pow(i,2))}function Vx(e){var t=1+e,n=t-1;return n===0?e:e*Math.log(t)/n}function Hx(e){var t=Math.abs(e);return t=Vx(t*(1+t/(we(1,t)+1))),e<0?-t:t}function al(e,t){for(var n=2*Math.cos(2*t),i=e.length-1,s=e[i],r=0,a;--i>=0;)a=-r+n*s+e[i],r=s,s=a;return t+a*Math.sin(2*t)}function Yx(e,t){for(var n=2*Math.cos(t),i=e.length-1,s=e[i],r=0,a;--i>=0;)a=-r+n*s+e[i],r=s,s=a;return Math.sin(t)*a}function Qx(e){var t=Math.exp(e);return t=(t+1/t)/2,t}function Ld(e,t,n){for(var i=Math.sin(t),s=Math.cos(t),r=Pd(n),a=Qx(n),o=2*s*a,l=-2*i*r,h=e.length-1,u=e[h],c=0,d=0,f=0,g,m;--h>=0;)g=d,m=c,d=u,c=f,u=-g+o*d-l*c+e[h],f=-m+l*d+o*c;return o=i*a,l=s*r,[o*u-l*f,o*f+l*u]}function Jx(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(tr.init.apply(this),this.forward=tr.forward,this.inverse=tr.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),t=e/(2-e),n=t;this.cgb[0]=t*(2+t*(-2/3+t*(-2+t*(116/45+t*(26/45+t*(-2854/675)))))),this.cbg[0]=t*(-2+t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))),n=n*t,this.cgb[1]=n*(7/3+t*(-8/5+t*(-227/45+t*(2704/315+t*(2323/945))))),this.cbg[1]=n*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),n=n*t,this.cgb[2]=n*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=n*(-26/15+t*(34/21+t*(8/5+t*(-12686/2835)))),n=n*t,this.cgb[3]=n*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=n*(1237/630+t*(-12/5+t*(-24832/14175))),n=n*t,this.cgb[4]=n*(4174/315+t*(-144838/6237)),this.cbg[4]=n*(-734/315+t*(109598/31185)),n=n*t,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=t*(-.5+t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=n*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=n*(13/48+t*(-3/5+t*(557/1440+t*(281/630+t*(-1983433/1935360))))),n=n*t,this.utg[2]=n*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=n*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),n=n*t,this.utg[3]=n*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=n*(49561/161280+t*(-179/168+t*(6601661/7257600))),n=n*t,this.utg[4]=n*(-4583/161280+t*(108847/3991680)),this.gtu[4]=n*(34729/80640+t*(-3418889/1995840)),n=n*t,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=n*(212378941/319334400);var i=al(this.cbg,this.lat0);this.Zb=-this.Qn*(i+Yx(this.gtu,2*i))}function tb(e){var t=B(e.x-this.long0),n=e.y;n=al(this.cbg,n);var i=Math.sin(n),s=Math.cos(n),r=Math.sin(t),a=Math.cos(t);n=Math.atan2(i,a*s),t=Math.atan2(r*s,we(i,s*a)),t=Hx(Math.tan(t));var o=Ld(this.gtu,2*n,2*t);n=n+o[0],t=t+o[1];var l,h;return Math.abs(t)<=2.623395162778?(l=this.a*(this.Qn*t)+this.x0,h=this.a*(this.Qn*n+this.Zb)+this.y0):(l=1/0,h=1/0),e.x=l,e.y=h,e}function eb(e){var t=(e.x-this.x0)*(1/this.a),n=(e.y-this.y0)*(1/this.a);n=(n-this.Zb)/this.Qn,t=t/this.Qn;var i,s;if(Math.abs(t)<=2.623395162778){var r=Ld(this.utg,2*n,2*t);n=n+r[0],t=t+r[1],t=Math.atan(Pd(t));var a=Math.sin(n),o=Math.cos(n),l=Math.sin(t),h=Math.cos(t);n=Math.atan2(a*h,we(l,h*o)),t=Math.atan2(l,h*o),i=B(t+this.long0),s=al(this.cgb,n)}else i=1/0,s=1/0;return e.x=i,e.y=s,e}var nb=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const er={init:Jx,forward:tb,inverse:eb,names:nb};function ib(e,t){if(e===void 0){if(e=Math.floor((B(t)+Math.PI)*30/Math.PI)+1,e<0)return 0;if(e>60)return 60}return e}var sb="etmerc";function rb(){var e=ib(this.zone,this.long0);if(e===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*Gt,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,er.init.apply(this),this.forward=er.forward,this.inverse=er.inverse}var ab=["Universal Transverse Mercator System","utm"];const ob={init:rb,names:ab,dependsOn:sb};function ol(e,t){return Math.pow((1-e)/(1+e),t)}var lb=20;function hb(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+ht)/(Math.pow(Math.tan(.5*this.lat0+ht),this.C)*ol(this.e*e,this.ratexp))}function ub(e){var t=e.x,n=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+ht),this.C)*ol(this.e*Math.sin(n),this.ratexp))-A,e.x=this.C*t,e}function cb(e){for(var t=1e-14,n=e.x/this.C,i=e.y,s=Math.pow(Math.tan(.5*i+ht)/this.K,1/this.C),r=lb;r>0&&(i=2*Math.atan(s*ol(this.e*Math.sin(e.y),-.5*this.e))-A,!(Math.abs(i-e.y)<t));--r)e.y=i;return r?(e.x=n,e.y=i,e):null}var db=["gauss"];const ll={init:hb,forward:ub,inverse:cb,names:db};function fb(){ll.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function gb(e){var t,n,i,s;return e.x=B(e.x-this.long0),ll.forward.apply(this,[e]),t=Math.sin(e.y),n=Math.cos(e.y),i=Math.cos(e.x),s=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*n*i),e.x=s*n*Math.sin(e.x),e.y=s*(this.cosc0*t-this.sinc0*n*i),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function mb(e){var t,n,i,s,r;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,r=we(e.x,e.y)){var a=2*Math.atan2(r,this.R2);t=Math.sin(a),n=Math.cos(a),s=Math.asin(n*this.sinc0+e.y*t*this.cosc0/r),i=Math.atan2(e.x*t,r*this.cosc0*n-e.y*this.sinc0*t)}else s=this.phic0,i=0;return e.x=i,e.y=s,ll.inverse.apply(this,[e]),e.x=B(e.x+this.long0),e}var pb=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const _b={init:fb,forward:gb,inverse:mb,names:pb};function yb(e,t,n){return t*=n,Math.tan(.5*(A+e))*Math.pow((1-t)/(1+t),.5*n)}function vb(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=O&&(this.k0=.5*(1+Es(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=O&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=O&&Math.abs(Math.cos(this.lat_ts))>O&&(this.k0=.5*this.cons*qe(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Le(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=qe(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-A,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function Eb(e){var t=e.x,n=e.y,i=Math.sin(n),s=Math.cos(n),r,a,o,l,h,u,c=B(t-this.long0);return Math.abs(Math.abs(t-this.long0)-Math.PI)<=O&&Math.abs(n+this.lat0)<=O?(e.x=NaN,e.y=NaN,e):this.sphere?(r=2*this.k0/(1+this.sinlat0*i+this.coslat0*s*Math.cos(c)),e.x=this.a*r*s*Math.sin(c)+this.x0,e.y=this.a*r*(this.coslat0*i-this.sinlat0*s*Math.cos(c))+this.y0,e):(a=2*Math.atan(this.ssfn_(n,i,this.e))-A,l=Math.cos(a),o=Math.sin(a),Math.abs(this.coslat0)<=O?(h=Le(this.e,n*this.con,this.con*i),u=2*this.a*this.k0*h/this.cons,e.x=this.x0+u*Math.sin(t-this.long0),e.y=this.y0-this.con*u*Math.cos(t-this.long0),e):(Math.abs(this.sinlat0)<O?(r=2*this.a*this.k0/(1+l*Math.cos(c)),e.y=r*o):(r=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*o+this.cosX0*l*Math.cos(c))),e.y=r*(this.cosX0*o-this.sinX0*l*Math.cos(c))+this.y0),e.x=r*l*Math.sin(c)+this.x0,e))}function xb(e){e.x-=this.x0,e.y-=this.y0;var t,n,i,s,r,a=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var o=2*Math.atan(a/(2*this.a*this.k0));return t=this.long0,n=this.lat0,a<=O?(e.x=t,e.y=n,e):(n=Math.asin(Math.cos(o)*this.sinlat0+e.y*Math.sin(o)*this.coslat0/a),Math.abs(this.coslat0)<O?this.lat0>0?t=B(this.long0+Math.atan2(e.x,-1*e.y)):t=B(this.long0+Math.atan2(e.x,e.y)):t=B(this.long0+Math.atan2(e.x*Math.sin(o),a*this.coslat0*Math.cos(o)-e.y*this.sinlat0*Math.sin(o))),e.x=t,e.y=n,e)}else if(Math.abs(this.coslat0)<=O){if(a<=O)return n=this.lat0,t=this.long0,e.x=t,e.y=n,e;e.x*=this.con,e.y*=this.con,i=a*this.cons/(2*this.a*this.k0),n=this.con*cs(this.e,i),t=this.con*B(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else s=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,a<=O?r=this.X0:(r=Math.asin(Math.cos(s)*this.sinX0+e.y*Math.sin(s)*this.cosX0/a),t=B(this.long0+Math.atan2(e.x*Math.sin(s),a*this.cosX0*Math.cos(s)-e.y*this.sinX0*Math.sin(s)))),n=-1*cs(this.e,Math.tan(.5*(A+r)));return e.x=t,e.y=n,e}var bb=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const Mb={init:vb,forward:Eb,inverse:xb,names:bb,ssfn_:yb};function Cb(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),n=this.a,i=this.rf,s=1/i,r=2*s-Math.pow(s,2),a=this.e=Math.sqrt(r);this.R=this.k0*n*Math.sqrt(1-r)/(1-r*Math.pow(t,2)),this.alpha=Math.sqrt(1+r/(1-r)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+e/2)),h=Math.log((1+a*t)/(1-a*t));this.K=o-this.alpha*l+this.alpha*a/2*h}function wb(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),i=-this.alpha*(t+n)+this.K,s=2*(Math.atan(Math.exp(i))-Math.PI/4),r=this.alpha*(e.x-this.lambda0),a=Math.atan(Math.sin(r)/(Math.sin(this.b0)*Math.tan(s)+Math.cos(this.b0)*Math.cos(r))),o=Math.asin(Math.cos(this.b0)*Math.sin(s)-Math.sin(this.b0)*Math.cos(s)*Math.cos(r));return e.y=this.R/2*Math.log((1+Math.sin(o))/(1-Math.sin(o)))+this.y0,e.x=this.R*a+this.x0,e}function Db(e){for(var t=e.x-this.x0,n=e.y-this.y0,i=t/this.R,s=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),r=Math.asin(Math.cos(this.b0)*Math.sin(s)+Math.sin(this.b0)*Math.cos(s)*Math.cos(i)),a=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(s))),o=this.lambda0+a/this.alpha,l=0,h=r,u=-1e3,c=0;Math.abs(h-u)>1e-7;){if(++c>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+r/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(h))/2)),u=h,h=2*Math.atan(Math.exp(l))-Math.PI/2}return e.x=o,e.y=h,e}var Tb=["somerc"];const Fb={init:Cb,forward:wb,inverse:Db,names:Tb};var ei=1e-7;function Ab(e){var t=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],n=typeof e.PROJECTION=="object"?Object.keys(e.PROJECTION)[0]:e.PROJECTION;return"no_uoff"in e||"no_off"in e||t.indexOf(n)!==-1}function Rb(){var e,t,n,i,s,r,a,o,l,h,u=0,c,d=0,f=0,g=0,m=0,_=0,v=0;this.no_off=Ab(this),this.no_rot="no_rot"in this;var E=!1;"alpha"in this&&(E=!0);var M=!1;if("rectified_grid_angle"in this&&(M=!0),E&&(v=this.alpha),M&&(u=this.rectified_grid_angle*Gt),E||M)d=this.longc;else if(f=this.long1,m=this.lat1,g=this.long2,_=this.lat2,Math.abs(m-_)<=ei||(e=Math.abs(m))<=ei||Math.abs(e-A)<=ei||Math.abs(Math.abs(this.lat0)-A)<=ei||Math.abs(Math.abs(_)-A)<=ei)throw new Error;var x=1-this.es;t=Math.sqrt(x),Math.abs(this.lat0)>O?(o=Math.sin(this.lat0),n=Math.cos(this.lat0),e=1-this.es*o*o,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/x),this.A=this.B*this.k0*t/e,i=this.B*t/(n*Math.sqrt(e)),s=i*i-1,s<=0?s=0:(s=Math.sqrt(s),this.lat0<0&&(s=-s)),this.E=s+=i,this.E*=Math.pow(Le(this.e,this.lat0,o),this.B)):(this.B=1/t,this.A=this.k0,this.E=i=s=1),E||M?(E?(c=Math.asin(Math.sin(v)/i),M||(u=v)):(c=u,v=Math.asin(i*Math.sin(c))),this.lam0=d-Math.asin(.5*(s-1/s)*Math.tan(c))/this.B):(r=Math.pow(Le(this.e,m,Math.sin(m)),this.B),a=Math.pow(Le(this.e,_,Math.sin(_)),this.B),s=this.E/r,l=(a-r)/(a+r),h=this.E*this.E,h=(h-a*r)/(h+a*r),e=f-g,e<-Math.pi?g-=hs:e>Math.pi&&(g+=hs),this.lam0=B(.5*(f+g)-Math.atan(h*Math.tan(.5*this.B*(f-g))/l)/this.B),c=Math.atan(2*Math.sin(this.B*B(f-this.lam0))/(s-1/s)),u=v=Math.asin(i*Math.sin(c))),this.singam=Math.sin(c),this.cosgam=Math.cos(c),this.sinrot=Math.sin(u),this.cosrot=Math.cos(u),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(i*i-1)/Math.cos(v))),this.lat0<0&&(this.u_0=-this.u_0)),s=.5*c,this.v_pole_n=this.ArB*Math.log(Math.tan(ht-s)),this.v_pole_s=this.ArB*Math.log(Math.tan(ht+s))}function Ib(e){var t={},n,i,s,r,a,o,l,h;if(e.x=e.x-this.lam0,Math.abs(Math.abs(e.y)-A)>O){if(a=this.E/Math.pow(Le(this.e,e.y,Math.sin(e.y)),this.B),o=1/a,n=.5*(a-o),i=.5*(a+o),r=Math.sin(this.B*e.x),s=(n*this.singam-r*this.cosgam)/i,Math.abs(Math.abs(s)-1)<O)throw new Error;h=.5*this.ArB*Math.log((1-s)/(1+s)),o=Math.cos(this.B*e.x),Math.abs(o)<ei?l=this.A*e.x:l=this.ArB*Math.atan2(n*this.cosgam+r*this.singam,o)}else h=e.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*e.y;return this.no_rot?(t.x=l,t.y=h):(l-=this.u_0,t.x=h*this.cosrot+l*this.sinrot,t.y=l*this.cosrot-h*this.sinrot),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function Sb(e){var t,n,i,s,r,a,o,l={};if(e.x=(e.x-this.x0)*(1/this.a),e.y=(e.y-this.y0)*(1/this.a),this.no_rot?(n=e.y,t=e.x):(n=e.x*this.cosrot-e.y*this.sinrot,t=e.y*this.cosrot+e.x*this.sinrot+this.u_0),i=Math.exp(-this.BrA*n),s=.5*(i-1/i),r=.5*(i+1/i),a=Math.sin(this.BrA*t),o=(a*this.cosgam+s*this.singam)/r,Math.abs(Math.abs(o)-1)<O)l.x=0,l.y=o<0?-A:A;else{if(l.y=this.E/Math.sqrt((1+o)/(1-o)),l.y=cs(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(s*this.cosgam-a*this.singam,Math.cos(this.BrA*t))}return l.x+=this.lam0,l}var Pb=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const Lb={init:Rb,forward:Ib,inverse:Sb,names:Pb};function Ob(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<O)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),n=Math.cos(this.lat1),i=qe(this.e,t,n),s=Le(this.e,this.lat1,t),r=Math.sin(this.lat2),a=Math.cos(this.lat2),o=qe(this.e,r,a),l=Le(this.e,this.lat2,r),h=Le(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>O?this.ns=Math.log(i/o)/Math.log(s/l):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=i/(this.ns*Math.pow(s,this.ns)),this.rh=this.a*this.f0*Math.pow(h,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function kb(e){var t=e.x,n=e.y;Math.abs(2*Math.abs(n)-Math.PI)<=O&&(n=Es(n)*(A-2*O));var i=Math.abs(Math.abs(n)-A),s,r;if(i>O)s=Le(this.e,n,Math.sin(n)),r=this.a*this.f0*Math.pow(s,this.ns);else{if(i=n*this.ns,i<=0)return null;r=0}var a=this.ns*B(t-this.long0);return e.x=this.k0*(r*Math.sin(a))+this.x0,e.y=this.k0*(this.rh-r*Math.cos(a))+this.y0,e}function Nb(e){var t,n,i,s,r,a=(e.x-this.x0)/this.k0,o=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(a*a+o*o),n=1):(t=-Math.sqrt(a*a+o*o),n=-1);var l=0;if(t!==0&&(l=Math.atan2(n*a,n*o)),t!==0||this.ns>0){if(n=1/this.ns,i=Math.pow(t/(this.a*this.f0),n),s=cs(this.e,i),s===-9999)return null}else s=-A;return r=B(l/this.ns+this.long0),e.x=r,e.y=s,e}var $b=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const Bb={init:Ob,forward:kb,inverse:Nb,names:$b};function zb(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function Ub(e){var t,n,i,s,r,a,o,l=e.x,h=e.y,u=B(l-this.long0);return t=Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(h/2+this.s45),this.alfa)/t)-this.s45),i=-u*this.alfa,s=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),r=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(s)),a=this.n*r,o=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(s/2+this.s45),this.n),e.y=o*Math.cos(a)/1,e.x=o*Math.sin(a)/1,this.czech||(e.y*=-1,e.x*=-1),e}function jb(e){var t,n,i,s,r,a,o,l,h=e.x;e.x=e.y,e.y=h,this.czech||(e.y*=-1,e.x*=-1),a=Math.sqrt(e.x*e.x+e.y*e.y),r=Math.atan2(e.y,e.x),s=r/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/a,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(s)),n=Math.asin(Math.cos(i)*Math.sin(s)/Math.cos(t)),e.x=this.long0-n/this.alfa,o=t,l=0;var u=0;do e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-e.y)<1e-10&&(l=1),o=e.y,u+=1;while(l===0&&u<15);return u>=15?null:e}var Gb=["Krovak","krovak"];const Wb={init:zb,forward:Ub,inverse:jb,names:Gb};function le(e,t,n,i,s){return e*s-t*Math.sin(2*s)+n*Math.sin(4*s)-i*Math.sin(6*s)}function xs(e){return 1-.25*e*(1+e/16*(3+1.25*e))}function bs(e){return .375*e*(1+.25*e*(1+.46875*e))}function Ms(e){return .05859375*e*e*(1+.75*e)}function Cs(e){return e*e*e*(35/3072)}function Ai(e,t,n){var i=t*n;return e/Math.sqrt(1-i*i)}function ki(e){return Math.abs(e)<A?e:e-Es(e)*Math.PI}function Dr(e,t,n,i,s){var r,a;r=e/t;for(var o=0;o<15;o++)if(a=(e-(t*r-n*Math.sin(2*r)+i*Math.sin(4*r)-s*Math.sin(6*r)))/(t-2*n*Math.cos(2*r)+4*i*Math.cos(4*r)-6*s*Math.cos(6*r)),r+=a,Math.abs(a)<=1e-10)return r;return NaN}function qb(){this.sphere||(this.e0=xs(this.es),this.e1=bs(this.es),this.e2=Ms(this.es),this.e3=Cs(this.es),this.ml0=this.a*le(this.e0,this.e1,this.e2,this.e3,this.lat0))}function Xb(e){var t,n,i=e.x,s=e.y;if(i=B(i-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(s)*Math.sin(i)),n=this.a*(Math.atan2(Math.tan(s),Math.cos(i))-this.lat0);else{var r=Math.sin(s),a=Math.cos(s),o=Ai(this.a,this.e,r),l=Math.tan(s)*Math.tan(s),h=i*Math.cos(s),u=h*h,c=this.es*a*a/(1-this.es),d=this.a*le(this.e0,this.e1,this.e2,this.e3,s);t=o*h*(1-u*l*(1/6-(8-l+8*c)*u/120)),n=d-this.ml0+o*r/a*u*(.5+(5-l+6*c)*u/24)}return e.x=t+this.x0,e.y=n+this.y0,e}function Kb(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,n=e.y/this.a,i,s;if(this.sphere){var r=n+this.lat0;i=Math.asin(Math.sin(r)*Math.cos(t)),s=Math.atan2(Math.tan(t),Math.cos(r))}else{var a=this.ml0/this.a+n,o=Dr(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-A)<=O)return e.x=this.long0,e.y=A,n<0&&(e.y*=-1),e;var l=Ai(this.a,this.e,Math.sin(o)),h=l*l*l/this.a/this.a*(1-this.es),u=Math.pow(Math.tan(o),2),c=t*this.a/l,d=c*c;i=o-l*Math.tan(o)/h*c*c*(.5-(1+3*u)*c*c/24),s=c*(1-d*(u/3+(1+3*u)*u*d/15))/Math.cos(o)}return e.x=B(s+this.long0),e.y=ki(i),e}var Zb=["Cassini","Cassini_Soldner","cass"];const Vb={init:qb,forward:Xb,inverse:Kb,names:Zb};function cn(e,t){var n;return e>1e-7?(n=e*t,(1-e*e)*(t/(1-n*n)-.5/e*Math.log((1-n)/(1+n)))):2*t}var Hb=1,Yb=2,Qb=3,Jb=4;function tM(){var e=Math.abs(this.lat0);if(Math.abs(e-A)<O?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<O?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var t;switch(this.qp=cn(this.e,1),this.mmf=.5/(1-this.es),this.apa=hM(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=cn(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function eM(e){var t,n,i,s,r,a,o,l,h,u,c=e.x,d=e.y;if(c=B(c-this.long0),this.sphere){if(r=Math.sin(d),u=Math.cos(d),i=Math.cos(c),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(n=this.mode===this.EQUIT?1+u*i:1+this.sinph0*r+this.cosph0*u*i,n<=O)return null;n=Math.sqrt(2/n),t=n*u*Math.sin(c),n*=this.mode===this.EQUIT?r:this.cosph0*r-this.sinph0*u*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(d+this.lat0)<O)return null;n=ht-d*.5,n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)),t=n*Math.sin(c),n*=i}}else{switch(o=0,l=0,h=0,i=Math.cos(c),s=Math.sin(c),r=Math.sin(d),a=cn(this.e,r),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(o=a/this.qp,l=Math.sqrt(1-o*o)),this.mode){case this.OBLIQ:h=1+this.sinb1*o+this.cosb1*l*i;break;case this.EQUIT:h=1+l*i;break;case this.N_POLE:h=A+d,a=this.qp-a;break;case this.S_POLE:h=d-A,a=this.qp+a;break}if(Math.abs(h)<O)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:h=Math.sqrt(2/h),this.mode===this.OBLIQ?n=this.ymf*h*(this.cosb1*o-this.sinb1*l*i):n=(h=Math.sqrt(2/(1+l*i)))*o*this.ymf,t=this.xmf*h*l*s;break;case this.N_POLE:case this.S_POLE:a>=0?(t=(h=Math.sqrt(a))*s,n=i*(this.mode===this.S_POLE?h:-h)):t=n=0;break}}return e.x=this.a*t+this.x0,e.y=this.a*n+this.y0,e}function nM(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,n=e.y/this.a,i,s,r,a,o,l,h;if(this.sphere){var u=0,c,d=0;if(c=Math.sqrt(t*t+n*n),s=c*.5,s>1)return null;switch(s=2*Math.asin(s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(d=Math.sin(s),u=Math.cos(s)),this.mode){case this.EQUIT:s=Math.abs(c)<=O?0:Math.asin(n*d/c),t*=d,n=u*c;break;case this.OBLIQ:s=Math.abs(c)<=O?this.lat0:Math.asin(u*this.sinph0+n*d*this.cosph0/c),t*=d*this.cosph0,n=(u-Math.sin(s)*this.sinph0)*c;break;case this.N_POLE:n=-n,s=A-s;break;case this.S_POLE:s-=A;break}i=n===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(t,n)}else{if(h=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t/=this.dd,n*=this.dd,l=Math.sqrt(t*t+n*n),l<O)return e.x=this.long0,e.y=this.lat0,e;a=2*Math.asin(.5*l/this.rq),r=Math.cos(a),t*=a=Math.sin(a),this.mode===this.OBLIQ?(h=r*this.sinb1+n*a*this.cosb1/l,o=this.qp*h,n=l*this.cosb1*r-n*this.sinb1*a):(h=n*a/l,o=this.qp*h,n=l*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),o=t*t+n*n,!o)return e.x=this.long0,e.y=this.lat0,e;h=1-o/this.qp,this.mode===this.S_POLE&&(h=-h)}i=Math.atan2(t,n),s=uM(Math.asin(h),this.apa)}return e.x=B(this.long0+i),e.y=s,e}var iM=.3333333333333333,sM=.17222222222222222,rM=.10257936507936508,aM=.06388888888888888,oM=.0664021164021164,lM=.016415012942191543;function hM(e){var t,n=[];return n[0]=e*iM,t=e*e,n[0]+=t*sM,n[1]=t*aM,t*=e,n[0]+=t*rM,n[1]+=t*oM,n[2]=t*lM,n}function uM(e,t){var n=e+e;return e+t[0]*Math.sin(n)+t[1]*Math.sin(n+n)+t[2]*Math.sin(n+n+n)}var cM=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const dM={init:tM,forward:eM,inverse:nM,names:cM,S_POLE:Hb,N_POLE:Yb,EQUIT:Qb,OBLIQ:Jb};function yn(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)}function fM(){Math.abs(this.lat1+this.lat2)<O||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=qe(this.e3,this.sin_po,this.cos_po),this.qs1=cn(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=qe(this.e3,this.sin_po,this.cos_po),this.qs2=cn(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=cn(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>O?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function gM(e){var t=e.x,n=e.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var i=cn(this.e3,this.sin_phi),s=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,r=this.ns0*B(t-this.long0),a=s*Math.sin(r)+this.x0,o=this.rh-s*Math.cos(r)+this.y0;return e.x=a,e.y=o,e}function mM(e){var t,n,i,s,r,a;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),i=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),i=-1),s=0,t!==0&&(s=Math.atan2(i*e.x,i*e.y)),i=t*this.ns0/this.a,this.sphere?a=Math.asin((this.c-i*i)/(2*this.ns0)):(n=(this.c-i*i)/this.ns0,a=this.phi1z(this.e3,n)),r=B(s/this.ns0+this.long0),e.x=r,e.y=a,e}function pM(e,t){var n,i,s,r,a,o=yn(.5*t);if(e<O)return o;for(var l=e*e,h=1;h<=25;h++)if(n=Math.sin(o),i=Math.cos(o),s=e*n,r=1-s*s,a=.5*r*r/i*(t/(1-l)-n/r+.5/e*Math.log((1-s)/(1+s))),o=o+a,Math.abs(a)<=1e-7)return o;return null}var _M=["Albers_Conic_Equal_Area","Albers","aea"];const yM={init:fM,forward:gM,inverse:mM,names:_M,phi1z:pM};function vM(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function EM(e){var t,n,i,s,r,a,o,l,h=e.x,u=e.y;return i=B(h-this.long0),t=Math.sin(u),n=Math.cos(u),s=Math.cos(i),a=this.sin_p14*t+this.cos_p14*n*s,r=1,a>0||Math.abs(a)<=O?(o=this.x0+this.a*r*n*Math.sin(i)/a,l=this.y0+this.a*r*(this.cos_p14*t-this.sin_p14*n*s)/a):(o=this.x0+this.infinity_dist*n*Math.sin(i),l=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*n*s)),e.x=o,e.y=l,e}function xM(e){var t,n,i,s,r,a;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=Math.sqrt(e.x*e.x+e.y*e.y))?(s=Math.atan2(t,this.rc),n=Math.sin(s),i=Math.cos(s),a=yn(i*this.sin_p14+e.y*n*this.cos_p14/t),r=Math.atan2(e.x*n,t*this.cos_p14*i-e.y*this.sin_p14*n),r=B(this.long0+r)):(a=this.phic0,r=0),e.x=r,e.y=a,e}var bM=["gnom"];const MM={init:vM,forward:EM,inverse:xM,names:bM};function CM(e,t){var n=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-n)<1e-6)return t<0?-1*A:A;for(var i=Math.asin(.5*t),s,r,a,o,l=0;l<30;l++)if(r=Math.sin(i),a=Math.cos(i),o=e*r,s=Math.pow(1-o*o,2)/(2*a)*(t/(1-e*e)-r/(1-o*o)+.5/e*Math.log((1-o)/(1+o))),i+=s,Math.abs(s)<=1e-10)return i;return NaN}function wM(){this.sphere||(this.k0=qe(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function DM(e){var t=e.x,n=e.y,i,s,r=B(t-this.long0);if(this.sphere)i=this.x0+this.a*r*Math.cos(this.lat_ts),s=this.y0+this.a*Math.sin(n)/Math.cos(this.lat_ts);else{var a=cn(this.e,Math.sin(n));i=this.x0+this.a*this.k0*r,s=this.y0+this.a*a*.5/this.k0}return e.x=i,e.y=s,e}function TM(e){e.x-=this.x0,e.y-=this.y0;var t,n;return this.sphere?(t=B(this.long0+e.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(n=CM(this.e,2*e.y*this.k0/this.a),t=B(this.long0+e.x/(this.a*this.k0))),e.x=t,e.y=n,e}var FM=["cea"];const AM={init:wM,forward:DM,inverse:TM,names:FM};function RM(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function IM(e){var t=e.x,n=e.y,i=B(t-this.long0),s=ki(n-this.lat0);return e.x=this.x0+this.a*i*this.rc,e.y=this.y0+this.a*s,e}function SM(e){var t=e.x,n=e.y;return e.x=B(this.long0+(t-this.x0)/(this.a*this.rc)),e.y=ki(this.lat0+(n-this.y0)/this.a),e}var PM=["Equirectangular","Equidistant_Cylindrical","eqc"];const LM={init:RM,forward:IM,inverse:SM,names:PM};var ou=20;function OM(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=xs(this.es),this.e1=bs(this.es),this.e2=Ms(this.es),this.e3=Cs(this.es),this.ml0=this.a*le(this.e0,this.e1,this.e2,this.e3,this.lat0)}function kM(e){var t=e.x,n=e.y,i,s,r,a=B(t-this.long0);if(r=a*Math.sin(n),this.sphere)Math.abs(n)<=O?(i=this.a*a,s=-1*this.a*this.lat0):(i=this.a*Math.sin(r)/Math.tan(n),s=this.a*(ki(n-this.lat0)+(1-Math.cos(r))/Math.tan(n)));else if(Math.abs(n)<=O)i=this.a*a,s=-1*this.ml0;else{var o=Ai(this.a,this.e,Math.sin(n))/Math.tan(n);i=o*Math.sin(r),s=this.a*le(this.e0,this.e1,this.e2,this.e3,n)-this.ml0+o*(1-Math.cos(r))}return e.x=i+this.x0,e.y=s+this.y0,e}function NM(e){var t,n,i,s,r,a,o,l,h;if(i=e.x-this.x0,s=e.y-this.y0,this.sphere)if(Math.abs(s+this.a*this.lat0)<=O)t=B(i/this.a+this.long0),n=0;else{a=this.lat0+s/this.a,o=i*i/this.a/this.a+a*a,l=a;var u;for(r=ou;r;--r)if(u=Math.tan(l),h=-1*(a*(l*u+1)-l-.5*(l*l+o)*u)/((l-a)/u-1),l+=h,Math.abs(h)<=O){n=l;break}t=B(this.long0+Math.asin(i*Math.tan(l)/this.a)/Math.sin(n))}else if(Math.abs(s+this.ml0)<=O)n=0,t=B(this.long0+i/this.a);else{a=(this.ml0+s)/this.a,o=i*i/this.a/this.a+a*a,l=a;var c,d,f,g,m;for(r=ou;r;--r)if(m=this.e*Math.sin(l),c=Math.sqrt(1-m*m)*Math.tan(l),d=this.a*le(this.e0,this.e1,this.e2,this.e3,l),f=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),g=d/this.a,h=(a*(c*g+1)-g-.5*c*(g*g+o))/(this.es*Math.sin(2*l)*(g*g+o-2*a*g)/(4*c)+(a-g)*(c*f-2/Math.sin(2*l))-f),l-=h,Math.abs(h)<=O){n=l;break}c=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),t=B(this.long0+Math.asin(i*c/this.a)/Math.sin(n))}return e.x=t,e.y=n,e}var $M=["Polyconic","poly"];const BM={init:OM,forward:kM,inverse:NM,names:$M};function zM(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function UM(e){var t,n=e.x,i=e.y,s=i-this.lat0,r=n-this.long0,a=s/Qi*1e-5,o=r,l=1,h=0;for(t=1;t<=10;t++)l=l*a,h=h+this.A[t]*l;var u=h,c=o,d=1,f=0,g,m,_=0,v=0;for(t=1;t<=6;t++)g=d*u-f*c,m=f*u+d*c,d=g,f=m,_=_+this.B_re[t]*d-this.B_im[t]*f,v=v+this.B_im[t]*d+this.B_re[t]*f;return e.x=v*this.a+this.x0,e.y=_*this.a+this.y0,e}function jM(e){var t,n=e.x,i=e.y,s=n-this.x0,r=i-this.y0,a=r/this.a,o=s/this.a,l=1,h=0,u,c,d=0,f=0;for(t=1;t<=6;t++)u=l*a-h*o,c=h*a+l*o,l=u,h=c,d=d+this.C_re[t]*l-this.C_im[t]*h,f=f+this.C_im[t]*l+this.C_re[t]*h;for(var g=0;g<this.iterations;g++){var m=d,_=f,v,E,M=a,x=o;for(t=2;t<=6;t++)v=m*d-_*f,E=_*d+m*f,m=v,_=E,M=M+(t-1)*(this.B_re[t]*m-this.B_im[t]*_),x=x+(t-1)*(this.B_im[t]*m+this.B_re[t]*_);m=1,_=0;var w=this.B_re[1],S=this.B_im[1];for(t=2;t<=6;t++)v=m*d-_*f,E=_*d+m*f,m=v,_=E,w=w+t*(this.B_re[t]*m-this.B_im[t]*_),S=S+t*(this.B_im[t]*m+this.B_re[t]*_);var Y=w*w+S*S;d=(M*w+x*S)/Y,f=(x*w-M*S)/Y}var W=d,st=f,at=1,yt=0;for(t=1;t<=9;t++)at=at*W,yt=yt+this.D[t]*at;var Xt=this.lat0+yt*Qi*1e5,ne=this.long0+st;return e.x=ne,e.y=Xt,e}var GM=["New_Zealand_Map_Grid","nzmg"];const WM={init:zM,forward:UM,inverse:jM,names:GM};function qM(){}function XM(e){var t=e.x,n=e.y,i=B(t-this.long0),s=this.x0+this.a*i,r=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return e.x=s,e.y=r,e}function KM(e){e.x-=this.x0,e.y-=this.y0;var t=B(this.long0+e.x/this.a),n=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=n,e}var ZM=["Miller_Cylindrical","mill"];const VM={init:qM,forward:XM,inverse:KM,names:ZM};var HM=20;function YM(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Id(this.es)}function QM(e){var t,n,i=e.x,s=e.y;if(i=B(i-this.long0),this.sphere){if(!this.m)s=this.n!==1?Math.asin(this.n*Math.sin(s)):s;else for(var r=this.n*Math.sin(s),a=HM;a;--a){var o=(this.m*s+Math.sin(s)-r)/(this.m+Math.cos(s));if(s-=o,Math.abs(o)<O)break}t=this.a*this.C_x*i*(this.m+Math.cos(s)),n=this.a*this.C_y*s}else{var l=Math.sin(s),h=Math.cos(s);n=this.a*aa(s,l,h,this.en),t=this.a*i*h/Math.sqrt(1-this.es*l*l)}return e.x=t,e.y=n,e}function JM(e){var t,n,i,s;return e.x-=this.x0,i=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,i=i/(this.C_x*(this.m+Math.cos(t))),this.m?t=yn((this.m*t+Math.sin(t))/this.n):this.n!==1&&(t=yn(Math.sin(t)/this.n)),i=B(i+this.long0),t=ki(t)):(t=Sd(e.y/this.a,this.es,this.en),s=Math.abs(t),s<A?(s=Math.sin(t),n=this.long0+e.x*Math.sqrt(1-this.es*s*s)/(this.a*Math.cos(t)),i=B(n)):s-O<A&&(i=this.long0)),e.x=i,e.y=t,e}var tC=["Sinusoidal","sinu"];const eC={init:YM,forward:QM,inverse:JM,names:tC};function nC(){}function iC(e){for(var t=e.x,n=e.y,i=B(t-this.long0),s=n,r=Math.PI*Math.sin(n);;){var a=-(s+Math.sin(s)-r)/(1+Math.cos(s));if(s+=a,Math.abs(a)<O)break}s/=2,Math.PI/2-Math.abs(n)<O&&(i=0);var o=.900316316158*this.a*i*Math.cos(s)+this.x0,l=1.4142135623731*this.a*Math.sin(s)+this.y0;return e.x=o,e.y=l,e}function sC(e){var t,n;e.x-=this.x0,e.y-=this.y0,n=e.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),t=Math.asin(n);var i=B(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),n=(2*t+Math.sin(2*t))/Math.PI,Math.abs(n)>1&&(n=1);var s=Math.asin(n);return e.x=i,e.y=s,e}var rC=["Mollweide","moll"];const aC={init:nC,forward:iC,inverse:sC,names:rC};function oC(){Math.abs(this.lat1+this.lat2)<O||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=xs(this.es),this.e1=bs(this.es),this.e2=Ms(this.es),this.e3=Cs(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=qe(this.e,this.sinphi,this.cosphi),this.ml1=le(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<O?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=qe(this.e,this.sinphi,this.cosphi),this.ml2=le(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=le(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function lC(e){var t=e.x,n=e.y,i;if(this.sphere)i=this.a*(this.g-n);else{var s=le(this.e0,this.e1,this.e2,this.e3,n);i=this.a*(this.g-s)}var r=this.ns*B(t-this.long0),a=this.x0+i*Math.sin(r),o=this.y0+this.rh-i*Math.cos(r);return e.x=a,e.y=o,e}function hC(e){e.x-=this.x0,e.y=this.rh-e.y+this.y0;var t,n,i,s;this.ns>=0?(n=Math.sqrt(e.x*e.x+e.y*e.y),t=1):(n=-Math.sqrt(e.x*e.x+e.y*e.y),t=-1);var r=0;if(n!==0&&(r=Math.atan2(t*e.x,t*e.y)),this.sphere)return s=B(this.long0+r/this.ns),i=ki(this.g-n/this.a),e.x=s,e.y=i,e;var a=this.g-n/this.a;return i=Dr(a,this.e0,this.e1,this.e2,this.e3),s=B(this.long0+r/this.ns),e.x=s,e.y=i,e}var uC=["Equidistant_Conic","eqdc"];const cC={init:oC,forward:lC,inverse:hC,names:uC};function dC(){this.R=this.a}function fC(e){var t=e.x,n=e.y,i=B(t-this.long0),s,r;Math.abs(n)<=O&&(s=this.x0+this.R*i,r=this.y0);var a=yn(2*Math.abs(n/Math.PI));(Math.abs(i)<=O||Math.abs(Math.abs(n)-A)<=O)&&(s=this.x0,n>=0?r=this.y0+Math.PI*this.R*Math.tan(.5*a):r=this.y0+Math.PI*this.R*-Math.tan(.5*a));var o=.5*Math.abs(Math.PI/i-i/Math.PI),l=o*o,h=Math.sin(a),u=Math.cos(a),c=u/(h+u-1),d=c*c,f=c*(2/h-1),g=f*f,m=Math.PI*this.R*(o*(c-g)+Math.sqrt(l*(c-g)*(c-g)-(g+l)*(d-g)))/(g+l);i<0&&(m=-m),s=this.x0+m;var _=l+c;return m=Math.PI*this.R*(f*_-o*Math.sqrt((g+l)*(l+1)-_*_))/(g+l),n>=0?r=this.y0+m:r=this.y0-m,e.x=s,e.y=r,e}function gC(e){var t,n,i,s,r,a,o,l,h,u,c,d,f;return e.x-=this.x0,e.y-=this.y0,c=Math.PI*this.R,i=e.x/c,s=e.y/c,r=i*i+s*s,a=-Math.abs(s)*(1+r),o=a-2*s*s+i*i,l=-2*a+1+2*s*s+r*r,f=s*s/l+(2*o*o*o/l/l/l-9*a*o/l/l)/27,h=(a-o*o/3/l)/l,u=2*Math.sqrt(-h/3),c=3*f/h/u,Math.abs(c)>1&&(c>=0?c=1:c=-1),d=Math.acos(c)/3,e.y>=0?n=(-u*Math.cos(d+Math.PI/3)-o/3/l)*Math.PI:n=-(-u*Math.cos(d+Math.PI/3)-o/3/l)*Math.PI,Math.abs(i)<O?t=this.long0:t=B(this.long0+Math.PI*(r-1+Math.sqrt(1+2*(i*i-s*s)+r*r))/2/i),e.x=t,e.y=n,e}var mC=["Van_der_Grinten_I","VanDerGrinten","vandg"];const pC={init:dC,forward:fC,inverse:gC,names:mC};function _C(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function yC(e){var t=e.x,n=e.y,i=Math.sin(e.y),s=Math.cos(e.y),r=B(t-this.long0),a,o,l,h,u,c,d,f,g,m,_,v,E,M,x,w,S,Y,W,st,at,yt,Xt;return this.sphere?Math.abs(this.sin_p12-1)<=O?(e.x=this.x0+this.a*(A-n)*Math.sin(r),e.y=this.y0-this.a*(A-n)*Math.cos(r),e):Math.abs(this.sin_p12+1)<=O?(e.x=this.x0+this.a*(A+n)*Math.sin(r),e.y=this.y0+this.a*(A+n)*Math.cos(r),e):(Y=this.sin_p12*i+this.cos_p12*s*Math.cos(r),w=Math.acos(Y),S=w?w/Math.sin(w):1,e.x=this.x0+this.a*S*s*Math.sin(r),e.y=this.y0+this.a*S*(this.cos_p12*i-this.sin_p12*s*Math.cos(r)),e):(a=xs(this.es),o=bs(this.es),l=Ms(this.es),h=Cs(this.es),Math.abs(this.sin_p12-1)<=O?(u=this.a*le(a,o,l,h,A),c=this.a*le(a,o,l,h,n),e.x=this.x0+(u-c)*Math.sin(r),e.y=this.y0-(u-c)*Math.cos(r),e):Math.abs(this.sin_p12+1)<=O?(u=this.a*le(a,o,l,h,A),c=this.a*le(a,o,l,h,n),e.x=this.x0+(u+c)*Math.sin(r),e.y=this.y0+(u+c)*Math.cos(r),e):(d=i/s,f=Ai(this.a,this.e,this.sin_p12),g=Ai(this.a,this.e,i),m=Math.atan((1-this.es)*d+this.es*f*this.sin_p12/(g*s)),_=Math.atan2(Math.sin(r),this.cos_p12*Math.tan(m)-this.sin_p12*Math.cos(r)),_===0?W=Math.asin(this.cos_p12*Math.sin(m)-this.sin_p12*Math.cos(m)):Math.abs(Math.abs(_)-Math.PI)<=O?W=-Math.asin(this.cos_p12*Math.sin(m)-this.sin_p12*Math.cos(m)):W=Math.asin(Math.sin(r)*Math.cos(m)/Math.sin(_)),v=this.e*this.sin_p12/Math.sqrt(1-this.es),E=this.e*this.cos_p12*Math.cos(_)/Math.sqrt(1-this.es),M=v*E,x=E*E,st=W*W,at=st*W,yt=at*W,Xt=yt*W,w=f*W*(1-st*x*(1-x)/6+at/8*M*(1-2*x)+yt/120*(x*(4-7*x)-3*v*v*(1-7*x))-Xt/48*M),e.x=this.x0+w*Math.sin(_),e.y=this.y0+w*Math.cos(_),e))}function vC(e){e.x-=this.x0,e.y-=this.y0;var t,n,i,s,r,a,o,l,h,u,c,d,f,g,m,_,v,E,M,x,w,S,Y,W;return this.sphere?(t=Math.sqrt(e.x*e.x+e.y*e.y),t>2*A*this.a?void 0:(n=t/this.a,i=Math.sin(n),s=Math.cos(n),r=this.long0,Math.abs(t)<=O?a=this.lat0:(a=yn(s*this.sin_p12+e.y*i*this.cos_p12/t),o=Math.abs(this.lat0)-A,Math.abs(o)<=O?this.lat0>=0?r=B(this.long0+Math.atan2(e.x,-e.y)):r=B(this.long0-Math.atan2(-e.x,e.y)):r=B(this.long0+Math.atan2(e.x*i,t*this.cos_p12*s-e.y*this.sin_p12*i))),e.x=r,e.y=a,e)):(l=xs(this.es),h=bs(this.es),u=Ms(this.es),c=Cs(this.es),Math.abs(this.sin_p12-1)<=O?(d=this.a*le(l,h,u,c,A),t=Math.sqrt(e.x*e.x+e.y*e.y),f=d-t,a=Dr(f/this.a,l,h,u,c),r=B(this.long0+Math.atan2(e.x,-1*e.y)),e.x=r,e.y=a,e):Math.abs(this.sin_p12+1)<=O?(d=this.a*le(l,h,u,c,A),t=Math.sqrt(e.x*e.x+e.y*e.y),f=t-d,a=Dr(f/this.a,l,h,u,c),r=B(this.long0+Math.atan2(e.x,e.y)),e.x=r,e.y=a,e):(t=Math.sqrt(e.x*e.x+e.y*e.y),_=Math.atan2(e.x,e.y),g=Ai(this.a,this.e,this.sin_p12),v=Math.cos(_),E=this.e*this.cos_p12*v,M=-E*E/(1-this.es),x=3*this.es*(1-M)*this.sin_p12*this.cos_p12*v/(1-this.es),w=t/g,S=w-M*(1+M)*Math.pow(w,3)/6-x*(1+3*M)*Math.pow(w,4)/24,Y=1-M*S*S/2-w*S*S*S/6,m=Math.asin(this.sin_p12*Math.cos(S)+this.cos_p12*Math.sin(S)*v),r=B(this.long0+Math.asin(Math.sin(_)*Math.sin(S)/Math.cos(m))),W=Math.sin(m),a=Math.atan2((W-this.es*Y*this.sin_p12)*Math.tan(m),W*(1-this.es)),e.x=r,e.y=a,e))}var EC=["Azimuthal_Equidistant","aeqd"];const xC={init:_C,forward:yC,inverse:vC,names:EC};function bC(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function MC(e){var t,n,i,s,r,a,o,l,h=e.x,u=e.y;return i=B(h-this.long0),t=Math.sin(u),n=Math.cos(u),s=Math.cos(i),a=this.sin_p14*t+this.cos_p14*n*s,r=1,(a>0||Math.abs(a)<=O)&&(o=this.a*r*n*Math.sin(i),l=this.y0+this.a*r*(this.cos_p14*t-this.sin_p14*n*s)),e.x=o,e.y=l,e}function CC(e){var t,n,i,s,r,a,o;return e.x-=this.x0,e.y-=this.y0,t=Math.sqrt(e.x*e.x+e.y*e.y),n=yn(t/this.a),i=Math.sin(n),s=Math.cos(n),a=this.long0,Math.abs(t)<=O?(o=this.lat0,e.x=a,e.y=o,e):(o=yn(s*this.sin_p14+e.y*i*this.cos_p14/t),r=Math.abs(this.lat0)-A,Math.abs(r)<=O?(this.lat0>=0?a=B(this.long0+Math.atan2(e.x,-e.y)):a=B(this.long0-Math.atan2(-e.x,e.y)),e.x=a,e.y=o,e):(a=B(this.long0+Math.atan2(e.x*i,t*this.cos_p14*s-e.y*this.sin_p14*i)),e.x=a,e.y=o,e))}var wC=["ortho"];const DC={init:bC,forward:MC,inverse:CC,names:wC};var Dt={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},ut={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function TC(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=A-ht/2?this.face=Dt.TOP:this.lat0<=-(A-ht/2)?this.face=Dt.BOTTOM:Math.abs(this.long0)<=ht?this.face=Dt.FRONT:Math.abs(this.long0)<=A+ht?this.face=this.long0>0?Dt.RIGHT:Dt.LEFT:this.face=Dt.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function FC(e){var t={x:0,y:0},n,i,s,r,a,o,l={value:0};if(e.x-=this.long0,this.es!==0?n=Math.atan(this.one_minus_f_squared*Math.tan(e.y)):n=e.y,i=e.x,this.face===Dt.TOP)r=A-n,i>=ht&&i<=A+ht?(l.value=ut.AREA_0,s=i-A):i>A+ht||i<=-(A+ht)?(l.value=ut.AREA_1,s=i>0?i-St:i+St):i>-(A+ht)&&i<=-ht?(l.value=ut.AREA_2,s=i+A):(l.value=ut.AREA_3,s=i);else if(this.face===Dt.BOTTOM)r=A+n,i>=ht&&i<=A+ht?(l.value=ut.AREA_0,s=-i+A):i<ht&&i>=-ht?(l.value=ut.AREA_1,s=-i):i<-ht&&i>=-(A+ht)?(l.value=ut.AREA_2,s=-i-A):(l.value=ut.AREA_3,s=i>0?-i+St:-i-St);else{var h,u,c,d,f,g,m;this.face===Dt.RIGHT?i=vi(i,+A):this.face===Dt.BACK?i=vi(i,+St):this.face===Dt.LEFT&&(i=vi(i,-A)),d=Math.sin(n),f=Math.cos(n),g=Math.sin(i),m=Math.cos(i),h=f*m,u=f*g,c=d,this.face===Dt.FRONT?(r=Math.acos(h),s=Ws(r,c,u,l)):this.face===Dt.RIGHT?(r=Math.acos(u),s=Ws(r,c,-h,l)):this.face===Dt.BACK?(r=Math.acos(-h),s=Ws(r,c,-u,l)):this.face===Dt.LEFT?(r=Math.acos(-u),s=Ws(r,c,h,l)):(r=s=0,l.value=ut.AREA_0)}return o=Math.atan(12/St*(s+Math.acos(Math.sin(s)*Math.cos(ht))-A)),a=Math.sqrt((1-Math.cos(r))/(Math.cos(o)*Math.cos(o))/(1-Math.cos(Math.atan(1/Math.cos(s))))),l.value===ut.AREA_1?o+=A:l.value===ut.AREA_2?o+=St:l.value===ut.AREA_3&&(o+=1.5*St),t.x=a*Math.cos(o),t.y=a*Math.sin(o),t.x=t.x*this.a+this.x0,t.y=t.y*this.a+this.y0,e.x=t.x,e.y=t.y,e}function AC(e){var t={lam:0,phi:0},n,i,s,r,a,o,l,h,u,c={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,i=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),n=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?c.value=ut.AREA_0:e.y>=0&&e.y>=Math.abs(e.x)?(c.value=ut.AREA_1,n-=A):e.x<0&&-e.x>=Math.abs(e.y)?(c.value=ut.AREA_2,n=n<0?n+St:n-St):(c.value=ut.AREA_3,n+=A),u=St/12*Math.tan(n),a=Math.sin(u)/(Math.cos(u)-1/Math.sqrt(2)),o=Math.atan(a),s=Math.cos(n),r=Math.tan(i),l=1-s*s*r*r*(1-Math.cos(Math.atan(1/Math.cos(o)))),l<-1?l=-1:l>1&&(l=1),this.face===Dt.TOP)h=Math.acos(l),t.phi=A-h,c.value===ut.AREA_0?t.lam=o+A:c.value===ut.AREA_1?t.lam=o<0?o+St:o-St:c.value===ut.AREA_2?t.lam=o-A:t.lam=o;else if(this.face===Dt.BOTTOM)h=Math.acos(l),t.phi=h-A,c.value===ut.AREA_0?t.lam=-o+A:c.value===ut.AREA_1?t.lam=-o:c.value===ut.AREA_2?t.lam=-o-A:t.lam=o<0?-o-St:-o+St;else{var d,f,g;d=l,u=d*d,u>=1?g=0:g=Math.sqrt(1-u)*Math.sin(o),u+=g*g,u>=1?f=0:f=Math.sqrt(1-u),c.value===ut.AREA_1?(u=f,f=-g,g=u):c.value===ut.AREA_2?(f=-f,g=-g):c.value===ut.AREA_3&&(u=f,f=g,g=-u),this.face===Dt.RIGHT?(u=d,d=-f,f=u):this.face===Dt.BACK?(d=-d,f=-f):this.face===Dt.LEFT&&(u=d,d=f,f=-u),t.phi=Math.acos(-g)-A,t.lam=Math.atan2(f,d),this.face===Dt.RIGHT?t.lam=vi(t.lam,-A):this.face===Dt.BACK?t.lam=vi(t.lam,-St):this.face===Dt.LEFT&&(t.lam=vi(t.lam,+A))}if(this.es!==0){var m,_,v;m=t.phi<0?1:0,_=Math.tan(t.phi),v=this.b/Math.sqrt(_*_+this.one_minus_f_squared),t.phi=Math.atan(Math.sqrt(this.a*this.a-v*v)/(this.one_minus_f*v)),m&&(t.phi=-t.phi)}return t.lam+=this.long0,e.x=t.lam,e.y=t.phi,e}function Ws(e,t,n,i){var s;return e<O?(i.value=ut.AREA_0,s=0):(s=Math.atan2(t,n),Math.abs(s)<=ht?i.value=ut.AREA_0:s>ht&&s<=A+ht?(i.value=ut.AREA_1,s-=A):s>A+ht||s<=-(A+ht)?(i.value=ut.AREA_2,s=s>=0?s-St:s+St):(i.value=ut.AREA_3,s+=A)),s}function vi(e,t){var n=e+t;return n<-St?n+=hs:n>+St&&(n-=hs),n}var RC=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const IC={init:TC,forward:FC,inverse:AC,names:RC};var ro=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Xi=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Od=.8487,kd=1.3523,Nd=Ue/5,SC=1/Nd,oi=18,Tr=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))},PC=function(e,t){return e[1]+t*(2*e[2]+t*3*e[3])};function LC(e,t,n,i){for(var s=t;i;--i){var r=e(s);if(s-=r,Math.abs(r)<n)break}return s}function OC(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function kC(e){var t=B(e.x-this.long0),n=Math.abs(e.y),i=Math.floor(n*Nd);i<0?i=0:i>=oi&&(i=oi-1),n=Ue*(n-SC*i);var s={x:Tr(ro[i],n)*t,y:Tr(Xi[i],n)};return e.y<0&&(s.y=-s.y),s.x=s.x*this.a*Od+this.x0,s.y=s.y*this.a*kd+this.y0,s}function NC(e){var t={x:(e.x-this.x0)/(this.a*Od),y:Math.abs(e.y-this.y0)/(this.a*kd)};if(t.y>=1)t.x/=ro[oi][0],t.y=e.y<0?-A:A;else{var n=Math.floor(t.y*oi);for(n<0?n=0:n>=oi&&(n=oi-1);;)if(Xi[n][0]>t.y)--n;else if(Xi[n+1][0]<=t.y)++n;else break;var i=Xi[n],s=5*(t.y-i[0])/(Xi[n+1][0]-i[0]);s=LC(function(r){return(Tr(i,r)-t.y)/PC(i,r)},s,O,100),t.x/=Tr(ro[n],s),t.y=(5*n+s)*Gt,e.y<0&&(t.y=-t.y)}return t.x=B(t.x+this.long0),t}var $C=["Robinson","robin"];const BC={init:OC,forward:kC,inverse:NC,names:$C};function zC(){this.name="geocent"}function UC(e){var t=bd(e,this.es,this.a);return t}function jC(e){var t=Md(e,this.es,this.a,this.b);return t}var GC=["Geocentric","geocentric","geocent","Geocent"];const WC={init:zC,forward:UC,inverse:jC,names:GC};var Ht={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},Ui={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function qC(){if(Object.keys(Ui).forEach((function(n){if(typeof this[n]>"u")this[n]=Ui[n].def;else{if(Ui[n].num&&isNaN(this[n]))throw new Error("Invalid parameter value, must be numeric "+n+" = "+this[n]);Ui[n].num&&(this[n]=parseFloat(this[n]))}Ui[n].degrees&&(this[n]=this[n]*Gt)}).bind(this)),Math.abs(Math.abs(this.lat0)-A)<O?this.mode=this.lat0<0?Ht.S_POLE:Ht.N_POLE:Math.abs(this.lat0)<O?this.mode=Ht.EQUIT:(this.mode=Ht.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var e=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(e),this.sw=Math.sin(e)}function XC(e){e.x-=this.long0;var t=Math.sin(e.y),n=Math.cos(e.y),i=Math.cos(e.x),s,r;switch(this.mode){case Ht.OBLIQ:r=this.sinph0*t+this.cosph0*n*i;break;case Ht.EQUIT:r=n*i;break;case Ht.S_POLE:r=-t;break;case Ht.N_POLE:r=t;break}switch(r=this.pn1/(this.p-r),s=r*n*Math.sin(e.x),this.mode){case Ht.OBLIQ:r*=this.cosph0*t-this.sinph0*n*i;break;case Ht.EQUIT:r*=t;break;case Ht.N_POLE:r*=-(n*i);break;case Ht.S_POLE:r*=n*i;break}var a,o;return a=r*this.cg+s*this.sg,o=1/(a*this.sw*this.h1+this.cw),s=(s*this.cg-r*this.sg)*this.cw*o,r=a*o,e.x=s*this.a,e.y=r*this.a,e}function KC(e){e.x/=this.a,e.y/=this.a;var t={x:e.x,y:e.y},n,i,s;s=1/(this.pn1-e.y*this.sw),n=this.pn1*e.x*s,i=this.pn1*e.y*this.cw*s,e.x=n*this.cg+i*this.sg,e.y=i*this.cg-n*this.sg;var r=we(e.x,e.y);if(Math.abs(r)<O)t.x=0,t.y=e.y;else{var a,o;switch(o=1-r*r*this.pfact,o=(this.p-Math.sqrt(o))/(this.pn1/r+r/this.pn1),a=Math.sqrt(1-o*o),this.mode){case Ht.OBLIQ:t.y=Math.asin(a*this.sinph0+e.y*o*this.cosph0/r),e.y=(a-this.sinph0*Math.sin(t.y))*r,e.x*=o*this.cosph0;break;case Ht.EQUIT:t.y=Math.asin(e.y*o/r),e.y=a*r,e.x*=o;break;case Ht.N_POLE:t.y=Math.asin(a),e.y=-e.y;break;case Ht.S_POLE:t.y=-Math.asin(a);break}t.x=Math.atan2(e.x,e.y)}return e.x=t.x+this.long0,e.y=t.y,e}var ZC=["Tilted_Perspective","tpers"];const VC={init:qC,forward:XC,inverse:KC,names:ZC};function HC(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var e=1-this.es,t=1/e;this.radius_p=Math.sqrt(e),this.radius_p2=e,this.radius_p_inv2=t,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function YC(e){var t=e.x,n=e.y,i,s,r,a;if(t=t-this.long0,this.shape==="ellipse"){n=Math.atan(this.radius_p2*Math.tan(n));var o=this.radius_p/we(this.radius_p*Math.cos(n),Math.sin(n));if(s=o*Math.cos(t)*Math.cos(n),r=o*Math.sin(t)*Math.cos(n),a=o*Math.sin(n),(this.radius_g-s)*s-r*r-a*a*this.radius_p_inv2<0)return e.x=Number.NaN,e.y=Number.NaN,e;i=this.radius_g-s,this.flip_axis?(e.x=this.radius_g_1*Math.atan(r/we(a,i)),e.y=this.radius_g_1*Math.atan(a/i)):(e.x=this.radius_g_1*Math.atan(r/i),e.y=this.radius_g_1*Math.atan(a/we(r,i)))}else this.shape==="sphere"&&(i=Math.cos(n),s=Math.cos(t)*i,r=Math.sin(t)*i,a=Math.sin(n),i=this.radius_g-s,this.flip_axis?(e.x=this.radius_g_1*Math.atan(r/we(a,i)),e.y=this.radius_g_1*Math.atan(a/i)):(e.x=this.radius_g_1*Math.atan(r/i),e.y=this.radius_g_1*Math.atan(a/we(r,i))));return e.x=e.x*this.a,e.y=e.y*this.a,e}function QC(e){var t=-1,n=0,i=0,s,r,a,o;if(e.x=e.x/this.a,e.y=e.y/this.a,this.shape==="ellipse"){this.flip_axis?(i=Math.tan(e.y/this.radius_g_1),n=Math.tan(e.x/this.radius_g_1)*we(1,i)):(n=Math.tan(e.x/this.radius_g_1),i=Math.tan(e.y/this.radius_g_1)*we(1,n));var l=i/this.radius_p;if(s=n*n+l*l+t*t,r=2*this.radius_g*t,a=r*r-4*s*this.C,a<0)return e.x=Number.NaN,e.y=Number.NaN,e;o=(-r-Math.sqrt(a))/(2*s),t=this.radius_g+o*t,n*=o,i*=o,e.x=Math.atan2(n,t),e.y=Math.atan(i*Math.cos(e.x)/t),e.y=Math.atan(this.radius_p_inv2*Math.tan(e.y))}else if(this.shape==="sphere"){if(this.flip_axis?(i=Math.tan(e.y/this.radius_g_1),n=Math.tan(e.x/this.radius_g_1)*Math.sqrt(1+i*i)):(n=Math.tan(e.x/this.radius_g_1),i=Math.tan(e.y/this.radius_g_1)*Math.sqrt(1+n*n)),s=n*n+i*i+t*t,r=2*this.radius_g*t,a=r*r-4*s*this.C,a<0)return e.x=Number.NaN,e.y=Number.NaN,e;o=(-r-Math.sqrt(a))/(2*s),t=this.radius_g+o*t,n*=o,i*=o,e.x=Math.atan2(n,t),e.y=Math.atan(i*Math.cos(e.x)/t)}return e.x=e.x+this.long0,e}var JC=["Geostationary Satellite View","Geostationary_Satellite","geos"];const tw={init:HC,forward:YC,inverse:QC,names:JC};function ew(e){e.Proj.projections.add(tr),e.Proj.projections.add(er),e.Proj.projections.add(ob),e.Proj.projections.add(_b),e.Proj.projections.add(Mb),e.Proj.projections.add(Fb),e.Proj.projections.add(Lb),e.Proj.projections.add(Bb),e.Proj.projections.add(Wb),e.Proj.projections.add(Vb),e.Proj.projections.add(dM),e.Proj.projections.add(yM),e.Proj.projections.add(MM),e.Proj.projections.add(AM),e.Proj.projections.add(LM),e.Proj.projections.add(BM),e.Proj.projections.add(WM),e.Proj.projections.add(VM),e.Proj.projections.add(eC),e.Proj.projections.add(aC),e.Proj.projections.add(cC),e.Proj.projections.add(pC),e.Proj.projections.add(xC),e.Proj.projections.add(DC),e.Proj.projections.add(IC),e.Proj.projections.add(BC),e.Proj.projections.add(WC),e.Proj.projections.add(VC),e.Proj.projections.add(tw)}Ee.defaultDatum="WGS84";Ee.Proj=je;Ee.WGS84=new Ee.Proj("WGS84");Ee.Point=Fi;Ee.toPoint=Cd;Ee.defs=re;Ee.nadgrid=hx;Ee.transform=wr;Ee.mgrs=wx;Ee.version="__VERSION__";ew(Ee);let nw=null;function iw(e){nw=e;const t=Object.keys(e.defs),n=t.length;let i,s;for(i=0;i<n;++i){const r=t[i];if(!te(r)){const a=e.defs(r);let o=a.units;!o&&a.projName==="longlat"&&(o="degrees"),Bc(new Bo({code:r,axisOrientation:a.axis,metersPerUnit:a.to_meter,units:o}))}}for(i=0;i<n;++i){const r=t[i],a=te(r);for(s=0;s<n;++s){const o=t[s],l=te(o);if(!Lc(r,o))if(e.defs[r]===e.defs[o])Va([a,l]);else{const h=e(r,o);Ry(a,l,Mh(a,l,h.forward),Mh(l,a,h.inverse))}}}}iw(Ee);const sw={name:"WmtsLayerInfo",components:{InfoList:zn},props:{layer:Object,endpoint:Object},data:()=>({selectedStyle:"",selectedMatrixSet:0,olMap:null}),watch:{layer:{immediate:!0,async handler(e){var a;this.selectedStyle=e.defaultStyle||((a=e.styles[0])==null?void 0:a.name),this.selectedMatrixSet=0;const t=e.matrixSets[this.selectedMatrixSet],n=await this.endpoint.getOpenLayersTileGrid(this.layer.name,t.identifier);this.olMap?this.olMap.getLayers().pop():this.olMap=new TE({target:this.$refs["map-root"],layers:[new jh({source:new c2})],view:new ze({zoom:2,center:[0,0]})});const i=this.layer.resourceUrls[0],s=this.endpoint.getDefaultDimensions(this.layer.name),r=new jh({source:new M2({layer:this.layer.name,style:this.selectedStyle,matrixSet:t.identifier,format:i.format,url:i.url,requestEncoding:i.encoding,tileGrid:n,projection:t.crs,dimensions:s})});this.olMap.addLayer(r)}}}},rw={class:"d-flex flex-row justify-content-between"},aw=["value"],ow=["value"],lw={ref:"map-root",style:{width:"100%",height:"300px","margin-top":"10px"}};function hw(e,t,n,i,s,r){const a=it("InfoList");return L(),U("div",null,[b("p",null,Ft(n.layer.title),1),Z(a,{info:n.layer},null,8,["info"]),b("div",rw,[b("label",null,[pt(" Selected style:  "),gn(b("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>e.selectedStyle=o),class:"form-select d-inline-block w-auto"},[(L(!0),U(Tt,null,We(n.layer.styles,o=>(L(),U("option",{value:o.name},Ft(o.title||o.name),9,aw))),256))],512),[[ur,e.selectedStyle]])]),b("label",null,[pt(" Selected matrix set:  "),gn(b("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>e.selectedMatrixSet=o),class:"form-select d-inline-block w-auto"},[(L(!0),U(Tt,null,We(n.layer.matrixSets,(o,l)=>(L(),U("option",{value:l},Ft(o.identifier),9,ow))),256))],512),[[ur,e.selectedMatrixSet]])])]),b("div",lw,null,512)])}const uw=Ot(sw,[["render",hw]]),cw={name:"WmtsEndpoint",components:{WmtsLayerInfo:uw,ItemsTree:jr,InfoList:zn},data:()=>({loading:!1,error:null,endpoint:null,url:"https://basemap.at/wmts/1.0.0/WMTSCapabilities.xml",selectedLayer:null}),computed:{loaded(){return this.endpoint&&this.loading===!1&&this.error===null}},methods:{async createEndpoint(){this.error=null,this.loading=!0,this.endpoint=new D_(this.url);try{await this.endpoint.isReady()}catch(e){this.error=e.message}this.loading=!1},handleLayerClick(e,t){this.selectedLayer=this.endpoint.getLayerByName(e.name),t.preventDefault()}}},dw={class:"d-flex flex-row my-4"},fw={key:0},gw={key:1},mw=["title"],pw=["onClick"],_w={key:1},yw={key:2};function vw(e,t,n,i,s,r){const a=it("InfoList"),o=it("ItemsTree"),l=it("WmtsLayerInfo");return L(),U("div",null,[b("div",dw,[gn(b("input",{class:"form-control me-3",placeholder:"Enter a WMS service URL here","onUpdate:modelValue":t[0]||(t[0]=h=>e.url=h)},null,512),[[Ur,e.url]]),b("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=h=>r.createEndpoint())}," Analyze ")]),e.loading?(L(),U("div",fw,"Loading...")):wt("",!0),r.loaded?(L(),U("div",gw,[Z(a,{info:e.endpoint.getServiceInfo()},null,8,["info"]),Z(o,{items:e.endpoint.getLayers(),style:{"min-height":"200px"}},{default:Yt(({item:h})=>[b("div",{title:h.abstract},[h.name?(L(),U("a",{key:0,href:"",onClick:u=>r.handleLayerClick(h,u),class:"link-light"},Ft(h.title),9,pw)):(L(),U("span",_w,Ft(h.title),1))],8,mw)]),_:1},8,["items"]),e.selectedLayer?(L(),fe(l,{key:0,layer:e.selectedLayer,endpoint:e.endpoint},null,8,["layer","endpoint"])):wt("",!0)])):wt("",!0),e.error?(L(),U("div",yw,"Error: "+Ft(e.error),1)):wt("",!0)])}const Ew=Ot(cw,[["render",vw]]),xw={name:"App",components:{WmtsEndpoint:Ew,OgcApiEndpoint:x_,WfsEndpoint:Y1,WmsEndpoint:T1}},bw={class:"pb-5"},Mw=b("h2",{class:"my-4"},"WMS",-1),Cw=b("p",null," Enter a WMS service URL below to get some information and a list of layers from it. ",-1),ww=b("h2",{class:"my-4"},"WFS",-1),Dw=b("p",null," Enter a WFS service URL below to get some information and a list of feature types from it. ",-1),Tw=b("h2",{class:"my-4"},"OGC API",-1),Fw=b("p",null," Enter an OGC API endpoint URL below to get some information and a list of collections from it. ",-1),Aw=b("h2",{class:"my-4"},"WMTS",-1),Rw=b("p",null," Enter a WMTS endpoint URL below to get some information and a list of layers from it. ",-1);function Iw(e,t,n,i,s,r){const a=it("WmsEndpoint"),o=it("WfsEndpoint"),l=it("OgcApiEndpoint"),h=it("WmtsEndpoint");return L(),U("div",bw,[Mw,Cw,Z(a),ww,Dw,Z(o),Tw,Fw,Z(l),Aw,Rw,Z(h)])}const Sw=Ot(xw,[["render",Iw]]);const Pw={name:"App",components:{Docs:rp,LibLogo:cp,Demo:Sw},data:()=>({demoTabEnabled:!1})},Lw={class:"container"},Ow={class:"col-8 offset-2"},kw={class:"title text-center",style:{"font-size":"5em",margin:"130px 0 70px"}},Nw={class:"d-flex flex-row justify-content-center",style:{"margin-bottom":"70px"}};function $w(e,t,n,i,s,r){const a=it("LibLogo"),o=it("Docs"),l=it("Demo");return L(),U("div",Lw,[b("div",Ow,[b("h1",kw,[Z(a)]),b("div",Nw,[b("button",{type:"button",class:bi(["btn btn-primary tab-toggle m-3",{"tab-toggle-enabled":!e.demoTabEnabled}]),onClick:t[0]||(t[0]=h=>e.demoTabEnabled=!1)}," DOCS ",2),b("button",{type:"button",class:bi(["btn btn-primary tab-toggle m-3",{"tab-toggle-enabled":e.demoTabEnabled}]),onClick:t[1]||(t[1]=h=>e.demoTabEnabled=!0)}," TRY IT! ",2)]),e.demoTabEnabled?wt("",!0):(L(),fe(o,{key:0})),e.demoTabEnabled?(L(),fe(l,{key:1})):wt("",!0)])])}const Bw=Ot(Pw,[["render",$w],["__scopeId","data-v-2a3c1faf"]]),zw=/[\0-\x1F!-,\.\/:-@\[-\^`\{-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0378\u0379\u037E\u0380-\u0385\u0387\u038B\u038D\u03A2\u03F6\u0482\u0530\u0557\u0558\u055A-\u055F\u0589-\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u05CF\u05EB-\u05EE\u05F3-\u060F\u061B-\u061F\u066A-\u066D\u06D4\u06DD\u06DE\u06E9\u06FD\u06FE\u0700-\u070F\u074B\u074C\u07B2-\u07BF\u07F6-\u07F9\u07FB\u07FC\u07FE\u07FF\u082E-\u083F\u085C-\u085F\u086B-\u089F\u08B5\u08C8-\u08D2\u08E2\u0964\u0965\u0970\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA\u09BB\u09C5\u09C6\u09C9\u09CA\u09CF-\u09D6\u09D8-\u09DB\u09DE\u09E4\u09E5\u09F2-\u09FB\u09FD\u09FF\u0A00\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A58\u0A5D\u0A5F-\u0A65\u0A76-\u0A80\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA\u0ABB\u0AC6\u0ACA\u0ACE\u0ACF\u0AD1-\u0ADF\u0AE4\u0AE5\u0AF0-\u0AF8\u0B00\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A\u0B3B\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B54\u0B58-\u0B5B\u0B5E\u0B64\u0B65\u0B70\u0B72-\u0B81\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE\u0BCF\u0BD1-\u0BD6\u0BD8-\u0BE5\u0BF0-\u0BFF\u0C0D\u0C11\u0C29\u0C3A-\u0C3C\u0C45\u0C49\u0C4E-\u0C54\u0C57\u0C5B-\u0C5F\u0C64\u0C65\u0C70-\u0C7F\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA\u0CBB\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CDD\u0CDF\u0CE4\u0CE5\u0CF0\u0CF3-\u0CFF\u0D0D\u0D11\u0D45\u0D49\u0D4F-\u0D53\u0D58-\u0D5E\u0D64\u0D65\u0D70-\u0D79\u0D80\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DE5\u0DF0\u0DF1\u0DF4-\u0E00\u0E3B-\u0E3F\u0E4F\u0E5A-\u0E80\u0E83\u0E85\u0E8B\u0EA4\u0EA6\u0EBE\u0EBF\u0EC5\u0EC7\u0ECE\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F01-\u0F17\u0F1A-\u0F1F\u0F2A-\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F48\u0F6D-\u0F70\u0F85\u0F98\u0FBD-\u0FC5\u0FC7-\u0FFF\u104A-\u104F\u109E\u109F\u10C6\u10C8-\u10CC\u10CE\u10CF\u10FB\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B\u135C\u1360-\u137F\u1390-\u139F\u13F6\u13F7\u13FE-\u1400\u166D\u166E\u1680\u169B-\u169F\u16EB-\u16ED\u16F9-\u16FF\u170D\u1715-\u171F\u1735-\u173F\u1754-\u175F\u176D\u1771\u1774-\u177F\u17D4-\u17D6\u17D8-\u17DB\u17DE\u17DF\u17EA-\u180A\u180E\u180F\u181A-\u181F\u1879-\u187F\u18AB-\u18AF\u18F6-\u18FF\u191F\u192C-\u192F\u193C-\u1945\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DA-\u19FF\u1A1C-\u1A1F\u1A5F\u1A7D\u1A7E\u1A8A-\u1A8F\u1A9A-\u1AA6\u1AA8-\u1AAF\u1AC1-\u1AFF\u1B4C-\u1B4F\u1B5A-\u1B6A\u1B74-\u1B7F\u1BF4-\u1BFF\u1C38-\u1C3F\u1C4A-\u1C4C\u1C7E\u1C7F\u1C89-\u1C8F\u1CBB\u1CBC\u1CC0-\u1CCF\u1CD3\u1CFB-\u1CFF\u1DFA\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FBD\u1FBF-\u1FC1\u1FC5\u1FCD-\u1FCF\u1FD4\u1FD5\u1FDC-\u1FDF\u1FED-\u1FF1\u1FF5\u1FFD-\u203E\u2041-\u2053\u2055-\u2070\u2072-\u207E\u2080-\u208F\u209D-\u20CF\u20F1-\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F-\u215F\u2189-\u24B5\u24EA-\u2BFF\u2C2F\u2C5F\u2CE5-\u2CEA\u2CF4-\u2CFF\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D70-\u2D7E\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF\u2E00-\u2E2E\u2E30-\u3004\u3008-\u3020\u3030\u3036\u3037\u303D-\u3040\u3097\u3098\u309B\u309C\u30A0\u30FB\u3100-\u3104\u3130\u318F-\u319F\u31C0-\u31EF\u3200-\u33FF\u4DC0-\u4DFF\u9FFD-\u9FFF\uA48D-\uA4CF\uA4FE\uA4FF\uA60D-\uA60F\uA62C-\uA63F\uA673\uA67E\uA6F2-\uA716\uA720\uA721\uA789\uA78A\uA7C0\uA7C1\uA7CB-\uA7F4\uA828-\uA82B\uA82D-\uA83F\uA874-\uA87F\uA8C6-\uA8CF\uA8DA-\uA8DF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA954-\uA95F\uA97D-\uA97F\uA9C1-\uA9CE\uA9DA-\uA9DF\uA9FF\uAA37-\uAA3F\uAA4E\uAA4F\uAA5A-\uAA5F\uAA77-\uAA79\uAAC3-\uAADA\uAADE\uAADF\uAAF0\uAAF1\uAAF7-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F\uAB5B\uAB6A-\uAB6F\uABEB\uABEE\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uD7FF\uE000-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB29\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBB2-\uFBD2\uFD3E-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFC-\uFDFF\uFE10-\uFE1F\uFE30-\uFE32\uFE35-\uFE4C\uFE50-\uFE6F\uFE75\uFEFD-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF3E\uFF40\uFF5B-\uFF65\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFFF]|\uD800[\uDC0C\uDC27\uDC3B\uDC3E\uDC4E\uDC4F\uDC5E-\uDC7F\uDCFB-\uDD3F\uDD75-\uDDFC\uDDFE-\uDE7F\uDE9D-\uDE9F\uDED1-\uDEDF\uDEE1-\uDEFF\uDF20-\uDF2C\uDF4B-\uDF4F\uDF7B-\uDF7F\uDF9E\uDF9F\uDFC4-\uDFC7\uDFD0\uDFD6-\uDFFF]|\uD801[\uDC9E\uDC9F\uDCAA-\uDCAF\uDCD4-\uDCD7\uDCFC-\uDCFF\uDD28-\uDD2F\uDD64-\uDDFF\uDF37-\uDF3F\uDF56-\uDF5F\uDF68-\uDFFF]|\uD802[\uDC06\uDC07\uDC09\uDC36\uDC39-\uDC3B\uDC3D\uDC3E\uDC56-\uDC5F\uDC77-\uDC7F\uDC9F-\uDCDF\uDCF3\uDCF6-\uDCFF\uDD16-\uDD1F\uDD3A-\uDD7F\uDDB8-\uDDBD\uDDC0-\uDDFF\uDE04\uDE07-\uDE0B\uDE14\uDE18\uDE36\uDE37\uDE3B-\uDE3E\uDE40-\uDE5F\uDE7D-\uDE7F\uDE9D-\uDEBF\uDEC8\uDEE7-\uDEFF\uDF36-\uDF3F\uDF56-\uDF5F\uDF73-\uDF7F\uDF92-\uDFFF]|\uD803[\uDC49-\uDC7F\uDCB3-\uDCBF\uDCF3-\uDCFF\uDD28-\uDD2F\uDD3A-\uDE7F\uDEAA\uDEAD-\uDEAF\uDEB2-\uDEFF\uDF1D-\uDF26\uDF28-\uDF2F\uDF51-\uDFAF\uDFC5-\uDFDF\uDFF7-\uDFFF]|\uD804[\uDC47-\uDC65\uDC70-\uDC7E\uDCBB-\uDCCF\uDCE9-\uDCEF\uDCFA-\uDCFF\uDD35\uDD40-\uDD43\uDD48-\uDD4F\uDD74\uDD75\uDD77-\uDD7F\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDFF\uDE12\uDE38-\uDE3D\uDE3F-\uDE7F\uDE87\uDE89\uDE8E\uDE9E\uDEA9-\uDEAF\uDEEB-\uDEEF\uDEFA-\uDEFF\uDF04\uDF0D\uDF0E\uDF11\uDF12\uDF29\uDF31\uDF34\uDF3A\uDF45\uDF46\uDF49\uDF4A\uDF4E\uDF4F\uDF51-\uDF56\uDF58-\uDF5C\uDF64\uDF65\uDF6D-\uDF6F\uDF75-\uDFFF]|\uD805[\uDC4B-\uDC4F\uDC5A-\uDC5D\uDC62-\uDC7F\uDCC6\uDCC8-\uDCCF\uDCDA-\uDD7F\uDDB6\uDDB7\uDDC1-\uDDD7\uDDDE-\uDDFF\uDE41-\uDE43\uDE45-\uDE4F\uDE5A-\uDE7F\uDEB9-\uDEBF\uDECA-\uDEFF\uDF1B\uDF1C\uDF2C-\uDF2F\uDF3A-\uDFFF]|\uD806[\uDC3B-\uDC9F\uDCEA-\uDCFE\uDD07\uDD08\uDD0A\uDD0B\uDD14\uDD17\uDD36\uDD39\uDD3A\uDD44-\uDD4F\uDD5A-\uDD9F\uDDA8\uDDA9\uDDD8\uDDD9\uDDE2\uDDE5-\uDDFF\uDE3F-\uDE46\uDE48-\uDE4F\uDE9A-\uDE9C\uDE9E-\uDEBF\uDEF9-\uDFFF]|\uD807[\uDC09\uDC37\uDC41-\uDC4F\uDC5A-\uDC71\uDC90\uDC91\uDCA8\uDCB7-\uDCFF\uDD07\uDD0A\uDD37-\uDD39\uDD3B\uDD3E\uDD48-\uDD4F\uDD5A-\uDD5F\uDD66\uDD69\uDD8F\uDD92\uDD99-\uDD9F\uDDAA-\uDEDF\uDEF7-\uDFAF\uDFB1-\uDFFF]|\uD808[\uDF9A-\uDFFF]|\uD809[\uDC6F-\uDC7F\uDD44-\uDFFF]|[\uD80A\uD80B\uD80E-\uD810\uD812-\uD819\uD824-\uD82B\uD82D\uD82E\uD830-\uD833\uD837\uD839\uD83D\uD83F\uD87B-\uD87D\uD87F\uD885-\uDB3F\uDB41-\uDBFF][\uDC00-\uDFFF]|\uD80D[\uDC2F-\uDFFF]|\uD811[\uDE47-\uDFFF]|\uD81A[\uDE39-\uDE3F\uDE5F\uDE6A-\uDECF\uDEEE\uDEEF\uDEF5-\uDEFF\uDF37-\uDF3F\uDF44-\uDF4F\uDF5A-\uDF62\uDF78-\uDF7C\uDF90-\uDFFF]|\uD81B[\uDC00-\uDE3F\uDE80-\uDEFF\uDF4B-\uDF4E\uDF88-\uDF8E\uDFA0-\uDFDF\uDFE2\uDFE5-\uDFEF\uDFF2-\uDFFF]|\uD821[\uDFF8-\uDFFF]|\uD823[\uDCD6-\uDCFF\uDD09-\uDFFF]|\uD82C[\uDD1F-\uDD4F\uDD53-\uDD63\uDD68-\uDD6F\uDEFC-\uDFFF]|\uD82F[\uDC6B-\uDC6F\uDC7D-\uDC7F\uDC89-\uDC8F\uDC9A-\uDC9C\uDC9F-\uDFFF]|\uD834[\uDC00-\uDD64\uDD6A-\uDD6C\uDD73-\uDD7A\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDE41\uDE45-\uDFFF]|\uD835[\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3\uDFCC\uDFCD]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85-\uDE9A\uDEA0\uDEB0-\uDFFF]|\uD838[\uDC07\uDC19\uDC1A\uDC22\uDC25\uDC2B-\uDCFF\uDD2D-\uDD2F\uDD3E\uDD3F\uDD4A-\uDD4D\uDD4F-\uDEBF\uDEFA-\uDFFF]|\uD83A[\uDCC5-\uDCCF\uDCD7-\uDCFF\uDD4C-\uDD4F\uDD5A-\uDFFF]|\uD83B[\uDC00-\uDDFF\uDE04\uDE20\uDE23\uDE25\uDE26\uDE28\uDE33\uDE38\uDE3A\uDE3C-\uDE41\uDE43-\uDE46\uDE48\uDE4A\uDE4C\uDE50\uDE53\uDE55\uDE56\uDE58\uDE5A\uDE5C\uDE5E\uDE60\uDE63\uDE65\uDE66\uDE6B\uDE73\uDE78\uDE7D\uDE7F\uDE8A\uDE9C-\uDEA0\uDEA4\uDEAA\uDEBC-\uDFFF]|\uD83C[\uDC00-\uDD2F\uDD4A-\uDD4F\uDD6A-\uDD6F\uDD8A-\uDFFF]|\uD83E[\uDC00-\uDFEF\uDFFA-\uDFFF]|\uD869[\uDEDE-\uDEFF]|\uD86D[\uDF35-\uDF3F]|\uD86E[\uDC1E\uDC1F]|\uD873[\uDEA2-\uDEAF]|\uD87A[\uDFE1-\uDFFF]|\uD87E[\uDE1E-\uDFFF]|\uD884[\uDF4B-\uDFFF]|\uDB40[\uDC00-\uDCFF\uDDF0-\uDFFF]/g,Uw=Object.hasOwnProperty;class jw{constructor(){this.occurrences,this.reset()}slug(t,n){const i=this;let s=Gw(t,n===!0);const r=s;for(;Uw.call(i.occurrences,s);)i.occurrences[r]++,s=r+"-"+i.occurrences[r];return i.occurrences[s]=0,s}reset(){this.occurrences=Object.create(null)}}function Gw(e,t){return typeof e!="string"?"":(t||(e=e.toLowerCase()),e.replace(zw,"").replace(/ /g,"-"))}let lu,hu=[];function Ww({prefix:e=""}={}){return{headerIds:!1,hooks:{preprocess(t){return hu=[],lu=new jw,t}},renderer:{heading(t,n,i){i=i.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"");const s=`${e}${lu.slug(i)}`,r={level:n,text:t,id:s};return hu.push(r),`<h${n} id="${s}">${t}</h${n}>
`}}}}q.use(rf());q.use(Ww());Ag(Bw).mount("#app");
